{"version":3,"file":"index2.js","sources":["../../build/CubismSdkForWeb-5-r.4/Framework/src/type/csmvector.js","../../build/CubismSdkForWeb-5-r.4/Framework/src/type/csmstring.js","../../build/CubismSdkForWeb-5-r.4/Framework/src/id/cubismid.js","../../build/CubismSdkForWeb-5-r.4/Framework/src/id/cubismidmanager.js","../../build/CubismSdkForWeb-5-r.4/Framework/src/math/cubismmatrix44.js","../../build/CubismSdkForWeb-5-r.4/Framework/src/type/csmrectf.js","../../build/CubismSdkForWeb-5-r.4/Framework/src/rendering/cubismrenderer.js","../../build/CubismSdkForWeb-5-r.4/Framework/src/utils/cubismdebug.js","../../build/CubismSdkForWeb-5-r.4/Framework/src/type/csmmap.js","../../build/CubismSdkForWeb-5-r.4/Framework/src/utils/cubismjsonextension.js","../../build/CubismSdkForWeb-5-r.4/Framework/src/utils/cubismjson.js","../../build/CubismSdkForWeb-5-r.4/Framework/src/live2dcubismframework.js","../../build/CubismSdkForWeb-5-r.4/Samples/TypeScript/Demo/src/lappdefine.js","../../build/CubismSdkForWeb-5-r.4/Samples/TypeScript/Demo/src/lapppal.js","../../build/CubismSdkForWeb-5-r.4/Samples/TypeScript/Demo/src/lappglmanager.js","../../build/CubismSdkForWeb-5-r.4/Framework/src/cubismdefaultparameterid.js","../../build/CubismSdkForWeb-5-r.4/Framework/src/icubismmodelsetting.js","../../build/CubismSdkForWeb-5-r.4/Framework/src/cubismmodelsettingjson.js","../../build/CubismSdkForWeb-5-r.4/Framework/src/effect/cubismbreath.js","../../build/CubismSdkForWeb-5-r.4/Framework/src/effect/cubismeyeblink.js","../../build/CubismSdkForWeb-5-r.4/Framework/src/effect/cubismpose.js","../../build/CubismSdkForWeb-5-r.4/Framework/src/math/cubismmodelmatrix.js","../../build/CubismSdkForWeb-5-r.4/Framework/src/math/cubismvector2.js","../../build/CubismSdkForWeb-5-r.4/Framework/src/math/cubismmath.js","../../build/CubismSdkForWeb-5-r.4/Framework/src/math/cubismtargetpoint.js","../../build/CubismSdkForWeb-5-r.4/Framework/src/motion/acubismmotion.js","../../build/CubismSdkForWeb-5-r.4/Framework/src/motion/cubismexpressionmotion.js","../../build/CubismSdkForWeb-5-r.4/Framework/src/motion/cubismmotionqueueentry.js","../../build/CubismSdkForWeb-5-r.4/Framework/src/motion/cubismmotionqueuemanager.js","../../build/CubismSdkForWeb-5-r.4/Framework/src/motion/cubismexpressionmotionmanager.js","../../build/CubismSdkForWeb-5-r.4/Framework/src/motion/cubismmotioninternal.js","../../build/CubismSdkForWeb-5-r.4/Framework/src/motion/cubismmotionjson.js","../../build/CubismSdkForWeb-5-r.4/Framework/src/motion/cubismmotion.js","../../build/CubismSdkForWeb-5-r.4/Framework/src/motion/cubismmotionmanager.js","../../build/CubismSdkForWeb-5-r.4/Framework/src/physics/cubismphysicsinternal.js","../../build/CubismSdkForWeb-5-r.4/Framework/src/physics/cubismphysicsjson.js","../../build/CubismSdkForWeb-5-r.4/Framework/src/physics/cubismphysics.js","../../build/CubismSdkForWeb-5-r.4/Framework/src/rendering/cubismclippingmanager.js","../../build/CubismSdkForWeb-5-r.4/Framework/src/rendering/cubismshader_webgl.js","../../build/CubismSdkForWeb-5-r.4/Framework/src/rendering/cubismrenderer_webgl.js","../../build/CubismSdkForWeb-5-r.4/Framework/src/model/cubismmodel.js","../../build/CubismSdkForWeb-5-r.4/Framework/src/model/cubismmoc.js","../../build/CubismSdkForWeb-5-r.4/Framework/src/model/cubismmodeluserdatajson.js","../../build/CubismSdkForWeb-5-r.4/Framework/src/model/cubismmodeluserdata.js","../../build/CubismSdkForWeb-5-r.4/Framework/src/model/cubismusermodel.js","../../build/CubismSdkForWeb-5-r.4/Samples/TypeScript/Demo/src/lappwavfilehandler.js","../../build/CubismSdkForWeb-5-r.4/Samples/TypeScript/Demo/src/lappmodel.js","../../build/CubismSdkForWeb-5-r.4/Framework/src/math/cubismviewmatrix.js","../../build/CubismSdkForWeb-5-r.4/Samples/TypeScript/Demo/src/lapplive2dmanager.js","../../build/CubismSdkForWeb-5-r.4/Samples/TypeScript/Demo/src/lapptexturemanager.js","../../build/CubismSdkForWeb-5-r.4/Samples/TypeScript/Demo/src/lappsprite.js","../../build/CubismSdkForWeb-5-r.4/Samples/TypeScript/Demo/src/touchmanager.js","../../build/CubismSdkForWeb-5-r.4/Samples/TypeScript/Demo/src/lappview.js","../../build/CubismSdkForWeb-5-r.4/Samples/TypeScript/Demo/src/lappsubdelegate.js","../../build/CubismSdkForWeb-5-r.4/Samples/TypeScript/Demo/src/lappdelegate.js","../../build/cubism5/index.js"],"sourcesContent":["export class csmVector {\n    constructor(initialCapacity = 0) {\n        if (initialCapacity < 1) {\n            this._ptr = [];\n            this._capacity = 0;\n            this._size = 0;\n        }\n        else {\n            this._ptr = new Array(initialCapacity);\n            this._capacity = initialCapacity;\n            this._size = 0;\n        }\n    }\n    at(index) {\n        return this._ptr[index];\n    }\n    set(index, value) {\n        this._ptr[index] = value;\n    }\n    get(offset = 0) {\n        const ret = new Array();\n        for (let i = offset; i < this._size; i++) {\n            ret.push(this._ptr[i]);\n        }\n        return ret;\n    }\n    pushBack(value) {\n        if (this._size >= this._capacity) {\n            this.prepareCapacity(this._capacity == 0 ? csmVector.DefaultSize : this._capacity * 2);\n        }\n        this._ptr[this._size++] = value;\n    }\n    clear() {\n        this._ptr.length = 0;\n        this._size = 0;\n    }\n    getSize() {\n        return this._size;\n    }\n    assign(newSize, value) {\n        const curSize = this._size;\n        if (curSize < newSize) {\n            this.prepareCapacity(newSize);\n        }\n        for (let i = 0; i < newSize; i++) {\n            this._ptr[i] = value;\n        }\n        this._size = newSize;\n    }\n    resize(newSize, value = null) {\n        this.updateSize(newSize, value, true);\n    }\n    updateSize(newSize, value = null, callPlacementNew = true) {\n        const curSize = this._size;\n        if (curSize < newSize) {\n            this.prepareCapacity(newSize);\n            if (callPlacementNew) {\n                for (let i = this._size; i < newSize; i++) {\n                    if (typeof value == 'function') {\n                        this._ptr[i] = JSON.parse(JSON.stringify(new value()));\n                    }\n                    else {\n                        this._ptr[i] = value;\n                    }\n                }\n            }\n            else {\n                for (let i = this._size; i < newSize; i++) {\n                    this._ptr[i] = value;\n                }\n            }\n        }\n        else {\n            const sub = this._size - newSize;\n            this._ptr.splice(this._size - sub, sub);\n        }\n        this._size = newSize;\n    }\n    insert(position, begin, end) {\n        let dstSi = position._index;\n        const srcSi = begin._index;\n        const srcEi = end._index;\n        const addCount = srcEi - srcSi;\n        this.prepareCapacity(this._size + addCount);\n        const addSize = this._size - dstSi;\n        if (addSize > 0) {\n            for (let i = 0; i < addSize; i++) {\n                this._ptr.splice(dstSi + i, 0, null);\n            }\n        }\n        for (let i = srcSi; i < srcEi; i++, dstSi++) {\n            this._ptr[dstSi] = begin._vector._ptr[i];\n        }\n        this._size = this._size + addCount;\n    }\n    remove(index) {\n        if (index < 0 || this._size <= index) {\n            return false;\n        }\n        this._ptr.splice(index, 1);\n        --this._size;\n        return true;\n    }\n    erase(ite) {\n        const index = ite._index;\n        if (index < 0 || this._size <= index) {\n            return ite;\n        }\n        this._ptr.splice(index, 1);\n        --this._size;\n        const ite2 = new iterator(this, index);\n        return ite2;\n    }\n    prepareCapacity(newSize) {\n        if (newSize > this._capacity) {\n            if (this._capacity == 0) {\n                this._ptr = new Array(newSize);\n                this._capacity = newSize;\n            }\n            else {\n                this._ptr.length = newSize;\n                this._capacity = newSize;\n            }\n        }\n    }\n    begin() {\n        const ite = this._size == 0 ? this.end() : new iterator(this, 0);\n        return ite;\n    }\n    end() {\n        const ite = new iterator(this, this._size);\n        return ite;\n    }\n    getOffset(offset) {\n        const newVector = new csmVector();\n        newVector._ptr = this.get(offset);\n        newVector._size = this.get(offset).length;\n        newVector._capacity = this.get(offset).length;\n        return newVector;\n    }\n}\ncsmVector.DefaultSize = 10;\nexport class iterator {\n    constructor(v, index) {\n        this._vector = v != undefined ? v : null;\n        this._index = index != undefined ? index : 0;\n    }\n    set(ite) {\n        this._index = ite._index;\n        this._vector = ite._vector;\n        return this;\n    }\n    preIncrement() {\n        ++this._index;\n        return this;\n    }\n    preDecrement() {\n        --this._index;\n        return this;\n    }\n    increment() {\n        const iteold = new iterator(this._vector, this._index++);\n        return iteold;\n    }\n    decrement() {\n        const iteold = new iterator(this._vector, this._index--);\n        return iteold;\n    }\n    ptr() {\n        return this._vector._ptr[this._index];\n    }\n    substitution(ite) {\n        this._index = ite._index;\n        this._vector = ite._vector;\n        return this;\n    }\n    notEqual(ite) {\n        return this._index != ite._index || this._vector != ite._vector;\n    }\n}\nimport * as $ from './csmvector';\nexport var Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.csmVector = $.csmVector;\n    Live2DCubismFramework.iterator = $.iterator;\n})(Live2DCubismFramework || (Live2DCubismFramework = {}));\n","export class csmString {\n    append(c, length) {\n        this.s += length !== undefined ? c.substr(0, length) : c;\n        return this;\n    }\n    expansion(length, v) {\n        for (let i = 0; i < length; i++) {\n            this.append(v);\n        }\n        return this;\n    }\n    getBytes() {\n        return encodeURIComponent(this.s).replace(/%../g, 'x').length;\n    }\n    getLength() {\n        return this.s.length;\n    }\n    isLess(s) {\n        return this.s < s.s;\n    }\n    isGreat(s) {\n        return this.s > s.s;\n    }\n    isEqual(s) {\n        return this.s == s;\n    }\n    isEmpty() {\n        return this.s.length == 0;\n    }\n    constructor(s) {\n        this.s = s;\n    }\n}\nimport * as $ from './csmstring';\nexport var Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.csmString = $.csmString;\n})(Live2DCubismFramework || (Live2DCubismFramework = {}));\n","import { csmString } from '../type/csmstring';\nexport class CubismId {\n    static createIdInternal(id) {\n        return new CubismId(id);\n    }\n    getString() {\n        return this._id;\n    }\n    isEqual(c) {\n        if (typeof c === 'string') {\n            return this._id.isEqual(c);\n        }\n        else if (c instanceof csmString) {\n            return this._id.isEqual(c.s);\n        }\n        else if (c instanceof CubismId) {\n            return this._id.isEqual(c._id.s);\n        }\n        return false;\n    }\n    isNotEqual(c) {\n        if (typeof c == 'string') {\n            return !this._id.isEqual(c);\n        }\n        else if (c instanceof csmString) {\n            return !this._id.isEqual(c.s);\n        }\n        else if (c instanceof CubismId) {\n            return !this._id.isEqual(c._id.s);\n        }\n        return false;\n    }\n    constructor(id) {\n        if (typeof id === 'string') {\n            this._id = new csmString(id);\n            return;\n        }\n        this._id = id;\n    }\n}\nimport * as $ from './cubismid';\nexport var Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismId = $.CubismId;\n})(Live2DCubismFramework || (Live2DCubismFramework = {}));\n","import { csmVector } from '../type/csmvector';\nimport { CubismId } from './cubismid';\nexport class CubismIdManager {\n    constructor() {\n        this._ids = new csmVector();\n    }\n    release() {\n        for (let i = 0; i < this._ids.getSize(); ++i) {\n            this._ids.set(i, void 0);\n        }\n        this._ids = null;\n    }\n    registerIds(ids) {\n        for (let i = 0; i < ids.length; i++) {\n            this.registerId(ids[i]);\n        }\n    }\n    registerId(id) {\n        let result = null;\n        if ('string' == typeof id) {\n            if ((result = this.findId(id)) != null) {\n                return result;\n            }\n            result = CubismId.createIdInternal(id);\n            this._ids.pushBack(result);\n        }\n        else {\n            return this.registerId(id.s);\n        }\n        return result;\n    }\n    getId(id) {\n        return this.registerId(id);\n    }\n    isExist(id) {\n        if ('string' == typeof id) {\n            return this.findId(id) != null;\n        }\n        return this.isExist(id.s);\n    }\n    findId(id) {\n        for (let i = 0; i < this._ids.getSize(); ++i) {\n            if (this._ids.at(i).getString().isEqual(id)) {\n                return this._ids.at(i);\n            }\n        }\n        return null;\n    }\n}\nimport * as $ from './cubismidmanager';\nexport var Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismIdManager = $.CubismIdManager;\n})(Live2DCubismFramework || (Live2DCubismFramework = {}));\n","export class CubismMatrix44 {\n    constructor() {\n        this._tr = new Float32Array(16);\n        this.loadIdentity();\n    }\n    static multiply(a, b, dst) {\n        const c = new Float32Array([\n            0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,\n            0.0\n        ]);\n        const n = 4;\n        for (let i = 0; i < n; ++i) {\n            for (let j = 0; j < n; ++j) {\n                for (let k = 0; k < n; ++k) {\n                    c[j + i * 4] += a[k + i * 4] * b[j + k * 4];\n                }\n            }\n        }\n        for (let i = 0; i < 16; ++i) {\n            dst[i] = c[i];\n        }\n    }\n    loadIdentity() {\n        const c = new Float32Array([\n            1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0,\n            1.0\n        ]);\n        this.setMatrix(c);\n    }\n    setMatrix(tr) {\n        for (let i = 0; i < 16; ++i) {\n            this._tr[i] = tr[i];\n        }\n    }\n    getArray() {\n        return this._tr;\n    }\n    getScaleX() {\n        return this._tr[0];\n    }\n    getScaleY() {\n        return this._tr[5];\n    }\n    getTranslateX() {\n        return this._tr[12];\n    }\n    getTranslateY() {\n        return this._tr[13];\n    }\n    transformX(src) {\n        return this._tr[0] * src + this._tr[12];\n    }\n    transformY(src) {\n        return this._tr[5] * src + this._tr[13];\n    }\n    invertTransformX(src) {\n        return (src - this._tr[12]) / this._tr[0];\n    }\n    invertTransformY(src) {\n        return (src - this._tr[13]) / this._tr[5];\n    }\n    translateRelative(x, y) {\n        const tr1 = new Float32Array([\n            1.0,\n            0.0,\n            0.0,\n            0.0,\n            0.0,\n            1.0,\n            0.0,\n            0.0,\n            0.0,\n            0.0,\n            1.0,\n            0.0,\n            x,\n            y,\n            0.0,\n            1.0\n        ]);\n        CubismMatrix44.multiply(tr1, this._tr, this._tr);\n    }\n    translate(x, y) {\n        this._tr[12] = x;\n        this._tr[13] = y;\n    }\n    translateX(x) {\n        this._tr[12] = x;\n    }\n    translateY(y) {\n        this._tr[13] = y;\n    }\n    scaleRelative(x, y) {\n        const tr1 = new Float32Array([\n            x,\n            0.0,\n            0.0,\n            0.0,\n            0.0,\n            y,\n            0.0,\n            0.0,\n            0.0,\n            0.0,\n            1.0,\n            0.0,\n            0.0,\n            0.0,\n            0.0,\n            1.0\n        ]);\n        CubismMatrix44.multiply(tr1, this._tr, this._tr);\n    }\n    scale(x, y) {\n        this._tr[0] = x;\n        this._tr[5] = y;\n    }\n    multiplyByMatrix(m) {\n        CubismMatrix44.multiply(m.getArray(), this._tr, this._tr);\n    }\n    clone() {\n        const cloneMatrix = new CubismMatrix44();\n        for (let i = 0; i < this._tr.length; i++) {\n            cloneMatrix._tr[i] = this._tr[i];\n        }\n        return cloneMatrix;\n    }\n}\nimport * as $ from './cubismmatrix44';\nexport var Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismMatrix44 = $.CubismMatrix44;\n})(Live2DCubismFramework || (Live2DCubismFramework = {}));\n","export class csmRect {\n    constructor(x, y, w, h) {\n        this.x = x;\n        this.y = y;\n        this.width = w;\n        this.height = h;\n    }\n    getCenterX() {\n        return this.x + 0.5 * this.width;\n    }\n    getCenterY() {\n        return this.y + 0.5 * this.height;\n    }\n    getRight() {\n        return this.x + this.width;\n    }\n    getBottom() {\n        return this.y + this.height;\n    }\n    setRect(r) {\n        this.x = r.x;\n        this.y = r.y;\n        this.width = r.width;\n        this.height = r.height;\n    }\n    expand(w, h) {\n        this.x -= w;\n        this.y -= h;\n        this.width += w * 2.0;\n        this.height += h * 2.0;\n    }\n}\nimport * as $ from './csmrectf';\nexport var Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.csmRect = $.csmRect;\n})(Live2DCubismFramework || (Live2DCubismFramework = {}));\n","import { CubismMatrix44 } from '../math/cubismmatrix44';\nimport { csmRect } from '../type/csmrectf';\nexport class CubismRenderer {\n    static create() {\n        return null;\n    }\n    static delete(renderer) {\n        renderer = null;\n    }\n    initialize(model) {\n        this._model = model;\n    }\n    drawModel() {\n        if (this.getModel() == null)\n            return;\n        this.saveProfile();\n        this.doDrawModel();\n        this.restoreProfile();\n    }\n    setMvpMatrix(matrix44) {\n        this._mvpMatrix4x4.setMatrix(matrix44.getArray());\n    }\n    getMvpMatrix() {\n        return this._mvpMatrix4x4;\n    }\n    setModelColor(red, green, blue, alpha) {\n        if (red < 0.0) {\n            red = 0.0;\n        }\n        else if (red > 1.0) {\n            red = 1.0;\n        }\n        if (green < 0.0) {\n            green = 0.0;\n        }\n        else if (green > 1.0) {\n            green = 1.0;\n        }\n        if (blue < 0.0) {\n            blue = 0.0;\n        }\n        else if (blue > 1.0) {\n            blue = 1.0;\n        }\n        if (alpha < 0.0) {\n            alpha = 0.0;\n        }\n        else if (alpha > 1.0) {\n            alpha = 1.0;\n        }\n        this._modelColor.r = red;\n        this._modelColor.g = green;\n        this._modelColor.b = blue;\n        this._modelColor.a = alpha;\n    }\n    getModelColor() {\n        return JSON.parse(JSON.stringify(this._modelColor));\n    }\n    getModelColorWithOpacity(opacity) {\n        const modelColorRGBA = this.getModelColor();\n        modelColorRGBA.a *= opacity;\n        if (this.isPremultipliedAlpha()) {\n            modelColorRGBA.r *= modelColorRGBA.a;\n            modelColorRGBA.g *= modelColorRGBA.a;\n            modelColorRGBA.b *= modelColorRGBA.a;\n        }\n        return modelColorRGBA;\n    }\n    setIsPremultipliedAlpha(enable) {\n        this._isPremultipliedAlpha = enable;\n    }\n    isPremultipliedAlpha() {\n        return this._isPremultipliedAlpha;\n    }\n    setIsCulling(culling) {\n        this._isCulling = culling;\n    }\n    isCulling() {\n        return this._isCulling;\n    }\n    setAnisotropy(n) {\n        this._anisotropy = n;\n    }\n    getAnisotropy() {\n        return this._anisotropy;\n    }\n    getModel() {\n        return this._model;\n    }\n    useHighPrecisionMask(high) {\n        this._useHighPrecisionMask = high;\n    }\n    isUsingHighPrecisionMask() {\n        return this._useHighPrecisionMask;\n    }\n    constructor() {\n        this._isCulling = false;\n        this._isPremultipliedAlpha = false;\n        this._anisotropy = 0.0;\n        this._model = null;\n        this._modelColor = new CubismTextureColor();\n        this._useHighPrecisionMask = false;\n        this._mvpMatrix4x4 = new CubismMatrix44();\n        this._mvpMatrix4x4.loadIdentity();\n    }\n}\nexport var CubismBlendMode;\n(function (CubismBlendMode) {\n    CubismBlendMode[CubismBlendMode[\"CubismBlendMode_Normal\"] = 0] = \"CubismBlendMode_Normal\";\n    CubismBlendMode[CubismBlendMode[\"CubismBlendMode_Additive\"] = 1] = \"CubismBlendMode_Additive\";\n    CubismBlendMode[CubismBlendMode[\"CubismBlendMode_Multiplicative\"] = 2] = \"CubismBlendMode_Multiplicative\";\n})(CubismBlendMode || (CubismBlendMode = {}));\nexport class CubismTextureColor {\n    constructor(r = 1.0, g = 1.0, b = 1.0, a = 1.0) {\n        this.r = r;\n        this.g = g;\n        this.b = b;\n        this.a = a;\n    }\n}\nexport class CubismClippingContext {\n    constructor(clippingDrawableIndices, clipCount) {\n        this._clippingIdList = clippingDrawableIndices;\n        this._clippingIdCount = clipCount;\n        this._allClippedDrawRect = new csmRect();\n        this._layoutBounds = new csmRect();\n        this._clippedDrawableIndexList = [];\n        this._matrixForMask = new CubismMatrix44();\n        this._matrixForDraw = new CubismMatrix44();\n        this._bufferIndex = 0;\n    }\n    release() {\n        if (this._layoutBounds != null) {\n            this._layoutBounds = null;\n        }\n        if (this._allClippedDrawRect != null) {\n            this._allClippedDrawRect = null;\n        }\n        if (this._clippedDrawableIndexList != null) {\n            this._clippedDrawableIndexList = null;\n        }\n    }\n    addClippedDrawable(drawableIndex) {\n        this._clippedDrawableIndexList.push(drawableIndex);\n    }\n}\nimport * as $ from './cubismrenderer';\nexport var Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismBlendMode = $.CubismBlendMode;\n    Live2DCubismFramework.CubismRenderer = $.CubismRenderer;\n    Live2DCubismFramework.CubismTextureColor = $.CubismTextureColor;\n})(Live2DCubismFramework || (Live2DCubismFramework = {}));\n","import { CSM_LOG_LEVEL, CSM_LOG_LEVEL_DEBUG, CSM_LOG_LEVEL_ERROR, CSM_LOG_LEVEL_INFO, CSM_LOG_LEVEL_VERBOSE, CSM_LOG_LEVEL_WARNING } from '../cubismframeworkconfig';\nimport { CubismFramework, LogLevel } from '../live2dcubismframework';\nexport const CubismLogPrint = (level, fmt, args) => {\n    CubismDebug.print(level, '[CSM]' + fmt, args);\n};\nexport const CubismLogPrintIn = (level, fmt, args) => {\n    CubismLogPrint(level, fmt + '\\n', args);\n};\nexport const CSM_ASSERT = (expr) => {\n    console.assert(expr);\n};\nexport let CubismLogVerbose;\nexport let CubismLogDebug;\nexport let CubismLogInfo;\nexport let CubismLogWarning;\nexport let CubismLogError;\nif (CSM_LOG_LEVEL <= CSM_LOG_LEVEL_VERBOSE) {\n    CubismLogVerbose = (fmt, ...args) => {\n        CubismLogPrintIn(LogLevel.LogLevel_Verbose, '[V]' + fmt, args);\n    };\n    CubismLogDebug = (fmt, ...args) => {\n        CubismLogPrintIn(LogLevel.LogLevel_Debug, '[D]' + fmt, args);\n    };\n    CubismLogInfo = (fmt, ...args) => {\n        CubismLogPrintIn(LogLevel.LogLevel_Info, '[I]' + fmt, args);\n    };\n    CubismLogWarning = (fmt, ...args) => {\n        CubismLogPrintIn(LogLevel.LogLevel_Warning, '[W]' + fmt, args);\n    };\n    CubismLogError = (fmt, ...args) => {\n        CubismLogPrintIn(LogLevel.LogLevel_Error, '[E]' + fmt, args);\n    };\n}\nelse if (CSM_LOG_LEVEL == CSM_LOG_LEVEL_DEBUG) {\n    CubismLogDebug = (fmt, ...args) => {\n        CubismLogPrintIn(LogLevel.LogLevel_Debug, '[D]' + fmt, args);\n    };\n    CubismLogInfo = (fmt, ...args) => {\n        CubismLogPrintIn(LogLevel.LogLevel_Info, '[I]' + fmt, args);\n    };\n    CubismLogWarning = (fmt, ...args) => {\n        CubismLogPrintIn(LogLevel.LogLevel_Warning, '[W]' + fmt, args);\n    };\n    CubismLogError = (fmt, ...args) => {\n        CubismLogPrintIn(LogLevel.LogLevel_Error, '[E]' + fmt, args);\n    };\n}\nelse if (CSM_LOG_LEVEL == CSM_LOG_LEVEL_INFO) {\n    CubismLogInfo = (fmt, ...args) => {\n        CubismLogPrintIn(LogLevel.LogLevel_Info, '[I]' + fmt, args);\n    };\n    CubismLogWarning = (fmt, ...args) => {\n        CubismLogPrintIn(LogLevel.LogLevel_Warning, '[W]' + fmt, args);\n    };\n    CubismLogError = (fmt, ...args) => {\n        CubismLogPrintIn(LogLevel.LogLevel_Error, '[E]' + fmt, args);\n    };\n}\nelse if (CSM_LOG_LEVEL == CSM_LOG_LEVEL_WARNING) {\n    CubismLogWarning = (fmt, ...args) => {\n        CubismLogPrintIn(LogLevel.LogLevel_Warning, '[W]' + fmt, args);\n    };\n    CubismLogError = (fmt, ...args) => {\n        CubismLogPrintIn(LogLevel.LogLevel_Error, '[E]' + fmt, args);\n    };\n}\nelse if (CSM_LOG_LEVEL == CSM_LOG_LEVEL_ERROR) {\n    CubismLogError = (fmt, ...args) => {\n        CubismLogPrintIn(LogLevel.LogLevel_Error, '[E]' + fmt, args);\n    };\n}\nexport class CubismDebug {\n    static print(logLevel, format, args) {\n        if (logLevel < CubismFramework.getLoggingLevel()) {\n            return;\n        }\n        const logPrint = CubismFramework.coreLogFunction;\n        if (!logPrint)\n            return;\n        const buffer = format.replace(/\\{(\\d+)\\}/g, (m, k) => {\n            return args[k];\n        });\n        logPrint(buffer);\n    }\n    static dumpBytes(logLevel, data, length) {\n        for (let i = 0; i < length; i++) {\n            if (i % 16 == 0 && i > 0)\n                this.print(logLevel, '\\n');\n            else if (i % 8 == 0 && i > 0)\n                this.print(logLevel, '  ');\n            this.print(logLevel, '{0} ', [data[i] & 0xff]);\n        }\n        this.print(logLevel, '\\n');\n    }\n    constructor() { }\n}\nimport * as $ from './cubismdebug';\nexport var Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismDebug = $.CubismDebug;\n})(Live2DCubismFramework || (Live2DCubismFramework = {}));\n","import { CubismLogDebug, CubismLogWarning } from '../utils/cubismdebug';\nexport class csmPair {\n    constructor(key, value) {\n        this.first = key == undefined ? null : key;\n        this.second = value == undefined ? null : value;\n    }\n}\nexport class csmMap {\n    constructor(size) {\n        if (size != undefined) {\n            if (size < 1) {\n                this._keyValues = [];\n                this._dummyValue = null;\n                this._size = 0;\n            }\n            else {\n                this._keyValues = new Array(size);\n                this._size = size;\n            }\n        }\n        else {\n            this._keyValues = [];\n            this._dummyValue = null;\n            this._size = 0;\n        }\n    }\n    release() {\n        this.clear();\n    }\n    appendKey(key) {\n        let findIndex = -1;\n        for (let i = 0; i < this._size; i++) {\n            if (this._keyValues[i].first == key) {\n                findIndex = i;\n                break;\n            }\n        }\n        if (findIndex != -1) {\n            CubismLogWarning('The key `{0}` is already append.', key);\n            return;\n        }\n        this.prepareCapacity(this._size + 1, false);\n        this._keyValues[this._size] = new csmPair(key);\n        this._size += 1;\n    }\n    getValue(key) {\n        let found = -1;\n        for (let i = 0; i < this._size; i++) {\n            if (this._keyValues[i].first == key) {\n                found = i;\n                break;\n            }\n        }\n        if (found >= 0) {\n            return this._keyValues[found].second;\n        }\n        else {\n            this.appendKey(key);\n            return this._keyValues[this._size - 1].second;\n        }\n    }\n    setValue(key, value) {\n        let found = -1;\n        for (let i = 0; i < this._size; i++) {\n            if (this._keyValues[i].first == key) {\n                found = i;\n                break;\n            }\n        }\n        if (found >= 0) {\n            this._keyValues[found].second = value;\n        }\n        else {\n            this.appendKey(key);\n            this._keyValues[this._size - 1].second = value;\n        }\n    }\n    isExist(key) {\n        for (let i = 0; i < this._size; i++) {\n            if (this._keyValues[i].first == key) {\n                return true;\n            }\n        }\n        return false;\n    }\n    clear() {\n        this._keyValues = void 0;\n        this._keyValues = null;\n        this._keyValues = [];\n        this._size = 0;\n    }\n    getSize() {\n        return this._size;\n    }\n    prepareCapacity(newSize, fitToSize) {\n        if (newSize > this._keyValues.length) {\n            if (this._keyValues.length == 0) {\n                if (!fitToSize && newSize < csmMap.DefaultSize)\n                    newSize = csmMap.DefaultSize;\n                this._keyValues.length = newSize;\n            }\n            else {\n                if (!fitToSize && newSize < this._keyValues.length * 2)\n                    newSize = this._keyValues.length * 2;\n                this._keyValues.length = newSize;\n            }\n        }\n    }\n    begin() {\n        const ite = new iterator(this, 0);\n        return ite;\n    }\n    end() {\n        const ite = new iterator(this, this._size);\n        return ite;\n    }\n    erase(ite) {\n        const index = ite._index;\n        if (index < 0 || this._size <= index) {\n            return ite;\n        }\n        this._keyValues.splice(index, 1);\n        --this._size;\n        const ite2 = new iterator(this, index);\n        return ite2;\n    }\n    dumpAsInt() {\n        for (let i = 0; i < this._size; i++) {\n            CubismLogDebug('{0} ,', this._keyValues[i]);\n            CubismLogDebug('\\n');\n        }\n    }\n}\ncsmMap.DefaultSize = 10;\nexport class iterator {\n    constructor(v, idx) {\n        this._map = v != undefined ? v : new csmMap();\n        this._index = idx != undefined ? idx : 0;\n    }\n    set(ite) {\n        this._index = ite._index;\n        this._map = ite._map;\n        return this;\n    }\n    preIncrement() {\n        ++this._index;\n        return this;\n    }\n    preDecrement() {\n        --this._index;\n        return this;\n    }\n    increment() {\n        const iteold = new iterator(this._map, this._index++);\n        return iteold;\n    }\n    decrement() {\n        const iteold = new iterator(this._map, this._index);\n        this._map = iteold._map;\n        this._index = iteold._index;\n        return this;\n    }\n    ptr() {\n        return this._map._keyValues[this._index];\n    }\n    notEqual(ite) {\n        return this._index != ite._index || this._map != ite._map;\n    }\n}\nimport * as $ from './csmmap';\nexport var Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.csmMap = $.csmMap;\n    Live2DCubismFramework.csmPair = $.csmPair;\n    Live2DCubismFramework.iterator = $.iterator;\n})(Live2DCubismFramework || (Live2DCubismFramework = {}));\n","import { JsonArray, JsonBoolean, JsonFloat, JsonMap, JsonNullvalue, JsonString } from './cubismjson';\nexport class CubismJsonExtension {\n    static parseJsonObject(obj, map) {\n        Object.keys(obj).forEach(key => {\n            if (typeof obj[key] == 'boolean') {\n                const convValue = Boolean(obj[key]);\n                map.put(key, new JsonBoolean(convValue));\n            }\n            else if (typeof obj[key] == 'string') {\n                const convValue = String(obj[key]);\n                map.put(key, new JsonString(convValue));\n            }\n            else if (typeof obj[key] == 'number') {\n                const convValue = Number(obj[key]);\n                map.put(key, new JsonFloat(convValue));\n            }\n            else if (obj[key] instanceof Array) {\n                map.put(key, CubismJsonExtension.parseJsonArray(obj[key]));\n            }\n            else if (obj[key] instanceof Object) {\n                map.put(key, CubismJsonExtension.parseJsonObject(obj[key], new JsonMap()));\n            }\n            else if (obj[key] == null) {\n                map.put(key, new JsonNullvalue());\n            }\n            else {\n                map.put(key, obj[key]);\n            }\n        });\n        return map;\n    }\n    static parseJsonArray(obj) {\n        const arr = new JsonArray();\n        Object.keys(obj).forEach(key => {\n            const convKey = Number(key);\n            if (typeof convKey == 'number') {\n                if (typeof obj[key] == 'boolean') {\n                    const convValue = Boolean(obj[key]);\n                    arr.add(new JsonBoolean(convValue));\n                }\n                else if (typeof obj[key] == 'string') {\n                    const convValue = String(obj[key]);\n                    arr.add(new JsonString(convValue));\n                }\n                else if (typeof obj[key] == 'number') {\n                    const convValue = Number(obj[key]);\n                    arr.add(new JsonFloat(convValue));\n                }\n                else if (obj[key] instanceof Array) {\n                    arr.add(this.parseJsonArray(obj[key]));\n                }\n                else if (obj[key] instanceof Object) {\n                    arr.add(this.parseJsonObject(obj[key], new JsonMap()));\n                }\n                else if (obj[key] == null) {\n                    arr.add(new JsonNullvalue());\n                }\n                else {\n                    arr.add(obj[key]);\n                }\n            }\n            else if (obj[key] instanceof Array) {\n                arr.add(this.parseJsonArray(obj[key]));\n            }\n            else if (obj[key] instanceof Object) {\n                arr.add(this.parseJsonObject(obj[key], new JsonMap()));\n            }\n            else if (obj[key] == null) {\n                arr.add(new JsonNullvalue());\n            }\n            else {\n                const convValue = Array(obj[key]);\n                for (let i = 0; i < convValue.length; i++) {\n                    arr.add(convValue[i]);\n                }\n            }\n        });\n        return arr;\n    }\n}\n","import { strtod } from '../live2dcubismframework';\nimport { csmMap } from '../type/csmmap';\nimport { csmString } from '../type/csmstring';\nimport { csmVector } from '../type/csmvector';\nimport { CubismLogInfo } from './cubismdebug';\nconst CSM_JSON_ERROR_TYPE_MISMATCH = 'Error: type mismatch';\nconst CSM_JSON_ERROR_INDEX_OF_BOUNDS = 'Error: index out of bounds';\nexport class Value {\n    constructor() { }\n    getRawString(defaultValue, indent) {\n        return this.getString(defaultValue, indent);\n    }\n    toInt(defaultValue = 0) {\n        return defaultValue;\n    }\n    toFloat(defaultValue = 0) {\n        return defaultValue;\n    }\n    toBoolean(defaultValue = false) {\n        return defaultValue;\n    }\n    getSize() {\n        return 0;\n    }\n    getArray(defaultValue = null) {\n        return defaultValue;\n    }\n    getVector(defaultValue = new csmVector()) {\n        return defaultValue;\n    }\n    getMap(defaultValue) {\n        return defaultValue;\n    }\n    getValueByIndex(index) {\n        return Value.errorValue.setErrorNotForClientCall(CSM_JSON_ERROR_TYPE_MISMATCH);\n    }\n    getValueByString(s) {\n        return Value.nullValue.setErrorNotForClientCall(CSM_JSON_ERROR_TYPE_MISMATCH);\n    }\n    getKeys() {\n        return Value.dummyKeys;\n    }\n    isError() {\n        return false;\n    }\n    isNull() {\n        return false;\n    }\n    isBool() {\n        return false;\n    }\n    isFloat() {\n        return false;\n    }\n    isString() {\n        return false;\n    }\n    isArray() {\n        return false;\n    }\n    isMap() {\n        return false;\n    }\n    equals(value) {\n        return false;\n    }\n    isStatic() {\n        return false;\n    }\n    setErrorNotForClientCall(errorStr) {\n        return JsonError.errorValue;\n    }\n    static staticInitializeNotForClientCall() {\n        JsonBoolean.trueValue = new JsonBoolean(true);\n        JsonBoolean.falseValue = new JsonBoolean(false);\n        Value.errorValue = new JsonError('ERROR', true);\n        Value.nullValue = new JsonNullvalue();\n        Value.dummyKeys = new csmVector();\n    }\n    static staticReleaseNotForClientCall() {\n        JsonBoolean.trueValue = null;\n        JsonBoolean.falseValue = null;\n        Value.errorValue = null;\n        Value.nullValue = null;\n        Value.dummyKeys = null;\n    }\n}\nexport class CubismJson {\n    constructor(buffer, length) {\n        this._parseCallback = CubismJsonExtension.parseJsonObject;\n        this._error = null;\n        this._lineCount = 0;\n        this._root = null;\n        if (buffer != undefined) {\n            this.parseBytes(buffer, length, this._parseCallback);\n        }\n    }\n    static create(buffer, size) {\n        const json = new CubismJson();\n        const succeeded = json.parseBytes(buffer, size, json._parseCallback);\n        if (!succeeded) {\n            CubismJson.delete(json);\n            return null;\n        }\n        else {\n            return json;\n        }\n    }\n    static delete(instance) {\n        instance = null;\n    }\n    getRoot() {\n        return this._root;\n    }\n    static arrayBufferToString(buffer) {\n        const uint8Array = new Uint8Array(buffer);\n        let str = '';\n        for (let i = 0, len = uint8Array.length; i < len; ++i) {\n            str += '%' + this.pad(uint8Array[i].toString(16));\n        }\n        str = decodeURIComponent(str);\n        return str;\n    }\n    static pad(n) {\n        return n.length < 2 ? '0' + n : n;\n    }\n    parseBytes(buffer, size, parseCallback) {\n        const endPos = new Array(1);\n        const decodeBuffer = CubismJson.arrayBufferToString(buffer);\n        if (parseCallback == undefined) {\n            this._root = this.parseValue(decodeBuffer, size, 0, endPos);\n        }\n        else {\n            this._root = parseCallback(JSON.parse(decodeBuffer), new JsonMap());\n        }\n        if (this._error) {\n            let strbuf = '\\0';\n            strbuf = 'Json parse error : @line ' + (this._lineCount + 1) + '\\n';\n            this._root = new JsonString(strbuf);\n            CubismLogInfo('{0}', this._root.getRawString());\n            return false;\n        }\n        else if (this._root == null) {\n            this._root = new JsonError(new csmString(this._error), false);\n            return false;\n        }\n        return true;\n    }\n    getParseError() {\n        return this._error;\n    }\n    checkEndOfFile() {\n        return this._root.getArray()[1].equals('EOF');\n    }\n    parseValue(buffer, length, begin, outEndPos) {\n        if (this._error)\n            return null;\n        let o = null;\n        let i = begin;\n        let f;\n        for (; i < length; i++) {\n            const c = buffer[i];\n            switch (c) {\n                case '-':\n                case '.':\n                case '0':\n                case '1':\n                case '2':\n                case '3':\n                case '4':\n                case '5':\n                case '6':\n                case '7':\n                case '8':\n                case '9': {\n                    const afterString = new Array(1);\n                    f = strtod(buffer.slice(i), afterString);\n                    outEndPos[0] = buffer.indexOf(afterString[0]);\n                    return new JsonFloat(f);\n                }\n                case '\"':\n                    return new JsonString(this.parseString(buffer, length, i + 1, outEndPos));\n                case '[':\n                    o = this.parseArray(buffer, length, i + 1, outEndPos);\n                    return o;\n                case '{':\n                    o = this.parseObject(buffer, length, i + 1, outEndPos);\n                    return o;\n                case 'n':\n                    if (i + 3 < length) {\n                        o = new JsonNullvalue();\n                        outEndPos[0] = i + 4;\n                    }\n                    else {\n                        this._error = 'parse null';\n                    }\n                    return o;\n                case 't':\n                    if (i + 3 < length) {\n                        o = JsonBoolean.trueValue;\n                        outEndPos[0] = i + 4;\n                    }\n                    else {\n                        this._error = 'parse true';\n                    }\n                    return o;\n                case 'f':\n                    if (i + 4 < length) {\n                        o = JsonBoolean.falseValue;\n                        outEndPos[0] = i + 5;\n                    }\n                    else {\n                        this._error = \"illegal ',' position\";\n                    }\n                    return o;\n                case ',':\n                    this._error = \"illegal ',' position\";\n                    return null;\n                case ']':\n                    outEndPos[0] = i;\n                    return null;\n                case '\\n':\n                    this._lineCount++;\n                case ' ':\n                case '\\t':\n                case '\\r':\n                default:\n                    break;\n            }\n        }\n        this._error = 'illegal end of value';\n        return null;\n    }\n    parseString(string, length, begin, outEndPos) {\n        if (this._error) {\n            return null;\n        }\n        if (!string) {\n            this._error = 'string is null';\n            return null;\n        }\n        let i = begin;\n        let c, c2;\n        const ret = new csmString('');\n        let bufStart = begin;\n        for (; i < length; i++) {\n            c = string[i];\n            switch (c) {\n                case '\"': {\n                    outEndPos[0] = i + 1;\n                    ret.append(string.slice(bufStart), i - bufStart);\n                    return ret.s;\n                }\n                case '//': {\n                    i++;\n                    if (i - 1 > bufStart) {\n                        ret.append(string.slice(bufStart), i - bufStart);\n                    }\n                    bufStart = i + 1;\n                    if (i < length) {\n                        c2 = string[i];\n                        switch (c2) {\n                            case '\\\\':\n                                ret.expansion(1, '\\\\');\n                                break;\n                            case '\"':\n                                ret.expansion(1, '\"');\n                                break;\n                            case '/':\n                                ret.expansion(1, '/');\n                                break;\n                            case 'b':\n                                ret.expansion(1, '\\b');\n                                break;\n                            case 'f':\n                                ret.expansion(1, '\\f');\n                                break;\n                            case 'n':\n                                ret.expansion(1, '\\n');\n                                break;\n                            case 'r':\n                                ret.expansion(1, '\\r');\n                                break;\n                            case 't':\n                                ret.expansion(1, '\\t');\n                                break;\n                            case 'u':\n                                this._error = 'parse string/unicord escape not supported';\n                                break;\n                            default:\n                                break;\n                        }\n                    }\n                    else {\n                        this._error = 'parse string/escape error';\n                    }\n                }\n                default: {\n                    break;\n                }\n            }\n        }\n        this._error = 'parse string/illegal end';\n        return null;\n    }\n    parseObject(buffer, length, begin, outEndPos) {\n        if (this._error) {\n            return null;\n        }\n        if (!buffer) {\n            this._error = 'buffer is null';\n            return null;\n        }\n        const ret = new JsonMap();\n        let key = '';\n        let i = begin;\n        let c = '';\n        const localRetEndPos2 = Array(1);\n        let ok = false;\n        for (; i < length; i++) {\n            FOR_LOOP: for (; i < length; i++) {\n                c = buffer[i];\n                switch (c) {\n                    case '\"':\n                        key = this.parseString(buffer, length, i + 1, localRetEndPos2);\n                        if (this._error) {\n                            return null;\n                        }\n                        i = localRetEndPos2[0];\n                        ok = true;\n                        break FOR_LOOP;\n                    case '}':\n                        outEndPos[0] = i + 1;\n                        return ret;\n                    case ':':\n                        this._error = \"illegal ':' position\";\n                        break;\n                    case '\\n':\n                        this._lineCount++;\n                    default:\n                        break;\n                }\n            }\n            if (!ok) {\n                this._error = 'key not found';\n                return null;\n            }\n            ok = false;\n            FOR_LOOP2: for (; i < length; i++) {\n                c = buffer[i];\n                switch (c) {\n                    case ':':\n                        ok = true;\n                        i++;\n                        break FOR_LOOP2;\n                    case '}':\n                        this._error = \"illegal '}' position\";\n                        break;\n                    case '\\n':\n                        this._lineCount++;\n                    default:\n                        break;\n                }\n            }\n            if (!ok) {\n                this._error = \"':' not found\";\n                return null;\n            }\n            const value = this.parseValue(buffer, length, i, localRetEndPos2);\n            if (this._error) {\n                return null;\n            }\n            i = localRetEndPos2[0];\n            ret.put(key, value);\n            FOR_LOOP3: for (; i < length; i++) {\n                c = buffer[i];\n                switch (c) {\n                    case ',':\n                        break FOR_LOOP3;\n                    case '}':\n                        outEndPos[0] = i + 1;\n                        return ret;\n                    case '\\n':\n                        this._lineCount++;\n                    default:\n                        break;\n                }\n            }\n        }\n        this._error = 'illegal end of perseObject';\n        return null;\n    }\n    parseArray(buffer, length, begin, outEndPos) {\n        if (this._error) {\n            return null;\n        }\n        if (!buffer) {\n            this._error = 'buffer is null';\n            return null;\n        }\n        let ret = new JsonArray();\n        let i = begin;\n        let c;\n        const localRetEndpos2 = new Array(1);\n        for (; i < length; i++) {\n            const value = this.parseValue(buffer, length, i, localRetEndpos2);\n            if (this._error) {\n                return null;\n            }\n            i = localRetEndpos2[0];\n            if (value) {\n                ret.add(value);\n            }\n            FOR_LOOP: for (; i < length; i++) {\n                c = buffer[i];\n                switch (c) {\n                    case ',':\n                        break FOR_LOOP;\n                    case ']':\n                        outEndPos[0] = i + 1;\n                        return ret;\n                    case '\\n':\n                        ++this._lineCount;\n                    default:\n                        break;\n                }\n            }\n        }\n        ret = void 0;\n        this._error = 'illegal end of parseObject';\n        return null;\n    }\n}\nexport class JsonFloat extends Value {\n    constructor(v) {\n        super();\n        this._value = v;\n    }\n    isFloat() {\n        return true;\n    }\n    getString(defaultValue, indent) {\n        const strbuf = '\\0';\n        this._value = parseFloat(strbuf);\n        this._stringBuffer = strbuf;\n        return this._stringBuffer;\n    }\n    toInt(defaultValue = 0) {\n        return parseInt(this._value.toString());\n    }\n    toFloat(defaultValue = 0.0) {\n        return this._value;\n    }\n    equals(value) {\n        if ('number' === typeof value) {\n            if (Math.round(value)) {\n                return false;\n            }\n            else {\n                return value == this._value;\n            }\n        }\n        return false;\n    }\n}\nexport class JsonBoolean extends Value {\n    isBool() {\n        return true;\n    }\n    toBoolean(defaultValue = false) {\n        return this._boolValue;\n    }\n    getString(defaultValue, indent) {\n        this._stringBuffer = this._boolValue ? 'true' : 'false';\n        return this._stringBuffer;\n    }\n    equals(value) {\n        if ('boolean' === typeof value) {\n            return value == this._boolValue;\n        }\n        return false;\n    }\n    isStatic() {\n        return true;\n    }\n    constructor(v) {\n        super();\n        this._boolValue = v;\n    }\n}\nexport class JsonString extends Value {\n    constructor(s) {\n        super();\n        if ('string' === typeof s) {\n            this._stringBuffer = s;\n        }\n        if (s instanceof csmString) {\n            this._stringBuffer = s.s;\n        }\n    }\n    isString() {\n        return true;\n    }\n    getString(defaultValue, indent) {\n        return this._stringBuffer;\n    }\n    equals(value) {\n        if ('string' === typeof value) {\n            return this._stringBuffer == value;\n        }\n        if (value instanceof csmString) {\n            return this._stringBuffer == value.s;\n        }\n        return false;\n    }\n}\nexport class JsonError extends JsonString {\n    isStatic() {\n        return this._isStatic;\n    }\n    setErrorNotForClientCall(s) {\n        this._stringBuffer = s;\n        return this;\n    }\n    constructor(s, isStatic) {\n        if ('string' === typeof s) {\n            super(s);\n        }\n        else {\n            super(s);\n        }\n        this._isStatic = isStatic;\n    }\n    isError() {\n        return true;\n    }\n}\nexport class JsonNullvalue extends Value {\n    isNull() {\n        return true;\n    }\n    getString(defaultValue, indent) {\n        return this._stringBuffer;\n    }\n    isStatic() {\n        return true;\n    }\n    setErrorNotForClientCall(s) {\n        this._stringBuffer = s;\n        return JsonError.nullValue;\n    }\n    constructor() {\n        super();\n        this._stringBuffer = 'NullValue';\n    }\n}\nexport class JsonArray extends Value {\n    constructor() {\n        super();\n        this._array = new csmVector();\n    }\n    release() {\n        for (let ite = this._array.begin(); ite.notEqual(this._array.end()); ite.preIncrement()) {\n            let v = ite.ptr();\n            if (v && !v.isStatic()) {\n                v = void 0;\n                v = null;\n            }\n        }\n    }\n    isArray() {\n        return true;\n    }\n    getValueByIndex(index) {\n        if (index < 0 || this._array.getSize() <= index) {\n            return Value.errorValue.setErrorNotForClientCall(CSM_JSON_ERROR_INDEX_OF_BOUNDS);\n        }\n        const v = this._array.at(index);\n        if (v == null) {\n            return Value.nullValue;\n        }\n        return v;\n    }\n    getValueByString(s) {\n        return Value.errorValue.setErrorNotForClientCall(CSM_JSON_ERROR_TYPE_MISMATCH);\n    }\n    getString(defaultValue, indent) {\n        const stringBuffer = indent + '[\\n';\n        for (let ite = this._array.begin(); ite.notEqual(this._array.end()); ite.increment()) {\n            const v = ite.ptr();\n            this._stringBuffer += indent + '' + v.getString(indent + ' ') + '\\n';\n        }\n        this._stringBuffer = stringBuffer + indent + ']\\n';\n        return this._stringBuffer;\n    }\n    add(v) {\n        this._array.pushBack(v);\n    }\n    getVector(defaultValue = null) {\n        return this._array;\n    }\n    getSize() {\n        return this._array.getSize();\n    }\n}\nexport class JsonMap extends Value {\n    constructor() {\n        super();\n        this._map = new csmMap();\n    }\n    release() {\n        const ite = this._map.begin();\n        while (ite.notEqual(this._map.end())) {\n            let v = ite.ptr().second;\n            if (v && !v.isStatic()) {\n                v = void 0;\n                v = null;\n            }\n            ite.preIncrement();\n        }\n    }\n    isMap() {\n        return true;\n    }\n    getValueByString(s) {\n        if (s instanceof csmString) {\n            const ret = this._map.getValue(s.s);\n            if (ret == null) {\n                return Value.nullValue;\n            }\n            return ret;\n        }\n        for (let iter = this._map.begin(); iter.notEqual(this._map.end()); iter.preIncrement()) {\n            if (iter.ptr().first == s) {\n                if (iter.ptr().second == null) {\n                    return Value.nullValue;\n                }\n                return iter.ptr().second;\n            }\n        }\n        return Value.nullValue;\n    }\n    getValueByIndex(index) {\n        return Value.errorValue.setErrorNotForClientCall(CSM_JSON_ERROR_TYPE_MISMATCH);\n    }\n    getString(defaultValue, indent) {\n        this._stringBuffer = indent + '{\\n';\n        const ite = this._map.begin();\n        while (ite.notEqual(this._map.end())) {\n            const key = ite.ptr().first;\n            const v = ite.ptr().second;\n            this._stringBuffer +=\n                indent + ' ' + key + ' : ' + v.getString(indent + '   ') + ' \\n';\n            ite.preIncrement();\n        }\n        this._stringBuffer += indent + '}\\n';\n        return this._stringBuffer;\n    }\n    getMap(defaultValue) {\n        return this._map;\n    }\n    put(key, v) {\n        this._map.setValue(key, v);\n    }\n    getKeys() {\n        if (!this._keys) {\n            this._keys = new csmVector();\n            const ite = this._map.begin();\n            while (ite.notEqual(this._map.end())) {\n                const key = ite.ptr().first;\n                this._keys.pushBack(key);\n                ite.preIncrement();\n            }\n        }\n        return this._keys;\n    }\n    getSize() {\n        return this._keys.getSize();\n    }\n}\nimport * as $ from './cubismjson';\nimport { CubismJsonExtension } from './cubismjsonextension';\nexport var Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismJson = $.CubismJson;\n    Live2DCubismFramework.JsonArray = $.JsonArray;\n    Live2DCubismFramework.JsonBoolean = $.JsonBoolean;\n    Live2DCubismFramework.JsonError = $.JsonError;\n    Live2DCubismFramework.JsonFloat = $.JsonFloat;\n    Live2DCubismFramework.JsonMap = $.JsonMap;\n    Live2DCubismFramework.JsonNullvalue = $.JsonNullvalue;\n    Live2DCubismFramework.JsonString = $.JsonString;\n    Live2DCubismFramework.Value = $.Value;\n})(Live2DCubismFramework || (Live2DCubismFramework = {}));\n","import { CubismIdManager } from './id/cubismidmanager';\nimport { CubismRenderer } from './rendering/cubismrenderer';\nimport { CSM_ASSERT, CubismLogInfo, CubismLogWarning } from './utils/cubismdebug';\nimport { Value } from './utils/cubismjson';\nexport function strtod(s, endPtr) {\n    let index = 0;\n    for (let i = 1;; i++) {\n        const testC = s.slice(i - 1, i);\n        if (testC == 'e' || testC == '-' || testC == 'E') {\n            continue;\n        }\n        const test = s.substring(0, i);\n        const number = Number(test);\n        if (isNaN(number)) {\n            break;\n        }\n        index = i;\n    }\n    let d = parseFloat(s);\n    if (isNaN(d)) {\n        d = NaN;\n    }\n    endPtr[0] = s.slice(index);\n    return d;\n}\nlet s_isStarted = false;\nlet s_isInitialized = false;\nlet s_option = null;\nlet s_cubismIdManager = null;\nexport const Constant = Object.freeze({\n    vertexOffset: 0,\n    vertexStep: 2\n});\nexport function csmDelete(address) {\n    if (!address) {\n        return;\n    }\n    address = void 0;\n}\nexport class CubismFramework {\n    static startUp(option = null) {\n        if (s_isStarted) {\n            CubismLogInfo('CubismFramework.startUp() is already done.');\n            return s_isStarted;\n        }\n        s_option = option;\n        if (s_option != null) {\n            Live2DCubismCore.Logging.csmSetLogFunction(s_option.logFunction);\n        }\n        s_isStarted = true;\n        if (s_isStarted) {\n            const version = Live2DCubismCore.Version.csmGetVersion();\n            const major = (version & 0xff000000) >> 24;\n            const minor = (version & 0x00ff0000) >> 16;\n            const patch = version & 0x0000ffff;\n            const versionNumber = version;\n            CubismLogInfo(`Live2D Cubism Core version: {0}.{1}.{2} ({3})`, ('00' + major).slice(-2), ('00' + minor).slice(-2), ('0000' + patch).slice(-4), versionNumber);\n        }\n        CubismLogInfo('CubismFramework.startUp() is complete.');\n        return s_isStarted;\n    }\n    static cleanUp() {\n        s_isStarted = false;\n        s_isInitialized = false;\n        s_option = null;\n        s_cubismIdManager = null;\n    }\n    static initialize(memorySize = 0) {\n        CSM_ASSERT(s_isStarted);\n        if (!s_isStarted) {\n            CubismLogWarning('CubismFramework is not started.');\n            return;\n        }\n        if (s_isInitialized) {\n            CubismLogWarning('CubismFramework.initialize() skipped, already initialized.');\n            return;\n        }\n        Value.staticInitializeNotForClientCall();\n        s_cubismIdManager = new CubismIdManager();\n        Live2DCubismCore.Memory.initializeAmountOfMemory(memorySize);\n        s_isInitialized = true;\n        CubismLogInfo('CubismFramework.initialize() is complete.');\n    }\n    static dispose() {\n        CSM_ASSERT(s_isStarted);\n        if (!s_isStarted) {\n            CubismLogWarning('CubismFramework is not started.');\n            return;\n        }\n        if (!s_isInitialized) {\n            CubismLogWarning('CubismFramework.dispose() skipped, not initialized.');\n            return;\n        }\n        Value.staticReleaseNotForClientCall();\n        s_cubismIdManager.release();\n        s_cubismIdManager = null;\n        CubismRenderer.staticRelease();\n        s_isInitialized = false;\n        CubismLogInfo('CubismFramework.dispose() is complete.');\n    }\n    static isStarted() {\n        return s_isStarted;\n    }\n    static isInitialized() {\n        return s_isInitialized;\n    }\n    static coreLogFunction(message) {\n        if (!Live2DCubismCore.Logging.csmGetLogFunction()) {\n            return;\n        }\n        Live2DCubismCore.Logging.csmGetLogFunction()(message);\n    }\n    static getLoggingLevel() {\n        if (s_option != null) {\n            return s_option.loggingLevel;\n        }\n        return LogLevel.LogLevel_Off;\n    }\n    static getIdManager() {\n        return s_cubismIdManager;\n    }\n    constructor() { }\n}\nexport class Option {\n}\nexport var LogLevel;\n(function (LogLevel) {\n    LogLevel[LogLevel[\"LogLevel_Verbose\"] = 0] = \"LogLevel_Verbose\";\n    LogLevel[LogLevel[\"LogLevel_Debug\"] = 1] = \"LogLevel_Debug\";\n    LogLevel[LogLevel[\"LogLevel_Info\"] = 2] = \"LogLevel_Info\";\n    LogLevel[LogLevel[\"LogLevel_Warning\"] = 3] = \"LogLevel_Warning\";\n    LogLevel[LogLevel[\"LogLevel_Error\"] = 4] = \"LogLevel_Error\";\n    LogLevel[LogLevel[\"LogLevel_Off\"] = 5] = \"LogLevel_Off\";\n})(LogLevel || (LogLevel = {}));\nimport * as $ from './live2dcubismframework';\nexport var Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.Constant = $.Constant;\n    Live2DCubismFramework.csmDelete = $.csmDelete;\n    Live2DCubismFramework.CubismFramework = $.CubismFramework;\n})(Live2DCubismFramework || (Live2DCubismFramework = {}));\n","import { LogLevel } from '@framework/live2dcubismframework';\nexport const CanvasSize = 'auto';\nexport const CanvasNum = 1;\nexport const ViewScale = 1.0;\nexport const ViewMaxScale = 2.0;\nexport const ViewMinScale = 0.8;\nexport const ViewLogicalLeft = -1.0;\nexport const ViewLogicalRight = 1.0;\nexport const ViewLogicalBottom = -1.0;\nexport const ViewLogicalTop = 1.0;\nexport const ViewLogicalMaxLeft = -2.0;\nexport const ViewLogicalMaxRight = 2.0;\nexport const ViewLogicalMaxBottom = -2.0;\nexport const ViewLogicalMaxTop = 2.0;\nexport const ResourcesPath = '../../Resources/';\nexport const BackImageName = 'back_class_normal.png';\nexport const GearImageName = 'icon_gear.png';\nexport const PowerImageName = 'CloseNormal.png';\nexport const ModelDir = [\n    'Haru',\n    'Hiyori',\n    'Mark',\n    'Natori',\n    'Rice',\n    'Mao',\n    'Wanko'\n];\nexport const ModelDirSize = ModelDir.length;\nexport const MotionGroupIdle = 'Idle';\nexport const MotionGroupTapBody = 'TapBody';\nexport const HitAreaNameHead = 'Head';\nexport const HitAreaNameBody = 'Body';\nexport const PriorityNone = 0;\nexport const PriorityIdle = 1;\nexport const PriorityNormal = 2;\nexport const PriorityForce = 3;\nexport const MOCConsistencyValidationEnable = true;\nexport const MotionConsistencyValidationEnable = true;\nexport const DebugLogEnable = true;\nexport const DebugTouchLogEnable = false;\nexport const CubismLoggingLevel = LogLevel.LogLevel_Verbose;\nexport const RenderTargetWidth = 1900;\nexport const RenderTargetHeight = 1000;\n","export class LAppPal {\n    static loadFileAsBytes(filePath, callback) {\n        fetch(filePath)\n            .then(response => response.arrayBuffer())\n            .then(arrayBuffer => callback(arrayBuffer, arrayBuffer.byteLength));\n    }\n    static getDeltaTime() {\n        return this.deltaTime;\n    }\n    static updateTime() {\n        this.currentFrame = Date.now();\n        this.deltaTime = (this.currentFrame - this.lastFrame) / 1000;\n        this.lastFrame = this.currentFrame;\n    }\n    static printMessage(message) {\n        console.log(message);\n    }\n}\nLAppPal.lastUpdate = Date.now();\nLAppPal.currentFrame = 0.0;\nLAppPal.lastFrame = 0.0;\nLAppPal.deltaTime = 0.0;\n","export class LAppGlManager {\n    constructor() {\n        this._gl = null;\n        this._gl = null;\n    }\n    initialize(canvas) {\n        this._gl = canvas.getContext('webgl2');\n        if (!this._gl) {\n            alert('Cannot initialize WebGL. This browser does not support.');\n            this._gl = null;\n            return false;\n        }\n        return true;\n    }\n    release() { }\n    getGl() {\n        return this._gl;\n    }\n}\n","export const CubismDefaultParameterId = Object.freeze({\n    HitAreaPrefix: 'HitArea',\n    HitAreaHead: 'Head',\n    HitAreaBody: 'Body',\n    PartsIdCore: 'Parts01Core',\n    PartsArmPrefix: 'Parts01Arm_',\n    PartsArmLPrefix: 'Parts01ArmL_',\n    PartsArmRPrefix: 'Parts01ArmR_',\n    ParamAngleX: 'ParamAngleX',\n    ParamAngleY: 'ParamAngleY',\n    ParamAngleZ: 'ParamAngleZ',\n    ParamEyeLOpen: 'ParamEyeLOpen',\n    ParamEyeLSmile: 'ParamEyeLSmile',\n    ParamEyeROpen: 'ParamEyeROpen',\n    ParamEyeRSmile: 'ParamEyeRSmile',\n    ParamEyeBallX: 'ParamEyeBallX',\n    ParamEyeBallY: 'ParamEyeBallY',\n    ParamEyeBallForm: 'ParamEyeBallForm',\n    ParamBrowLY: 'ParamBrowLY',\n    ParamBrowRY: 'ParamBrowRY',\n    ParamBrowLX: 'ParamBrowLX',\n    ParamBrowRX: 'ParamBrowRX',\n    ParamBrowLAngle: 'ParamBrowLAngle',\n    ParamBrowRAngle: 'ParamBrowRAngle',\n    ParamBrowLForm: 'ParamBrowLForm',\n    ParamBrowRForm: 'ParamBrowRForm',\n    ParamMouthForm: 'ParamMouthForm',\n    ParamMouthOpenY: 'ParamMouthOpenY',\n    ParamCheek: 'ParamCheek',\n    ParamBodyAngleX: 'ParamBodyAngleX',\n    ParamBodyAngleY: 'ParamBodyAngleY',\n    ParamBodyAngleZ: 'ParamBodyAngleZ',\n    ParamBreath: 'ParamBreath',\n    ParamArmLA: 'ParamArmLA',\n    ParamArmRA: 'ParamArmRA',\n    ParamArmLB: 'ParamArmLB',\n    ParamArmRB: 'ParamArmRB',\n    ParamHandL: 'ParamHandL',\n    ParamHandR: 'ParamHandR',\n    ParamHairFront: 'ParamHairFront',\n    ParamHairSide: 'ParamHairSide',\n    ParamHairBack: 'ParamHairBack',\n    ParamHairFluffy: 'ParamHairFluffy',\n    ParamShoulderY: 'ParamShoulderY',\n    ParamBustX: 'ParamBustX',\n    ParamBustY: 'ParamBustY',\n    ParamBaseX: 'ParamBaseX',\n    ParamBaseY: 'ParamBaseY',\n    ParamNONE: 'NONE:'\n});\nimport * as $ from './cubismdefaultparameterid';\nexport var Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.HitAreaBody = $.CubismDefaultParameterId.HitAreaBody;\n    Live2DCubismFramework.HitAreaHead = $.CubismDefaultParameterId.HitAreaHead;\n    Live2DCubismFramework.HitAreaPrefix = $.CubismDefaultParameterId.HitAreaPrefix;\n    Live2DCubismFramework.ParamAngleX = $.CubismDefaultParameterId.ParamAngleX;\n    Live2DCubismFramework.ParamAngleY = $.CubismDefaultParameterId.ParamAngleY;\n    Live2DCubismFramework.ParamAngleZ = $.CubismDefaultParameterId.ParamAngleZ;\n    Live2DCubismFramework.ParamArmLA = $.CubismDefaultParameterId.ParamArmLA;\n    Live2DCubismFramework.ParamArmLB = $.CubismDefaultParameterId.ParamArmLB;\n    Live2DCubismFramework.ParamArmRA = $.CubismDefaultParameterId.ParamArmRA;\n    Live2DCubismFramework.ParamArmRB = $.CubismDefaultParameterId.ParamArmRB;\n    Live2DCubismFramework.ParamBaseX = $.CubismDefaultParameterId.ParamBaseX;\n    Live2DCubismFramework.ParamBaseY = $.CubismDefaultParameterId.ParamBaseY;\n    Live2DCubismFramework.ParamBodyAngleX = $.CubismDefaultParameterId.ParamBodyAngleX;\n    Live2DCubismFramework.ParamBodyAngleY = $.CubismDefaultParameterId.ParamBodyAngleY;\n    Live2DCubismFramework.ParamBodyAngleZ = $.CubismDefaultParameterId.ParamBodyAngleZ;\n    Live2DCubismFramework.ParamBreath = $.CubismDefaultParameterId.ParamBreath;\n    Live2DCubismFramework.ParamBrowLAngle = $.CubismDefaultParameterId.ParamBrowLAngle;\n    Live2DCubismFramework.ParamBrowLForm = $.CubismDefaultParameterId.ParamBrowLForm;\n    Live2DCubismFramework.ParamBrowLX = $.CubismDefaultParameterId.ParamBrowLX;\n    Live2DCubismFramework.ParamBrowLY = $.CubismDefaultParameterId.ParamBrowLY;\n    Live2DCubismFramework.ParamBrowRAngle = $.CubismDefaultParameterId.ParamBrowRAngle;\n    Live2DCubismFramework.ParamBrowRForm = $.CubismDefaultParameterId.ParamBrowRForm;\n    Live2DCubismFramework.ParamBrowRX = $.CubismDefaultParameterId.ParamBrowRX;\n    Live2DCubismFramework.ParamBrowRY = $.CubismDefaultParameterId.ParamBrowRY;\n    Live2DCubismFramework.ParamBustX = $.CubismDefaultParameterId.ParamBustX;\n    Live2DCubismFramework.ParamBustY = $.CubismDefaultParameterId.ParamBustY;\n    Live2DCubismFramework.ParamCheek = $.CubismDefaultParameterId.ParamCheek;\n    Live2DCubismFramework.ParamEyeBallForm = $.CubismDefaultParameterId.ParamEyeBallForm;\n    Live2DCubismFramework.ParamEyeBallX = $.CubismDefaultParameterId.ParamEyeBallX;\n    Live2DCubismFramework.ParamEyeBallY = $.CubismDefaultParameterId.ParamEyeBallY;\n    Live2DCubismFramework.ParamEyeLOpen = $.CubismDefaultParameterId.ParamEyeLOpen;\n    Live2DCubismFramework.ParamEyeLSmile = $.CubismDefaultParameterId.ParamEyeLSmile;\n    Live2DCubismFramework.ParamEyeROpen = $.CubismDefaultParameterId.ParamEyeROpen;\n    Live2DCubismFramework.ParamEyeRSmile = $.CubismDefaultParameterId.ParamEyeRSmile;\n    Live2DCubismFramework.ParamHairBack = $.CubismDefaultParameterId.ParamHairBack;\n    Live2DCubismFramework.ParamHairFluffy = $.CubismDefaultParameterId.ParamHairFluffy;\n    Live2DCubismFramework.ParamHairFront = $.CubismDefaultParameterId.ParamHairFront;\n    Live2DCubismFramework.ParamHairSide = $.CubismDefaultParameterId.ParamHairSide;\n    Live2DCubismFramework.ParamHandL = $.CubismDefaultParameterId.ParamHandL;\n    Live2DCubismFramework.ParamHandR = $.CubismDefaultParameterId.ParamHandR;\n    Live2DCubismFramework.ParamMouthForm = $.CubismDefaultParameterId.ParamMouthForm;\n    Live2DCubismFramework.ParamMouthOpenY = $.CubismDefaultParameterId.ParamMouthOpenY;\n    Live2DCubismFramework.ParamNONE = $.CubismDefaultParameterId.ParamNONE;\n    Live2DCubismFramework.ParamShoulderY = $.CubismDefaultParameterId.ParamShoulderY;\n    Live2DCubismFramework.PartsArmLPrefix = $.CubismDefaultParameterId.PartsArmLPrefix;\n    Live2DCubismFramework.PartsArmPrefix = $.CubismDefaultParameterId.PartsArmPrefix;\n    Live2DCubismFramework.PartsArmRPrefix = $.CubismDefaultParameterId.PartsArmRPrefix;\n    Live2DCubismFramework.PartsIdCore = $.CubismDefaultParameterId.PartsIdCore;\n})(Live2DCubismFramework || (Live2DCubismFramework = {}));\n","export class ICubismModelSetting {\n}\nimport * as $ from './icubismmodelsetting';\nexport var Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.ICubismModelSetting = $.ICubismModelSetting;\n})(Live2DCubismFramework || (Live2DCubismFramework = {}));\n","import { ICubismModelSetting } from './icubismmodelsetting';\nimport { CubismFramework } from './live2dcubismframework';\nimport { csmVector } from './type/csmvector';\nimport { CubismJson } from './utils/cubismjson';\nexport var FrequestNode;\n(function (FrequestNode) {\n    FrequestNode[FrequestNode[\"FrequestNode_Groups\"] = 0] = \"FrequestNode_Groups\";\n    FrequestNode[FrequestNode[\"FrequestNode_Moc\"] = 1] = \"FrequestNode_Moc\";\n    FrequestNode[FrequestNode[\"FrequestNode_Motions\"] = 2] = \"FrequestNode_Motions\";\n    FrequestNode[FrequestNode[\"FrequestNode_Expressions\"] = 3] = \"FrequestNode_Expressions\";\n    FrequestNode[FrequestNode[\"FrequestNode_Textures\"] = 4] = \"FrequestNode_Textures\";\n    FrequestNode[FrequestNode[\"FrequestNode_Physics\"] = 5] = \"FrequestNode_Physics\";\n    FrequestNode[FrequestNode[\"FrequestNode_Pose\"] = 6] = \"FrequestNode_Pose\";\n    FrequestNode[FrequestNode[\"FrequestNode_HitAreas\"] = 7] = \"FrequestNode_HitAreas\";\n})(FrequestNode || (FrequestNode = {}));\nexport class CubismModelSettingJson extends ICubismModelSetting {\n    constructor(buffer, size) {\n        super();\n        this.version = 'Version';\n        this.fileReferences = 'FileReferences';\n        this.groups = 'Groups';\n        this.layout = 'Layout';\n        this.hitAreas = 'HitAreas';\n        this.moc = 'Moc';\n        this.textures = 'Textures';\n        this.physics = 'Physics';\n        this.pose = 'Pose';\n        this.expressions = 'Expressions';\n        this.motions = 'Motions';\n        this.userData = 'UserData';\n        this.name = 'Name';\n        this.filePath = 'File';\n        this.id = 'Id';\n        this.ids = 'Ids';\n        this.target = 'Target';\n        this.idle = 'Idle';\n        this.tapBody = 'TapBody';\n        this.pinchIn = 'PinchIn';\n        this.pinchOut = 'PinchOut';\n        this.shake = 'Shake';\n        this.flickHead = 'FlickHead';\n        this.parameter = 'Parameter';\n        this.soundPath = 'Sound';\n        this.fadeInTime = 'FadeInTime';\n        this.fadeOutTime = 'FadeOutTime';\n        this.centerX = 'CenterX';\n        this.centerY = 'CenterY';\n        this.x = 'X';\n        this.y = 'Y';\n        this.width = 'Width';\n        this.height = 'Height';\n        this.lipSync = 'LipSync';\n        this.eyeBlink = 'EyeBlink';\n        this.initParameter = 'init_param';\n        this.initPartsVisible = 'init_parts_visible';\n        this.val = 'val';\n        this._json = CubismJson.create(buffer, size);\n        if (this.getJson()) {\n            this._jsonValue = new csmVector();\n            this._jsonValue.pushBack(this.getJson().getRoot().getValueByString(this.groups));\n            this._jsonValue.pushBack(this.getJson()\n                .getRoot()\n                .getValueByString(this.fileReferences)\n                .getValueByString(this.moc));\n            this._jsonValue.pushBack(this.getJson()\n                .getRoot()\n                .getValueByString(this.fileReferences)\n                .getValueByString(this.motions));\n            this._jsonValue.pushBack(this.getJson()\n                .getRoot()\n                .getValueByString(this.fileReferences)\n                .getValueByString(this.expressions));\n            this._jsonValue.pushBack(this.getJson()\n                .getRoot()\n                .getValueByString(this.fileReferences)\n                .getValueByString(this.textures));\n            this._jsonValue.pushBack(this.getJson()\n                .getRoot()\n                .getValueByString(this.fileReferences)\n                .getValueByString(this.physics));\n            this._jsonValue.pushBack(this.getJson()\n                .getRoot()\n                .getValueByString(this.fileReferences)\n                .getValueByString(this.pose));\n            this._jsonValue.pushBack(this.getJson().getRoot().getValueByString(this.hitAreas));\n        }\n    }\n    release() {\n        CubismJson.delete(this._json);\n        this._jsonValue = null;\n    }\n    getJson() {\n        return this._json;\n    }\n    getModelFileName() {\n        if (!this.isExistModelFile()) {\n            return '';\n        }\n        return this._jsonValue.at(FrequestNode.FrequestNode_Moc).getRawString();\n    }\n    getTextureCount() {\n        if (!this.isExistTextureFiles()) {\n            return 0;\n        }\n        return this._jsonValue.at(FrequestNode.FrequestNode_Textures).getSize();\n    }\n    getTextureDirectory() {\n        const texturePath = this._jsonValue\n            .at(FrequestNode.FrequestNode_Textures)\n            .getValueByIndex(0)\n            .getRawString();\n        const pathArray = texturePath.split('/');\n        const arrayLength = pathArray.length - 1;\n        let textureDirectoryStr = '';\n        for (let i = 0; i < arrayLength; i++) {\n            textureDirectoryStr += pathArray[i];\n            if (i < arrayLength - 1) {\n                textureDirectoryStr += '/';\n            }\n        }\n        return textureDirectoryStr;\n    }\n    getTextureFileName(index) {\n        return this._jsonValue\n            .at(FrequestNode.FrequestNode_Textures)\n            .getValueByIndex(index)\n            .getRawString();\n    }\n    getHitAreasCount() {\n        if (!this.isExistHitAreas()) {\n            return 0;\n        }\n        return this._jsonValue.at(FrequestNode.FrequestNode_HitAreas).getSize();\n    }\n    getHitAreaId(index) {\n        return CubismFramework.getIdManager().getId(this._jsonValue\n            .at(FrequestNode.FrequestNode_HitAreas)\n            .getValueByIndex(index)\n            .getValueByString(this.id)\n            .getRawString());\n    }\n    getHitAreaName(index) {\n        return this._jsonValue\n            .at(FrequestNode.FrequestNode_HitAreas)\n            .getValueByIndex(index)\n            .getValueByString(this.name)\n            .getRawString();\n    }\n    getPhysicsFileName() {\n        if (!this.isExistPhysicsFile()) {\n            return '';\n        }\n        return this._jsonValue.at(FrequestNode.FrequestNode_Physics).getRawString();\n    }\n    getPoseFileName() {\n        if (!this.isExistPoseFile()) {\n            return '';\n        }\n        return this._jsonValue.at(FrequestNode.FrequestNode_Pose).getRawString();\n    }\n    getExpressionCount() {\n        if (!this.isExistExpressionFile()) {\n            return 0;\n        }\n        return this._jsonValue.at(FrequestNode.FrequestNode_Expressions).getSize();\n    }\n    getExpressionName(index) {\n        return this._jsonValue\n            .at(FrequestNode.FrequestNode_Expressions)\n            .getValueByIndex(index)\n            .getValueByString(this.name)\n            .getRawString();\n    }\n    getExpressionFileName(index) {\n        return this._jsonValue\n            .at(FrequestNode.FrequestNode_Expressions)\n            .getValueByIndex(index)\n            .getValueByString(this.filePath)\n            .getRawString();\n    }\n    getMotionGroupCount() {\n        if (!this.isExistMotionGroups()) {\n            return 0;\n        }\n        return this._jsonValue\n            .at(FrequestNode.FrequestNode_Motions)\n            .getKeys()\n            .getSize();\n    }\n    getMotionGroupName(index) {\n        if (!this.isExistMotionGroups()) {\n            return null;\n        }\n        return this._jsonValue\n            .at(FrequestNode.FrequestNode_Motions)\n            .getKeys()\n            .at(index);\n    }\n    getMotionCount(groupName) {\n        if (!this.isExistMotionGroupName(groupName)) {\n            return 0;\n        }\n        return this._jsonValue\n            .at(FrequestNode.FrequestNode_Motions)\n            .getValueByString(groupName)\n            .getSize();\n    }\n    getMotionFileName(groupName, index) {\n        if (!this.isExistMotionGroupName(groupName)) {\n            return '';\n        }\n        return this._jsonValue\n            .at(FrequestNode.FrequestNode_Motions)\n            .getValueByString(groupName)\n            .getValueByIndex(index)\n            .getValueByString(this.filePath)\n            .getRawString();\n    }\n    getMotionSoundFileName(groupName, index) {\n        if (!this.isExistMotionSoundFile(groupName, index)) {\n            return '';\n        }\n        return this._jsonValue\n            .at(FrequestNode.FrequestNode_Motions)\n            .getValueByString(groupName)\n            .getValueByIndex(index)\n            .getValueByString(this.soundPath)\n            .getRawString();\n    }\n    getMotionFadeInTimeValue(groupName, index) {\n        if (!this.isExistMotionFadeIn(groupName, index)) {\n            return -1.0;\n        }\n        return this._jsonValue\n            .at(FrequestNode.FrequestNode_Motions)\n            .getValueByString(groupName)\n            .getValueByIndex(index)\n            .getValueByString(this.fadeInTime)\n            .toFloat();\n    }\n    getMotionFadeOutTimeValue(groupName, index) {\n        if (!this.isExistMotionFadeOut(groupName, index)) {\n            return -1.0;\n        }\n        return this._jsonValue\n            .at(FrequestNode.FrequestNode_Motions)\n            .getValueByString(groupName)\n            .getValueByIndex(index)\n            .getValueByString(this.fadeOutTime)\n            .toFloat();\n    }\n    getUserDataFile() {\n        if (!this.isExistUserDataFile()) {\n            return '';\n        }\n        return this.getJson()\n            .getRoot()\n            .getValueByString(this.fileReferences)\n            .getValueByString(this.userData)\n            .getRawString();\n    }\n    getLayoutMap(outLayoutMap) {\n        const map = this.getJson()\n            .getRoot()\n            .getValueByString(this.layout)\n            .getMap();\n        if (map == null) {\n            return false;\n        }\n        let ret = false;\n        for (const ite = map.begin(); ite.notEqual(map.end()); ite.preIncrement()) {\n            outLayoutMap.setValue(ite.ptr().first, ite.ptr().second.toFloat());\n            ret = true;\n        }\n        return ret;\n    }\n    getEyeBlinkParameterCount() {\n        if (!this.isExistEyeBlinkParameters()) {\n            return 0;\n        }\n        let num = 0;\n        for (let i = 0; i < this._jsonValue.at(FrequestNode.FrequestNode_Groups).getSize(); i++) {\n            const refI = this._jsonValue\n                .at(FrequestNode.FrequestNode_Groups)\n                .getValueByIndex(i);\n            if (refI.isNull() || refI.isError()) {\n                continue;\n            }\n            if (refI.getValueByString(this.name).getRawString() == this.eyeBlink) {\n                num = refI.getValueByString(this.ids).getVector().getSize();\n                break;\n            }\n        }\n        return num;\n    }\n    getEyeBlinkParameterId(index) {\n        if (!this.isExistEyeBlinkParameters()) {\n            return null;\n        }\n        for (let i = 0; i < this._jsonValue.at(FrequestNode.FrequestNode_Groups).getSize(); i++) {\n            const refI = this._jsonValue\n                .at(FrequestNode.FrequestNode_Groups)\n                .getValueByIndex(i);\n            if (refI.isNull() || refI.isError()) {\n                continue;\n            }\n            if (refI.getValueByString(this.name).getRawString() == this.eyeBlink) {\n                return CubismFramework.getIdManager().getId(refI.getValueByString(this.ids).getValueByIndex(index).getRawString());\n            }\n        }\n        return null;\n    }\n    getLipSyncParameterCount() {\n        if (!this.isExistLipSyncParameters()) {\n            return 0;\n        }\n        let num = 0;\n        for (let i = 0; i < this._jsonValue.at(FrequestNode.FrequestNode_Groups).getSize(); i++) {\n            const refI = this._jsonValue\n                .at(FrequestNode.FrequestNode_Groups)\n                .getValueByIndex(i);\n            if (refI.isNull() || refI.isError()) {\n                continue;\n            }\n            if (refI.getValueByString(this.name).getRawString() == this.lipSync) {\n                num = refI.getValueByString(this.ids).getVector().getSize();\n                break;\n            }\n        }\n        return num;\n    }\n    getLipSyncParameterId(index) {\n        if (!this.isExistLipSyncParameters()) {\n            return null;\n        }\n        for (let i = 0; i < this._jsonValue.at(FrequestNode.FrequestNode_Groups).getSize(); i++) {\n            const refI = this._jsonValue\n                .at(FrequestNode.FrequestNode_Groups)\n                .getValueByIndex(i);\n            if (refI.isNull() || refI.isError()) {\n                continue;\n            }\n            if (refI.getValueByString(this.name).getRawString() == this.lipSync) {\n                return CubismFramework.getIdManager().getId(refI.getValueByString(this.ids).getValueByIndex(index).getRawString());\n            }\n        }\n        return null;\n    }\n    isExistModelFile() {\n        const node = this._jsonValue.at(FrequestNode.FrequestNode_Moc);\n        return !node.isNull() && !node.isError();\n    }\n    isExistTextureFiles() {\n        const node = this._jsonValue.at(FrequestNode.FrequestNode_Textures);\n        return !node.isNull() && !node.isError();\n    }\n    isExistHitAreas() {\n        const node = this._jsonValue.at(FrequestNode.FrequestNode_HitAreas);\n        return !node.isNull() && !node.isError();\n    }\n    isExistPhysicsFile() {\n        const node = this._jsonValue.at(FrequestNode.FrequestNode_Physics);\n        return !node.isNull() && !node.isError();\n    }\n    isExistPoseFile() {\n        const node = this._jsonValue.at(FrequestNode.FrequestNode_Pose);\n        return !node.isNull() && !node.isError();\n    }\n    isExistExpressionFile() {\n        const node = this._jsonValue.at(FrequestNode.FrequestNode_Expressions);\n        return !node.isNull() && !node.isError();\n    }\n    isExistMotionGroups() {\n        const node = this._jsonValue.at(FrequestNode.FrequestNode_Motions);\n        return !node.isNull() && !node.isError();\n    }\n    isExistMotionGroupName(groupName) {\n        const node = this._jsonValue\n            .at(FrequestNode.FrequestNode_Motions)\n            .getValueByString(groupName);\n        return !node.isNull() && !node.isError();\n    }\n    isExistMotionSoundFile(groupName, index) {\n        const node = this._jsonValue\n            .at(FrequestNode.FrequestNode_Motions)\n            .getValueByString(groupName)\n            .getValueByIndex(index)\n            .getValueByString(this.soundPath);\n        return !node.isNull() && !node.isError();\n    }\n    isExistMotionFadeIn(groupName, index) {\n        const node = this._jsonValue\n            .at(FrequestNode.FrequestNode_Motions)\n            .getValueByString(groupName)\n            .getValueByIndex(index)\n            .getValueByString(this.fadeInTime);\n        return !node.isNull() && !node.isError();\n    }\n    isExistMotionFadeOut(groupName, index) {\n        const node = this._jsonValue\n            .at(FrequestNode.FrequestNode_Motions)\n            .getValueByString(groupName)\n            .getValueByIndex(index)\n            .getValueByString(this.fadeOutTime);\n        return !node.isNull() && !node.isError();\n    }\n    isExistUserDataFile() {\n        const node = this.getJson()\n            .getRoot()\n            .getValueByString(this.fileReferences)\n            .getValueByString(this.userData);\n        return !node.isNull() && !node.isError();\n    }\n    isExistEyeBlinkParameters() {\n        if (this._jsonValue.at(FrequestNode.FrequestNode_Groups).isNull() ||\n            this._jsonValue.at(FrequestNode.FrequestNode_Groups).isError()) {\n            return false;\n        }\n        for (let i = 0; i < this._jsonValue.at(FrequestNode.FrequestNode_Groups).getSize(); ++i) {\n            if (this._jsonValue\n                .at(FrequestNode.FrequestNode_Groups)\n                .getValueByIndex(i)\n                .getValueByString(this.name)\n                .getRawString() == this.eyeBlink) {\n                return true;\n            }\n        }\n        return false;\n    }\n    isExistLipSyncParameters() {\n        if (this._jsonValue.at(FrequestNode.FrequestNode_Groups).isNull() ||\n            this._jsonValue.at(FrequestNode.FrequestNode_Groups).isError()) {\n            return false;\n        }\n        for (let i = 0; i < this._jsonValue.at(FrequestNode.FrequestNode_Groups).getSize(); ++i) {\n            if (this._jsonValue\n                .at(FrequestNode.FrequestNode_Groups)\n                .getValueByIndex(i)\n                .getValueByString(this.name)\n                .getRawString() == this.lipSync) {\n                return true;\n            }\n        }\n        return false;\n    }\n}\nimport * as $ from './cubismmodelsettingjson';\nexport var Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismModelSettingJson = $.CubismModelSettingJson;\n    Live2DCubismFramework.FrequestNode = $.FrequestNode;\n})(Live2DCubismFramework || (Live2DCubismFramework = {}));\n","export class CubismBreath {\n    static create() {\n        return new CubismBreath();\n    }\n    static delete(instance) {\n        if (instance != null) {\n            instance = null;\n        }\n    }\n    setParameters(breathParameters) {\n        this._breathParameters = breathParameters;\n    }\n    getParameters() {\n        return this._breathParameters;\n    }\n    updateParameters(model, deltaTimeSeconds) {\n        this._currentTime += deltaTimeSeconds;\n        const t = this._currentTime * 2.0 * Math.PI;\n        for (let i = 0; i < this._breathParameters.getSize(); ++i) {\n            const data = this._breathParameters.at(i);\n            model.addParameterValueById(data.parameterId, data.offset + data.peak * Math.sin(t / data.cycle), data.weight);\n        }\n    }\n    constructor() {\n        this._currentTime = 0.0;\n    }\n}\nexport class BreathParameterData {\n    constructor(parameterId, offset, peak, cycle, weight) {\n        this.parameterId = parameterId == undefined ? null : parameterId;\n        this.offset = offset == undefined ? 0.0 : offset;\n        this.peak = peak == undefined ? 0.0 : peak;\n        this.cycle = cycle == undefined ? 0.0 : cycle;\n        this.weight = weight == undefined ? 0.0 : weight;\n    }\n}\nimport * as $ from './cubismbreath';\nexport var Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.BreathParameterData = $.BreathParameterData;\n    Live2DCubismFramework.CubismBreath = $.CubismBreath;\n})(Live2DCubismFramework || (Live2DCubismFramework = {}));\n","import { csmVector } from '../type/csmvector';\nexport class CubismEyeBlink {\n    static create(modelSetting = null) {\n        return new CubismEyeBlink(modelSetting);\n    }\n    static delete(eyeBlink) {\n        if (eyeBlink != null) {\n            eyeBlink = null;\n        }\n    }\n    setBlinkingInterval(blinkingInterval) {\n        this._blinkingIntervalSeconds = blinkingInterval;\n    }\n    setBlinkingSetting(closing, closed, opening) {\n        this._closingSeconds = closing;\n        this._closedSeconds = closed;\n        this._openingSeconds = opening;\n    }\n    setParameterIds(parameterIds) {\n        this._parameterIds = parameterIds;\n    }\n    getParameterIds() {\n        return this._parameterIds;\n    }\n    updateParameters(model, deltaTimeSeconds) {\n        this._userTimeSeconds += deltaTimeSeconds;\n        let parameterValue;\n        let t = 0.0;\n        const blinkingState = this._blinkingState;\n        switch (blinkingState) {\n            case EyeState.EyeState_Closing:\n                t =\n                    (this._userTimeSeconds - this._stateStartTimeSeconds) /\n                        this._closingSeconds;\n                if (t >= 1.0) {\n                    t = 1.0;\n                    this._blinkingState = EyeState.EyeState_Closed;\n                    this._stateStartTimeSeconds = this._userTimeSeconds;\n                }\n                parameterValue = 1.0 - t;\n                break;\n            case EyeState.EyeState_Closed:\n                t =\n                    (this._userTimeSeconds - this._stateStartTimeSeconds) /\n                        this._closedSeconds;\n                if (t >= 1.0) {\n                    this._blinkingState = EyeState.EyeState_Opening;\n                    this._stateStartTimeSeconds = this._userTimeSeconds;\n                }\n                parameterValue = 0.0;\n                break;\n            case EyeState.EyeState_Opening:\n                t =\n                    (this._userTimeSeconds - this._stateStartTimeSeconds) /\n                        this._openingSeconds;\n                if (t >= 1.0) {\n                    t = 1.0;\n                    this._blinkingState = EyeState.EyeState_Interval;\n                    this._nextBlinkingTime = this.determinNextBlinkingTiming();\n                }\n                parameterValue = t;\n                break;\n            case EyeState.EyeState_Interval:\n                if (this._nextBlinkingTime < this._userTimeSeconds) {\n                    this._blinkingState = EyeState.EyeState_Closing;\n                    this._stateStartTimeSeconds = this._userTimeSeconds;\n                }\n                parameterValue = 1.0;\n                break;\n            case EyeState.EyeState_First:\n            default:\n                this._blinkingState = EyeState.EyeState_Interval;\n                this._nextBlinkingTime = this.determinNextBlinkingTiming();\n                parameterValue = 1.0;\n                break;\n        }\n        if (!CubismEyeBlink.CloseIfZero) {\n            parameterValue = -parameterValue;\n        }\n        for (let i = 0; i < this._parameterIds.getSize(); ++i) {\n            model.setParameterValueById(this._parameterIds.at(i), parameterValue);\n        }\n    }\n    constructor(modelSetting) {\n        this._blinkingState = EyeState.EyeState_First;\n        this._nextBlinkingTime = 0.0;\n        this._stateStartTimeSeconds = 0.0;\n        this._blinkingIntervalSeconds = 4.0;\n        this._closingSeconds = 0.1;\n        this._closedSeconds = 0.05;\n        this._openingSeconds = 0.15;\n        this._userTimeSeconds = 0.0;\n        this._parameterIds = new csmVector();\n        if (modelSetting == null) {\n            return;\n        }\n        for (let i = 0; i < modelSetting.getEyeBlinkParameterCount(); ++i) {\n            this._parameterIds.pushBack(modelSetting.getEyeBlinkParameterId(i));\n        }\n    }\n    determinNextBlinkingTiming() {\n        const r = Math.random();\n        return (this._userTimeSeconds + r * (2.0 * this._blinkingIntervalSeconds - 1.0));\n    }\n}\nCubismEyeBlink.CloseIfZero = true;\nexport var EyeState;\n(function (EyeState) {\n    EyeState[EyeState[\"EyeState_First\"] = 0] = \"EyeState_First\";\n    EyeState[EyeState[\"EyeState_Interval\"] = 1] = \"EyeState_Interval\";\n    EyeState[EyeState[\"EyeState_Closing\"] = 2] = \"EyeState_Closing\";\n    EyeState[EyeState[\"EyeState_Closed\"] = 3] = \"EyeState_Closed\";\n    EyeState[EyeState[\"EyeState_Opening\"] = 4] = \"EyeState_Opening\";\n})(EyeState || (EyeState = {}));\nimport * as $ from './cubismeyeblink';\nexport var Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismEyeBlink = $.CubismEyeBlink;\n    Live2DCubismFramework.EyeState = $.EyeState;\n})(Live2DCubismFramework || (Live2DCubismFramework = {}));\n","import { CubismFramework } from '../live2dcubismframework';\nimport { csmVector } from '../type/csmvector';\nimport { CubismJson } from '../utils/cubismjson';\nconst Epsilon = 0.001;\nconst DefaultFadeInSeconds = 0.5;\nconst FadeIn = 'FadeInTime';\nconst Link = 'Link';\nconst Groups = 'Groups';\nconst Id = 'Id';\nexport class CubismPose {\n    static create(pose3json, size) {\n        const json = CubismJson.create(pose3json, size);\n        if (!json) {\n            return null;\n        }\n        const ret = new CubismPose();\n        const root = json.getRoot();\n        if (!root.getValueByString(FadeIn).isNull()) {\n            ret._fadeTimeSeconds = root\n                .getValueByString(FadeIn)\n                .toFloat(DefaultFadeInSeconds);\n            if (ret._fadeTimeSeconds < 0.0) {\n                ret._fadeTimeSeconds = DefaultFadeInSeconds;\n            }\n        }\n        const poseListInfo = root.getValueByString(Groups);\n        const poseCount = poseListInfo.getSize();\n        for (let poseIndex = 0; poseIndex < poseCount; ++poseIndex) {\n            const idListInfo = poseListInfo.getValueByIndex(poseIndex);\n            const idCount = idListInfo.getSize();\n            let groupCount = 0;\n            for (let groupIndex = 0; groupIndex < idCount; ++groupIndex) {\n                const partInfo = idListInfo.getValueByIndex(groupIndex);\n                const partData = new PartData();\n                const parameterId = CubismFramework.getIdManager().getId(partInfo.getValueByString(Id).getRawString());\n                partData.partId = parameterId;\n                if (!partInfo.getValueByString(Link).isNull()) {\n                    const linkListInfo = partInfo.getValueByString(Link);\n                    const linkCount = linkListInfo.getSize();\n                    for (let linkIndex = 0; linkIndex < linkCount; ++linkIndex) {\n                        const linkPart = new PartData();\n                        const linkId = CubismFramework.getIdManager().getId(linkListInfo.getValueByIndex(linkIndex).getString());\n                        linkPart.partId = linkId;\n                        partData.link.pushBack(linkPart);\n                    }\n                }\n                ret._partGroups.pushBack(partData.clone());\n                ++groupCount;\n            }\n            ret._partGroupCounts.pushBack(groupCount);\n        }\n        CubismJson.delete(json);\n        return ret;\n    }\n    static delete(pose) {\n        if (pose != null) {\n            pose = null;\n        }\n    }\n    updateParameters(model, deltaTimeSeconds) {\n        if (model != this._lastModel) {\n            this.reset(model);\n        }\n        this._lastModel = model;\n        if (deltaTimeSeconds < 0.0) {\n            deltaTimeSeconds = 0.0;\n        }\n        let beginIndex = 0;\n        for (let i = 0; i < this._partGroupCounts.getSize(); i++) {\n            const partGroupCount = this._partGroupCounts.at(i);\n            this.doFade(model, deltaTimeSeconds, beginIndex, partGroupCount);\n            beginIndex += partGroupCount;\n        }\n        this.copyPartOpacities(model);\n    }\n    reset(model) {\n        let beginIndex = 0;\n        for (let i = 0; i < this._partGroupCounts.getSize(); ++i) {\n            const groupCount = this._partGroupCounts.at(i);\n            for (let j = beginIndex; j < beginIndex + groupCount; ++j) {\n                this._partGroups.at(j).initialize(model);\n                const partsIndex = this._partGroups.at(j).partIndex;\n                const paramIndex = this._partGroups.at(j).parameterIndex;\n                if (partsIndex < 0) {\n                    continue;\n                }\n                model.setPartOpacityByIndex(partsIndex, j == beginIndex ? 1.0 : 0.0);\n                model.setParameterValueByIndex(paramIndex, j == beginIndex ? 1.0 : 0.0);\n                for (let k = 0; k < this._partGroups.at(j).link.getSize(); ++k) {\n                    this._partGroups.at(j).link.at(k).initialize(model);\n                }\n            }\n            beginIndex += groupCount;\n        }\n    }\n    copyPartOpacities(model) {\n        for (let groupIndex = 0; groupIndex < this._partGroups.getSize(); ++groupIndex) {\n            const partData = this._partGroups.at(groupIndex);\n            if (partData.link.getSize() == 0) {\n                continue;\n            }\n            const partIndex = this._partGroups.at(groupIndex).partIndex;\n            const opacity = model.getPartOpacityByIndex(partIndex);\n            for (let linkIndex = 0; linkIndex < partData.link.getSize(); ++linkIndex) {\n                const linkPart = partData.link.at(linkIndex);\n                const linkPartIndex = linkPart.partIndex;\n                if (linkPartIndex < 0) {\n                    continue;\n                }\n                model.setPartOpacityByIndex(linkPartIndex, opacity);\n            }\n        }\n    }\n    doFade(model, deltaTimeSeconds, beginIndex, partGroupCount) {\n        let visiblePartIndex = -1;\n        let newOpacity = 1.0;\n        const phi = 0.5;\n        const backOpacityThreshold = 0.15;\n        for (let i = beginIndex; i < beginIndex + partGroupCount; ++i) {\n            const partIndex = this._partGroups.at(i).partIndex;\n            const paramIndex = this._partGroups.at(i).parameterIndex;\n            if (model.getParameterValueByIndex(paramIndex) > Epsilon) {\n                if (visiblePartIndex >= 0) {\n                    break;\n                }\n                visiblePartIndex = i;\n                if (this._fadeTimeSeconds == 0) {\n                    newOpacity = 1.0;\n                    continue;\n                }\n                newOpacity = model.getPartOpacityByIndex(partIndex);\n                newOpacity += deltaTimeSeconds / this._fadeTimeSeconds;\n                if (newOpacity > 1.0) {\n                    newOpacity = 1.0;\n                }\n            }\n        }\n        if (visiblePartIndex < 0) {\n            visiblePartIndex = 0;\n            newOpacity = 1.0;\n        }\n        for (let i = beginIndex; i < beginIndex + partGroupCount; ++i) {\n            const partsIndex = this._partGroups.at(i).partIndex;\n            if (visiblePartIndex == i) {\n                model.setPartOpacityByIndex(partsIndex, newOpacity);\n            }\n            else {\n                let opacity = model.getPartOpacityByIndex(partsIndex);\n                let a1;\n                if (newOpacity < phi) {\n                    a1 = (newOpacity * (phi - 1)) / phi + 1.0;\n                }\n                else {\n                    a1 = ((1 - newOpacity) * phi) / (1.0 - phi);\n                }\n                const backOpacity = (1.0 - a1) * (1.0 - newOpacity);\n                if (backOpacity > backOpacityThreshold) {\n                    a1 = 1.0 - backOpacityThreshold / (1.0 - newOpacity);\n                }\n                if (opacity > a1) {\n                    opacity = a1;\n                }\n                model.setPartOpacityByIndex(partsIndex, opacity);\n            }\n        }\n    }\n    constructor() {\n        this._fadeTimeSeconds = DefaultFadeInSeconds;\n        this._lastModel = null;\n        this._partGroups = new csmVector();\n        this._partGroupCounts = new csmVector();\n    }\n}\nexport class PartData {\n    constructor(v) {\n        this.parameterIndex = 0;\n        this.partIndex = 0;\n        this.link = new csmVector();\n        if (v != undefined) {\n            this.partId = v.partId;\n            for (const ite = v.link.begin(); ite.notEqual(v.link.end()); ite.preIncrement()) {\n                this.link.pushBack(ite.ptr().clone());\n            }\n        }\n    }\n    assignment(v) {\n        this.partId = v.partId;\n        for (const ite = v.link.begin(); ite.notEqual(v.link.end()); ite.preIncrement()) {\n            this.link.pushBack(ite.ptr().clone());\n        }\n        return this;\n    }\n    initialize(model) {\n        this.parameterIndex = model.getParameterIndex(this.partId);\n        this.partIndex = model.getPartIndex(this.partId);\n        model.setParameterValueByIndex(this.parameterIndex, 1);\n    }\n    clone() {\n        const clonePartData = new PartData();\n        clonePartData.partId = this.partId;\n        clonePartData.parameterIndex = this.parameterIndex;\n        clonePartData.partIndex = this.partIndex;\n        clonePartData.link = new csmVector();\n        for (let ite = this.link.begin(); ite.notEqual(this.link.end()); ite.increment()) {\n            clonePartData.link.pushBack(ite.ptr().clone());\n        }\n        return clonePartData;\n    }\n}\nimport * as $ from './cubismpose';\nexport var Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismPose = $.CubismPose;\n    Live2DCubismFramework.PartData = $.PartData;\n})(Live2DCubismFramework || (Live2DCubismFramework = {}));\n","import { CubismMatrix44 } from './cubismmatrix44';\nexport class CubismModelMatrix extends CubismMatrix44 {\n    constructor(w, h) {\n        super();\n        this._width = w !== undefined ? w : 0.0;\n        this._height = h !== undefined ? h : 0.0;\n        this.setHeight(2.0);\n    }\n    setWidth(w) {\n        const scaleX = w / this._width;\n        const scaleY = scaleX;\n        this.scale(scaleX, scaleY);\n    }\n    setHeight(h) {\n        const scaleX = h / this._height;\n        const scaleY = scaleX;\n        this.scale(scaleX, scaleY);\n    }\n    setPosition(x, y) {\n        this.translate(x, y);\n    }\n    setCenterPosition(x, y) {\n        this.centerX(x);\n        this.centerY(y);\n    }\n    top(y) {\n        this.setY(y);\n    }\n    bottom(y) {\n        const h = this._height * this.getScaleY();\n        this.translateY(y - h);\n    }\n    left(x) {\n        this.setX(x);\n    }\n    right(x) {\n        const w = this._width * this.getScaleX();\n        this.translateX(x - w);\n    }\n    centerX(x) {\n        const w = this._width * this.getScaleX();\n        this.translateX(x - w / 2.0);\n    }\n    setX(x) {\n        this.translateX(x);\n    }\n    centerY(y) {\n        const h = this._height * this.getScaleY();\n        this.translateY(y - h / 2.0);\n    }\n    setY(y) {\n        this.translateY(y);\n    }\n    setupFromLayout(layout) {\n        const keyWidth = 'width';\n        const keyHeight = 'height';\n        const keyX = 'x';\n        const keyY = 'y';\n        const keyCenterX = 'center_x';\n        const keyCenterY = 'center_y';\n        const keyTop = 'top';\n        const keyBottom = 'bottom';\n        const keyLeft = 'left';\n        const keyRight = 'right';\n        for (const ite = layout.begin(); ite.notEqual(layout.end()); ite.preIncrement()) {\n            const key = ite.ptr().first;\n            const value = ite.ptr().second;\n            if (key == keyWidth) {\n                this.setWidth(value);\n            }\n            else if (key == keyHeight) {\n                this.setHeight(value);\n            }\n        }\n        for (const ite = layout.begin(); ite.notEqual(layout.end()); ite.preIncrement()) {\n            const key = ite.ptr().first;\n            const value = ite.ptr().second;\n            if (key == keyX) {\n                this.setX(value);\n            }\n            else if (key == keyY) {\n                this.setY(value);\n            }\n            else if (key == keyCenterX) {\n                this.centerX(value);\n            }\n            else if (key == keyCenterY) {\n                this.centerY(value);\n            }\n            else if (key == keyTop) {\n                this.top(value);\n            }\n            else if (key == keyBottom) {\n                this.bottom(value);\n            }\n            else if (key == keyLeft) {\n                this.left(value);\n            }\n            else if (key == keyRight) {\n                this.right(value);\n            }\n        }\n    }\n}\nimport * as $ from './cubismmodelmatrix';\nexport var Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismModelMatrix = $.CubismModelMatrix;\n})(Live2DCubismFramework || (Live2DCubismFramework = {}));\n","export class CubismVector2 {\n    constructor(x, y) {\n        this.x = x;\n        this.y = y;\n        this.x = x == undefined ? 0.0 : x;\n        this.y = y == undefined ? 0.0 : y;\n    }\n    add(vector2) {\n        const ret = new CubismVector2(0.0, 0.0);\n        ret.x = this.x + vector2.x;\n        ret.y = this.y + vector2.y;\n        return ret;\n    }\n    substract(vector2) {\n        const ret = new CubismVector2(0.0, 0.0);\n        ret.x = this.x - vector2.x;\n        ret.y = this.y - vector2.y;\n        return ret;\n    }\n    multiply(vector2) {\n        const ret = new CubismVector2(0.0, 0.0);\n        ret.x = this.x * vector2.x;\n        ret.y = this.y * vector2.y;\n        return ret;\n    }\n    multiplyByScaler(scalar) {\n        return this.multiply(new CubismVector2(scalar, scalar));\n    }\n    division(vector2) {\n        const ret = new CubismVector2(0.0, 0.0);\n        ret.x = this.x / vector2.x;\n        ret.y = this.y / vector2.y;\n        return ret;\n    }\n    divisionByScalar(scalar) {\n        return this.division(new CubismVector2(scalar, scalar));\n    }\n    getLength() {\n        return Math.sqrt(this.x * this.x + this.y * this.y);\n    }\n    getDistanceWith(a) {\n        return Math.sqrt((this.x - a.x) * (this.x - a.x) + (this.y - a.y) * (this.y - a.y));\n    }\n    dot(a) {\n        return this.x * a.x + this.y * a.y;\n    }\n    normalize() {\n        const length = Math.pow(this.x * this.x + this.y * this.y, 0.5);\n        this.x = this.x / length;\n        this.y = this.y / length;\n    }\n    isEqual(rhs) {\n        return this.x == rhs.x && this.y == rhs.y;\n    }\n    isNotEqual(rhs) {\n        return !this.isEqual(rhs);\n    }\n}\nimport * as $ from './cubismvector2';\nexport var Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismVector2 = $.CubismVector2;\n})(Live2DCubismFramework || (Live2DCubismFramework = {}));\n","import { CubismVector2 } from './cubismvector2';\nexport class CubismMath {\n    static range(value, min, max) {\n        if (value < min) {\n            value = min;\n        }\n        else if (value > max) {\n            value = max;\n        }\n        return value;\n    }\n    static sin(x) {\n        return Math.sin(x);\n    }\n    static cos(x) {\n        return Math.cos(x);\n    }\n    static abs(x) {\n        return Math.abs(x);\n    }\n    static sqrt(x) {\n        return Math.sqrt(x);\n    }\n    static cbrt(x) {\n        if (x === 0) {\n            return x;\n        }\n        let cx = x;\n        const isNegativeNumber = cx < 0;\n        if (isNegativeNumber) {\n            cx = -cx;\n        }\n        let ret;\n        if (cx === Infinity) {\n            ret = Infinity;\n        }\n        else {\n            ret = Math.exp(Math.log(cx) / 3);\n            ret = (cx / (ret * ret) + 2 * ret) / 3;\n        }\n        return isNegativeNumber ? -ret : ret;\n    }\n    static getEasingSine(value) {\n        if (value < 0.0) {\n            return 0.0;\n        }\n        else if (value > 1.0) {\n            return 1.0;\n        }\n        return 0.5 - 0.5 * this.cos(value * Math.PI);\n    }\n    static max(left, right) {\n        return left > right ? left : right;\n    }\n    static min(left, right) {\n        return left > right ? right : left;\n    }\n    static clamp(val, min, max) {\n        if (val < min) {\n            return min;\n        }\n        else if (max < val) {\n            return max;\n        }\n        return val;\n    }\n    static degreesToRadian(degrees) {\n        return (degrees / 180.0) * Math.PI;\n    }\n    static radianToDegrees(radian) {\n        return (radian * 180.0) / Math.PI;\n    }\n    static directionToRadian(from, to) {\n        const q1 = Math.atan2(to.y, to.x);\n        const q2 = Math.atan2(from.y, from.x);\n        let ret = q1 - q2;\n        while (ret < -Math.PI) {\n            ret += Math.PI * 2.0;\n        }\n        while (ret > Math.PI) {\n            ret -= Math.PI * 2.0;\n        }\n        return ret;\n    }\n    static directionToDegrees(from, to) {\n        const radian = this.directionToRadian(from, to);\n        let degree = this.radianToDegrees(radian);\n        if (to.x - from.x > 0.0) {\n            degree = -degree;\n        }\n        return degree;\n    }\n    static radianToDirection(totalAngle) {\n        const ret = new CubismVector2();\n        ret.x = this.sin(totalAngle);\n        ret.y = this.cos(totalAngle);\n        return ret;\n    }\n    static quadraticEquation(a, b, c) {\n        if (this.abs(a) < CubismMath.Epsilon) {\n            if (this.abs(b) < CubismMath.Epsilon) {\n                return -c;\n            }\n            return -c / b;\n        }\n        return -(b + this.sqrt(b * b - 4.0 * a * c)) / (2.0 * a);\n    }\n    static cardanoAlgorithmForBezier(a, b, c, d) {\n        if (this.abs(a) < CubismMath.Epsilon) {\n            return this.range(this.quadraticEquation(b, c, d), 0.0, 1.0);\n        }\n        const ba = b / a;\n        const ca = c / a;\n        const da = d / a;\n        const p = (3.0 * ca - ba * ba) / 3.0;\n        const p3 = p / 3.0;\n        const q = (2.0 * ba * ba * ba - 9.0 * ba * ca + 27.0 * da) / 27.0;\n        const q2 = q / 2.0;\n        const discriminant = q2 * q2 + p3 * p3 * p3;\n        const center = 0.5;\n        const threshold = center + 0.01;\n        if (discriminant < 0.0) {\n            const mp3 = -p / 3.0;\n            const mp33 = mp3 * mp3 * mp3;\n            const r = this.sqrt(mp33);\n            const t = -q / (2.0 * r);\n            const cosphi = this.range(t, -1.0, 1.0);\n            const phi = Math.acos(cosphi);\n            const crtr = this.cbrt(r);\n            const t1 = 2.0 * crtr;\n            const root1 = t1 * this.cos(phi / 3.0) - ba / 3.0;\n            if (this.abs(root1 - center) < threshold) {\n                return this.range(root1, 0.0, 1.0);\n            }\n            const root2 = t1 * this.cos((phi + 2.0 * Math.PI) / 3.0) - ba / 3.0;\n            if (this.abs(root2 - center) < threshold) {\n                return this.range(root2, 0.0, 1.0);\n            }\n            const root3 = t1 * this.cos((phi + 4.0 * Math.PI) / 3.0) - ba / 3.0;\n            return this.range(root3, 0.0, 1.0);\n        }\n        if (discriminant == 0.0) {\n            let u1;\n            if (q2 < 0.0) {\n                u1 = this.cbrt(-q2);\n            }\n            else {\n                u1 = -this.cbrt(q2);\n            }\n            const root1 = 2.0 * u1 - ba / 3.0;\n            if (this.abs(root1 - center) < threshold) {\n                return this.range(root1, 0.0, 1.0);\n            }\n            const root2 = -u1 - ba / 3.0;\n            return this.range(root2, 0.0, 1.0);\n        }\n        const sd = this.sqrt(discriminant);\n        const u1 = this.cbrt(sd - q2);\n        const v1 = this.cbrt(sd + q2);\n        const root1 = u1 - v1 - ba / 3.0;\n        return this.range(root1, 0.0, 1.0);\n    }\n    static mod(dividend, divisor) {\n        if (!isFinite(dividend) ||\n            divisor === 0 ||\n            isNaN(dividend) ||\n            isNaN(divisor)) {\n            console.warn(`divided: ${dividend}, divisor: ${divisor} mod() returns 'NaN'.`);\n            return NaN;\n        }\n        const absDividend = Math.abs(dividend);\n        const absDivisor = Math.abs(divisor);\n        let result = absDividend - Math.floor(absDividend / absDivisor) * absDivisor;\n        result *= Math.sign(dividend);\n        return result;\n    }\n    constructor() { }\n}\nCubismMath.Epsilon = 0.00001;\nimport * as $ from './cubismmath';\nexport var Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismMath = $.CubismMath;\n})(Live2DCubismFramework || (Live2DCubismFramework = {}));\n","import { CubismMath } from './cubismmath';\nconst FrameRate = 30;\nconst Epsilon = 0.01;\nexport class CubismTargetPoint {\n    constructor() {\n        this._faceTargetX = 0.0;\n        this._faceTargetY = 0.0;\n        this._faceX = 0.0;\n        this._faceY = 0.0;\n        this._faceVX = 0.0;\n        this._faceVY = 0.0;\n        this._lastTimeSeconds = 0.0;\n        this._userTimeSeconds = 0.0;\n    }\n    update(deltaTimeSeconds) {\n        this._userTimeSeconds += deltaTimeSeconds;\n        const faceParamMaxV = 40.0 / 10.0;\n        const maxV = (faceParamMaxV * 1.0) / FrameRate;\n        if (this._lastTimeSeconds == 0.0) {\n            this._lastTimeSeconds = this._userTimeSeconds;\n            return;\n        }\n        const deltaTimeWeight = (this._userTimeSeconds - this._lastTimeSeconds) * FrameRate;\n        this._lastTimeSeconds = this._userTimeSeconds;\n        const timeToMaxSpeed = 0.15;\n        const frameToMaxSpeed = timeToMaxSpeed * FrameRate;\n        const maxA = (deltaTimeWeight * maxV) / frameToMaxSpeed;\n        const dx = this._faceTargetX - this._faceX;\n        const dy = this._faceTargetY - this._faceY;\n        if (CubismMath.abs(dx) <= Epsilon && CubismMath.abs(dy) <= Epsilon) {\n            return;\n        }\n        const d = CubismMath.sqrt(dx * dx + dy * dy);\n        const vx = (maxV * dx) / d;\n        const vy = (maxV * dy) / d;\n        let ax = vx - this._faceVX;\n        let ay = vy - this._faceVY;\n        const a = CubismMath.sqrt(ax * ax + ay * ay);\n        if (a < -maxA || a > maxA) {\n            ax *= maxA / a;\n            ay *= maxA / a;\n        }\n        this._faceVX += ax;\n        this._faceVY += ay;\n        {\n            const maxV = 0.5 *\n                (CubismMath.sqrt(maxA * maxA + 16.0 * maxA * d - 8.0 * maxA * d) -\n                    maxA);\n            const curV = CubismMath.sqrt(this._faceVX * this._faceVX + this._faceVY * this._faceVY);\n            if (curV > maxV) {\n                this._faceVX *= maxV / curV;\n                this._faceVY *= maxV / curV;\n            }\n        }\n        this._faceX += this._faceVX;\n        this._faceY += this._faceVY;\n    }\n    getX() {\n        return this._faceX;\n    }\n    getY() {\n        return this._faceY;\n    }\n    set(x, y) {\n        this._faceTargetX = x;\n        this._faceTargetY = y;\n    }\n}\nexport class CubismMouthTargetPoint {\n    constructor() {\n        this._mouthTargetValue = 0.0;\n        this._mouthValue = 0.0;\n        this._mouthVelocity = 0.0;\n        this._lastTimeSeconds = 0.0;\n        this._userTimeSeconds = 0.0;\n    }\n    update(deltaTimeSeconds) {\n        this._userTimeSeconds += deltaTimeSeconds;\n        const mouthParamMaxV = 40.0 / 10.0;\n        const maxV = (mouthParamMaxV * 1.0) / FrameRate;\n        if (this._lastTimeSeconds == 0.0) {\n            this._lastTimeSeconds = this._userTimeSeconds;\n            return;\n        }\n        const deltaTimeWeight = (this._userTimeSeconds - this._lastTimeSeconds) * FrameRate;\n        this._lastTimeSeconds = this._userTimeSeconds;\n        const timeToMaxSpeed = 0.15;\n        const frameToMaxSpeed = timeToMaxSpeed * FrameRate;\n        const maxA = (deltaTimeWeight * maxV) / frameToMaxSpeed;\n        const diff = this._mouthTargetValue - this._mouthValue;\n        if (CubismMath.abs(diff) <= Epsilon) {\n            return;\n        }\n        const targetVelocity = diff > 0 ? maxV : -maxV;\n        let acceleration = targetVelocity - this._mouthVelocity;\n        if (CubismMath.abs(acceleration) > maxA) {\n            acceleration = acceleration > 0 ? maxA : -maxA;\n        }\n        this._mouthVelocity += acceleration;\n        const distanceToTarget = CubismMath.abs(diff);\n        const maxVForDistance = 0.5 *\n            (CubismMath.sqrt(maxA * maxA +\n                16.0 * maxA * distanceToTarget -\n                8.0 * maxA * distanceToTarget) -\n                maxA);\n        if (CubismMath.abs(this._mouthVelocity) > maxVForDistance) {\n            this._mouthVelocity =\n                this._mouthVelocity > 0 ? maxVForDistance : -maxVForDistance;\n        }\n        this._mouthValue += this._mouthVelocity;\n        this._mouthValue = CubismMath.max(0.0, CubismMath.min(1.0, this._mouthValue));\n    }\n    getMouthValue() {\n        return this._mouthValue;\n    }\n    setMouthTarget(value) {\n        this._mouthTargetValue = CubismMath.max(0.0, CubismMath.min(1.0, value));\n    }\n    setMouthValueImmediate(value) {\n        this._mouthValue = CubismMath.max(0.0, CubismMath.min(1.0, value));\n        this._mouthTargetValue = this._mouthValue;\n        this._mouthVelocity = 0.0;\n    }\n}\nimport * as $ from './cubismtargetpoint';\nexport var Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismTargetPoint = $.CubismTargetPoint;\n    Live2DCubismFramework.CubismMouthTargetPoint = $.CubismMouthTargetPoint;\n})(Live2DCubismFramework || (Live2DCubismFramework = {}));\n","import { CubismMath } from '../math/cubismmath';\nimport { csmVector } from '../type/csmvector';\nimport { CSM_ASSERT, CubismDebug } from '../utils/cubismdebug';\nexport class ACubismMotion {\n    static delete(motion) {\n        motion.release();\n        motion = null;\n    }\n    constructor() {\n        this.setBeganMotionHandler = (onBeganMotionHandler) => (this._onBeganMotion = onBeganMotionHandler);\n        this.getBeganMotionHandler = () => this._onBeganMotion;\n        this.setFinishedMotionHandler = (onFinishedMotionHandler) => (this._onFinishedMotion = onFinishedMotionHandler);\n        this.getFinishedMotionHandler = () => this._onFinishedMotion;\n        this._fadeInSeconds = -1.0;\n        this._fadeOutSeconds = -1.0;\n        this._weight = 1.0;\n        this._offsetSeconds = 0.0;\n        this._isLoop = false;\n        this._isLoopFadeIn = true;\n        this._previousLoopState = this._isLoop;\n        this._firedEventValues = new csmVector();\n    }\n    release() {\n        this._weight = 0.0;\n    }\n    updateParameters(model, motionQueueEntry, userTimeSeconds) {\n        if (!motionQueueEntry.isAvailable() || motionQueueEntry.isFinished()) {\n            return;\n        }\n        this.setupMotionQueueEntry(motionQueueEntry, userTimeSeconds);\n        const fadeWeight = this.updateFadeWeight(motionQueueEntry, userTimeSeconds);\n        this.doUpdateParameters(model, userTimeSeconds, fadeWeight, motionQueueEntry);\n        if (motionQueueEntry.getEndTime() > 0 &&\n            motionQueueEntry.getEndTime() < userTimeSeconds) {\n            motionQueueEntry.setIsFinished(true);\n        }\n    }\n    setupMotionQueueEntry(motionQueueEntry, userTimeSeconds) {\n        if (motionQueueEntry == null || motionQueueEntry.isStarted()) {\n            return;\n        }\n        if (!motionQueueEntry.isAvailable()) {\n            return;\n        }\n        motionQueueEntry.setIsStarted(true);\n        motionQueueEntry.setStartTime(userTimeSeconds - this._offsetSeconds);\n        motionQueueEntry.setFadeInStartTime(userTimeSeconds);\n        if (motionQueueEntry.getEndTime() < 0.0) {\n            this.adjustEndTime(motionQueueEntry);\n        }\n        if (motionQueueEntry._motion._onBeganMotion) {\n            motionQueueEntry._motion._onBeganMotion(motionQueueEntry._motion);\n        }\n    }\n    updateFadeWeight(motionQueueEntry, userTimeSeconds) {\n        if (motionQueueEntry == null) {\n            CubismDebug.print(LogLevel.LogLevel_Error, 'motionQueueEntry is null.');\n        }\n        let fadeWeight = this._weight;\n        const fadeIn = this._fadeInSeconds == 0.0\n            ? 1.0\n            : CubismMath.getEasingSine((userTimeSeconds - motionQueueEntry.getFadeInStartTime()) /\n                this._fadeInSeconds);\n        const fadeOut = this._fadeOutSeconds == 0.0 || motionQueueEntry.getEndTime() < 0.0\n            ? 1.0\n            : CubismMath.getEasingSine((motionQueueEntry.getEndTime() - userTimeSeconds) /\n                this._fadeOutSeconds);\n        fadeWeight = fadeWeight * fadeIn * fadeOut;\n        motionQueueEntry.setState(userTimeSeconds, fadeWeight);\n        CSM_ASSERT(0.0 <= fadeWeight && fadeWeight <= 1.0);\n        return fadeWeight;\n    }\n    setFadeInTime(fadeInSeconds) {\n        this._fadeInSeconds = fadeInSeconds;\n    }\n    setFadeOutTime(fadeOutSeconds) {\n        this._fadeOutSeconds = fadeOutSeconds;\n    }\n    getFadeOutTime() {\n        return this._fadeOutSeconds;\n    }\n    getFadeInTime() {\n        return this._fadeInSeconds;\n    }\n    setWeight(weight) {\n        this._weight = weight;\n    }\n    getWeight() {\n        return this._weight;\n    }\n    getDuration() {\n        return -1.0;\n    }\n    getLoopDuration() {\n        return -1.0;\n    }\n    setOffsetTime(offsetSeconds) {\n        this._offsetSeconds = offsetSeconds;\n    }\n    setLoop(loop) {\n        this._isLoop = loop;\n    }\n    getLoop() {\n        return this._isLoop;\n    }\n    setLoopFadeIn(loopFadeIn) {\n        this._isLoopFadeIn = loopFadeIn;\n    }\n    getLoopFadeIn() {\n        return this._isLoopFadeIn;\n    }\n    getFiredEvent(beforeCheckTimeSeconds, motionTimeSeconds) {\n        return this._firedEventValues;\n    }\n    isExistModelOpacity() {\n        return false;\n    }\n    getModelOpacityIndex() {\n        return -1;\n    }\n    getModelOpacityId(index) {\n        return null;\n    }\n    getModelOpacityValue() {\n        return 1.0;\n    }\n    adjustEndTime(motionQueueEntry) {\n        const duration = this.getDuration();\n        const endTime = duration <= 0.0 ? -1 : motionQueueEntry.getStartTime() + duration;\n        motionQueueEntry.setEndTime(endTime);\n    }\n}\nimport * as $ from './acubismmotion';\nimport { LogLevel } from '../live2dcubismframework';\nexport var Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.ACubismMotion = $.ACubismMotion;\n})(Live2DCubismFramework || (Live2DCubismFramework = {}));\n","import { CubismFramework } from '../live2dcubismframework';\nimport { csmVector } from '../type/csmvector';\nimport { CubismJson } from '../utils/cubismjson';\nimport { ACubismMotion } from './acubismmotion';\nconst ExpressionKeyFadeIn = 'FadeInTime';\nconst ExpressionKeyFadeOut = 'FadeOutTime';\nconst ExpressionKeyParameters = 'Parameters';\nconst ExpressionKeyId = 'Id';\nconst ExpressionKeyValue = 'Value';\nconst ExpressionKeyBlend = 'Blend';\nconst BlendValueAdd = 'Add';\nconst BlendValueMultiply = 'Multiply';\nconst BlendValueOverwrite = 'Overwrite';\nconst DefaultFadeTime = 1.0;\nexport class CubismExpressionMotion extends ACubismMotion {\n    static create(buffer, size) {\n        const expression = new CubismExpressionMotion();\n        expression.parse(buffer, size);\n        return expression;\n    }\n    doUpdateParameters(model, userTimeSeconds, weight, motionQueueEntry) {\n        for (let i = 0; i < this._parameters.getSize(); ++i) {\n            const parameter = this._parameters.at(i);\n            switch (parameter.blendType) {\n                case ExpressionBlendType.Additive: {\n                    model.addParameterValueById(parameter.parameterId, parameter.value, weight);\n                    break;\n                }\n                case ExpressionBlendType.Multiply: {\n                    model.multiplyParameterValueById(parameter.parameterId, parameter.value, weight);\n                    break;\n                }\n                case ExpressionBlendType.Overwrite: {\n                    model.setParameterValueById(parameter.parameterId, parameter.value, weight);\n                    break;\n                }\n                default:\n                    break;\n            }\n        }\n    }\n    calculateExpressionParameters(model, userTimeSeconds, motionQueueEntry, expressionParameterValues, expressionIndex, fadeWeight) {\n        if (motionQueueEntry == null || expressionParameterValues == null) {\n            return;\n        }\n        if (!motionQueueEntry.isAvailable()) {\n            return;\n        }\n        this._fadeWeight = this.updateFadeWeight(motionQueueEntry, userTimeSeconds);\n        for (let i = 0; i < expressionParameterValues.getSize(); ++i) {\n            const expressionParameterValue = expressionParameterValues.at(i);\n            if (expressionParameterValue.parameterId == null) {\n                continue;\n            }\n            const currentParameterValue = (expressionParameterValue.overwriteValue =\n                model.getParameterValueById(expressionParameterValue.parameterId));\n            const expressionParameters = this.getExpressionParameters();\n            let parameterIndex = -1;\n            for (let j = 0; j < expressionParameters.getSize(); ++j) {\n                if (expressionParameterValue.parameterId !=\n                    expressionParameters.at(j).parameterId) {\n                    continue;\n                }\n                parameterIndex = j;\n                break;\n            }\n            if (parameterIndex < 0) {\n                if (expressionIndex == 0) {\n                    expressionParameterValue.additiveValue =\n                        CubismExpressionMotion.DefaultAdditiveValue;\n                    expressionParameterValue.multiplyValue =\n                        CubismExpressionMotion.DefaultMultiplyValue;\n                    expressionParameterValue.overwriteValue = currentParameterValue;\n                }\n                else {\n                    expressionParameterValue.additiveValue = this.calculateValue(expressionParameterValue.additiveValue, CubismExpressionMotion.DefaultAdditiveValue, fadeWeight);\n                    expressionParameterValue.multiplyValue = this.calculateValue(expressionParameterValue.multiplyValue, CubismExpressionMotion.DefaultMultiplyValue, fadeWeight);\n                    expressionParameterValue.overwriteValue = this.calculateValue(expressionParameterValue.overwriteValue, currentParameterValue, fadeWeight);\n                }\n                continue;\n            }\n            const value = expressionParameters.at(parameterIndex).value;\n            let newAdditiveValue, newMultiplyValue, newOverwriteValue;\n            switch (expressionParameters.at(parameterIndex).blendType) {\n                case ExpressionBlendType.Additive:\n                    newAdditiveValue = value;\n                    newMultiplyValue = CubismExpressionMotion.DefaultMultiplyValue;\n                    newOverwriteValue = currentParameterValue;\n                    break;\n                case ExpressionBlendType.Multiply:\n                    newAdditiveValue = CubismExpressionMotion.DefaultAdditiveValue;\n                    newMultiplyValue = value;\n                    newOverwriteValue = currentParameterValue;\n                    break;\n                case ExpressionBlendType.Overwrite:\n                    newAdditiveValue = CubismExpressionMotion.DefaultAdditiveValue;\n                    newMultiplyValue = CubismExpressionMotion.DefaultMultiplyValue;\n                    newOverwriteValue = value;\n                    break;\n                default:\n                    return;\n            }\n            if (expressionIndex == 0) {\n                expressionParameterValue.additiveValue = newAdditiveValue;\n                expressionParameterValue.multiplyValue = newMultiplyValue;\n                expressionParameterValue.overwriteValue = newOverwriteValue;\n            }\n            else {\n                expressionParameterValue.additiveValue =\n                    expressionParameterValue.additiveValue * (1.0 - fadeWeight) +\n                        newAdditiveValue * fadeWeight;\n                expressionParameterValue.multiplyValue =\n                    expressionParameterValue.multiplyValue * (1.0 - fadeWeight) +\n                        newMultiplyValue * fadeWeight;\n                expressionParameterValue.overwriteValue =\n                    expressionParameterValue.overwriteValue * (1.0 - fadeWeight) +\n                        newOverwriteValue * fadeWeight;\n            }\n        }\n    }\n    getExpressionParameters() {\n        return this._parameters;\n    }\n    getFadeWeight() {\n        return this._fadeWeight;\n    }\n    parse(buffer, size) {\n        const json = CubismJson.create(buffer, size);\n        if (!json) {\n            return;\n        }\n        const root = json.getRoot();\n        this.setFadeInTime(root.getValueByString(ExpressionKeyFadeIn).toFloat(DefaultFadeTime));\n        this.setFadeOutTime(root.getValueByString(ExpressionKeyFadeOut).toFloat(DefaultFadeTime));\n        const parameterCount = root\n            .getValueByString(ExpressionKeyParameters)\n            .getSize();\n        this._parameters.prepareCapacity(parameterCount);\n        for (let i = 0; i < parameterCount; ++i) {\n            const param = root\n                .getValueByString(ExpressionKeyParameters)\n                .getValueByIndex(i);\n            const parameterId = CubismFramework.getIdManager().getId(param.getValueByString(ExpressionKeyId).getRawString());\n            const value = param\n                .getValueByString(ExpressionKeyValue)\n                .toFloat();\n            let blendType;\n            if (param.getValueByString(ExpressionKeyBlend).isNull() ||\n                param.getValueByString(ExpressionKeyBlend).getString() == BlendValueAdd) {\n                blendType = ExpressionBlendType.Additive;\n            }\n            else if (param.getValueByString(ExpressionKeyBlend).getString() ==\n                BlendValueMultiply) {\n                blendType = ExpressionBlendType.Multiply;\n            }\n            else if (param.getValueByString(ExpressionKeyBlend).getString() ==\n                BlendValueOverwrite) {\n                blendType = ExpressionBlendType.Overwrite;\n            }\n            else {\n                blendType = ExpressionBlendType.Additive;\n            }\n            const item = new ExpressionParameter();\n            item.parameterId = parameterId;\n            item.blendType = blendType;\n            item.value = value;\n            this._parameters.pushBack(item);\n        }\n        CubismJson.delete(json);\n    }\n    calculateValue(source, destination, fadeWeight) {\n        return source * (1.0 - fadeWeight) + destination * fadeWeight;\n    }\n    constructor() {\n        super();\n        this._parameters = new csmVector();\n        this._fadeWeight = 0.0;\n    }\n}\nCubismExpressionMotion.DefaultAdditiveValue = 0.0;\nCubismExpressionMotion.DefaultMultiplyValue = 1.0;\nexport var ExpressionBlendType;\n(function (ExpressionBlendType) {\n    ExpressionBlendType[ExpressionBlendType[\"Additive\"] = 0] = \"Additive\";\n    ExpressionBlendType[ExpressionBlendType[\"Multiply\"] = 1] = \"Multiply\";\n    ExpressionBlendType[ExpressionBlendType[\"Overwrite\"] = 2] = \"Overwrite\";\n})(ExpressionBlendType || (ExpressionBlendType = {}));\nexport class ExpressionParameter {\n}\nimport * as $ from './cubismexpressionmotion';\nexport var Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismExpressionMotion = $.CubismExpressionMotion;\n    Live2DCubismFramework.ExpressionBlendType = $.ExpressionBlendType;\n    Live2DCubismFramework.ExpressionParameter = $.ExpressionParameter;\n})(Live2DCubismFramework || (Live2DCubismFramework = {}));\n","import { ACubismMotion } from './acubismmotion';\nexport class CubismMotionQueueEntry {\n    constructor() {\n        this._autoDelete = false;\n        this._motion = null;\n        this._available = true;\n        this._finished = false;\n        this._started = false;\n        this._startTimeSeconds = -1.0;\n        this._fadeInStartTimeSeconds = 0.0;\n        this._endTimeSeconds = -1.0;\n        this._stateTimeSeconds = 0.0;\n        this._stateWeight = 0.0;\n        this._lastEventCheckSeconds = 0.0;\n        this._motionQueueEntryHandle = this;\n        this._fadeOutSeconds = 0.0;\n        this._isTriggeredFadeOut = false;\n    }\n    release() {\n        if (this._autoDelete && this._motion) {\n            ACubismMotion.delete(this._motion);\n        }\n    }\n    setFadeOut(fadeOutSeconds) {\n        this._fadeOutSeconds = fadeOutSeconds;\n        this._isTriggeredFadeOut = true;\n    }\n    startFadeOut(fadeOutSeconds, userTimeSeconds) {\n        const newEndTimeSeconds = userTimeSeconds + fadeOutSeconds;\n        this._isTriggeredFadeOut = true;\n        if (this._endTimeSeconds < 0.0 ||\n            newEndTimeSeconds < this._endTimeSeconds) {\n            this._endTimeSeconds = newEndTimeSeconds;\n        }\n    }\n    isFinished() {\n        return this._finished;\n    }\n    isStarted() {\n        return this._started;\n    }\n    getStartTime() {\n        return this._startTimeSeconds;\n    }\n    getFadeInStartTime() {\n        return this._fadeInStartTimeSeconds;\n    }\n    getEndTime() {\n        return this._endTimeSeconds;\n    }\n    setStartTime(startTime) {\n        this._startTimeSeconds = startTime;\n    }\n    setFadeInStartTime(startTime) {\n        this._fadeInStartTimeSeconds = startTime;\n    }\n    setEndTime(endTime) {\n        this._endTimeSeconds = endTime;\n    }\n    setIsFinished(f) {\n        this._finished = f;\n    }\n    setIsStarted(f) {\n        this._started = f;\n    }\n    isAvailable() {\n        return this._available;\n    }\n    setIsAvailable(v) {\n        this._available = v;\n    }\n    setState(timeSeconds, weight) {\n        this._stateTimeSeconds = timeSeconds;\n        this._stateWeight = weight;\n    }\n    getStateTime() {\n        return this._stateTimeSeconds;\n    }\n    getStateWeight() {\n        return this._stateWeight;\n    }\n    getLastCheckEventSeconds() {\n        return this._lastEventCheckSeconds;\n    }\n    setLastCheckEventSeconds(checkSeconds) {\n        this._lastEventCheckSeconds = checkSeconds;\n    }\n    isTriggeredFadeOut() {\n        return this._isTriggeredFadeOut;\n    }\n    getFadeOutSeconds() {\n        return this._fadeOutSeconds;\n    }\n    getCubismMotion() {\n        return this._motion;\n    }\n}\nimport * as $ from './cubismmotionqueueentry';\nexport var Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismMotionQueueEntry = $.CubismMotionQueueEntry;\n})(Live2DCubismFramework || (Live2DCubismFramework = {}));\n","import { CubismMotionQueueEntry } from './cubismmotionqueueentry';\nimport { csmVector } from '../type/csmvector';\nexport class CubismMotionQueueManager {\n    constructor() {\n        this._userTimeSeconds = 0.0;\n        this._eventCallBack = null;\n        this._eventCustomData = null;\n        this._motions = new csmVector();\n    }\n    release() {\n        for (let i = 0; i < this._motions.getSize(); ++i) {\n            if (this._motions.at(i)) {\n                this._motions.at(i).release();\n                this._motions.set(i, null);\n            }\n        }\n        this._motions = null;\n    }\n    startMotion(motion, autoDelete, userTimeSeconds) {\n        if (motion == null) {\n            return InvalidMotionQueueEntryHandleValue;\n        }\n        let motionQueueEntry = null;\n        for (let i = 0; i < this._motions.getSize(); ++i) {\n            motionQueueEntry = this._motions.at(i);\n            if (motionQueueEntry == null) {\n                continue;\n            }\n            motionQueueEntry.setFadeOut(motionQueueEntry._motion.getFadeOutTime());\n        }\n        motionQueueEntry = new CubismMotionQueueEntry();\n        motionQueueEntry._autoDelete = autoDelete;\n        motionQueueEntry._motion = motion;\n        this._motions.pushBack(motionQueueEntry);\n        return motionQueueEntry._motionQueueEntryHandle;\n    }\n    isFinished() {\n        for (let ite = this._motions.begin(); ite.notEqual(this._motions.end());) {\n            let motionQueueEntry = ite.ptr();\n            if (motionQueueEntry == null) {\n                ite = this._motions.erase(ite);\n                continue;\n            }\n            const motion = motionQueueEntry._motion;\n            if (motion == null) {\n                motionQueueEntry.release();\n                motionQueueEntry = null;\n                ite = this._motions.erase(ite);\n                continue;\n            }\n            if (!motionQueueEntry.isFinished()) {\n                return false;\n            }\n            else {\n                ite.preIncrement();\n            }\n        }\n        return true;\n    }\n    isFinishedByHandle(motionQueueEntryNumber) {\n        for (let ite = this._motions.begin(); ite.notEqual(this._motions.end()); ite.increment()) {\n            const motionQueueEntry = ite.ptr();\n            if (motionQueueEntry == null) {\n                continue;\n            }\n            if (motionQueueEntry._motionQueueEntryHandle == motionQueueEntryNumber &&\n                !motionQueueEntry.isFinished()) {\n                return false;\n            }\n        }\n        return true;\n    }\n    stopAllMotions() {\n        for (let ite = this._motions.begin(); ite.notEqual(this._motions.end());) {\n            let motionQueueEntry = ite.ptr();\n            if (motionQueueEntry == null) {\n                ite = this._motions.erase(ite);\n                continue;\n            }\n            motionQueueEntry.release();\n            motionQueueEntry = null;\n            ite = this._motions.erase(ite);\n        }\n    }\n    getCubismMotionQueueEntries() {\n        return this._motions;\n    }\n    getCubismMotionQueueEntry(motionQueueEntryNumber) {\n        for (let ite = this._motions.begin(); ite.notEqual(this._motions.end()); ite.preIncrement()) {\n            const motionQueueEntry = ite.ptr();\n            if (motionQueueEntry == null) {\n                continue;\n            }\n            if (motionQueueEntry._motionQueueEntryHandle == motionQueueEntryNumber) {\n                return motionQueueEntry;\n            }\n        }\n        return null;\n    }\n    setEventCallback(callback, customData = null) {\n        this._eventCallBack = callback;\n        this._eventCustomData = customData;\n    }\n    doUpdateMotion(model, userTimeSeconds) {\n        let updated = false;\n        for (let ite = this._motions.begin(); ite.notEqual(this._motions.end());) {\n            let motionQueueEntry = ite.ptr();\n            if (motionQueueEntry == null) {\n                ite = this._motions.erase(ite);\n                continue;\n            }\n            const motion = motionQueueEntry._motion;\n            if (motion == null) {\n                motionQueueEntry.release();\n                motionQueueEntry = null;\n                ite = this._motions.erase(ite);\n                continue;\n            }\n            motion.updateParameters(model, motionQueueEntry, userTimeSeconds);\n            updated = true;\n            const firedList = motion.getFiredEvent(motionQueueEntry.getLastCheckEventSeconds() -\n                motionQueueEntry.getStartTime(), userTimeSeconds - motionQueueEntry.getStartTime());\n            for (let i = 0; i < firedList.getSize(); ++i) {\n                this._eventCallBack(this, firedList.at(i), this._eventCustomData);\n            }\n            motionQueueEntry.setLastCheckEventSeconds(userTimeSeconds);\n            if (motionQueueEntry.isFinished()) {\n                motionQueueEntry.release();\n                motionQueueEntry = null;\n                ite = this._motions.erase(ite);\n            }\n            else {\n                if (motionQueueEntry.isTriggeredFadeOut()) {\n                    motionQueueEntry.startFadeOut(motionQueueEntry.getFadeOutSeconds(), userTimeSeconds);\n                }\n                ite.preIncrement();\n            }\n        }\n        return updated;\n    }\n}\nexport const InvalidMotionQueueEntryHandleValue = -1;\nimport * as $ from './cubismmotionqueuemanager';\nexport var Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismMotionQueueManager = $.CubismMotionQueueManager;\n    Live2DCubismFramework.InvalidMotionQueueEntryHandleValue = $.InvalidMotionQueueEntryHandleValue;\n})(Live2DCubismFramework || (Live2DCubismFramework = {}));\n","import { csmDelete } from '../live2dcubismframework';\nimport { csmVector } from '../type/csmvector';\nimport { CubismExpressionMotion } from './cubismexpressionmotion';\nimport { CubismMotionQueueManager } from './cubismmotionqueuemanager';\nimport { CubismLogInfo } from '../utils/cubismdebug';\nexport class ExpressionParameterValue {\n}\nexport class CubismExpressionMotionManager extends CubismMotionQueueManager {\n    constructor() {\n        super();\n        this._currentPriority = 0;\n        this._reservePriority = 0;\n        this._expressionParameterValues = new csmVector();\n        this._fadeWeights = new csmVector();\n    }\n    release() {\n        if (this._expressionParameterValues) {\n            csmDelete(this._expressionParameterValues);\n            this._expressionParameterValues = null;\n        }\n        if (this._fadeWeights) {\n            csmDelete(this._fadeWeights);\n            this._fadeWeights = null;\n        }\n    }\n    getCurrentPriority() {\n        CubismLogInfo('CubismExpressionMotionManager.getCurrentPriority() is deprecated because a priority value is not actually used during expression motion playback.');\n        return this._currentPriority;\n    }\n    getReservePriority() {\n        CubismLogInfo('CubismExpressionMotionManager.getReservePriority() is deprecated because a priority value is not actually used during expression motion playback.');\n        return this._reservePriority;\n    }\n    getFadeWeight(index) {\n        if (index < 0 ||\n            this._fadeWeights.getSize() < 1 ||\n            index >= this._fadeWeights.getSize()) {\n            console.warn('Failed to get the fade weight value. The element at that index does not exist.');\n            return -1;\n        }\n        return this._fadeWeights.at(index);\n    }\n    setFadeWeight(index, expressionFadeWeight) {\n        if (index < 0 ||\n            this._fadeWeights.getSize() < 1 ||\n            this._fadeWeights.getSize() <= index) {\n            console.warn('Failed to set the fade weight value. The element at that index does not exist.');\n            return;\n        }\n        this._fadeWeights.set(index, expressionFadeWeight);\n    }\n    setReservePriority(priority) {\n        CubismLogInfo('CubismExpressionMotionManager.setReservePriority() is deprecated because a priority value is not actually used during expression motion playback.');\n        this._reservePriority = priority;\n    }\n    startMotionPriority(motion, autoDelete, priority) {\n        CubismLogInfo('CubismExpressionMotionManager.startMotionPriority() is deprecated because a priority value is not actually used during expression motion playback.');\n        if (priority == this.getReservePriority()) {\n            this.setReservePriority(0);\n        }\n        this._currentPriority = priority;\n        return this.startMotion(motion, autoDelete);\n    }\n    updateMotion(model, deltaTimeSeconds) {\n        this._userTimeSeconds += deltaTimeSeconds;\n        let updated = false;\n        const motions = this.getCubismMotionQueueEntries();\n        let expressionWeight = 0.0;\n        let expressionIndex = 0;\n        if (this._fadeWeights.getSize() !== motions.getSize()) {\n            const difference = motions.getSize() - this._fadeWeights.getSize();\n            for (let i = 0; i < difference; i++) {\n                this._fadeWeights.pushBack(0.0);\n            }\n        }\n        for (let ite = this._motions.begin(); ite.notEqual(this._motions.end());) {\n            const motionQueueEntry = ite.ptr();\n            if (motionQueueEntry == null) {\n                ite = motions.erase(ite);\n                continue;\n            }\n            const expressionMotion = (motionQueueEntry.getCubismMotion());\n            if (expressionMotion == null) {\n                csmDelete(motionQueueEntry);\n                ite = motions.erase(ite);\n                continue;\n            }\n            const expressionParameters = expressionMotion.getExpressionParameters();\n            if (motionQueueEntry.isAvailable()) {\n                for (let i = 0; i < expressionParameters.getSize(); ++i) {\n                    if (expressionParameters.at(i).parameterId == null) {\n                        continue;\n                    }\n                    let index = -1;\n                    for (let j = 0; j < this._expressionParameterValues.getSize(); ++j) {\n                        if (this._expressionParameterValues.at(j).parameterId !=\n                            expressionParameters.at(i).parameterId) {\n                            continue;\n                        }\n                        index = j;\n                        break;\n                    }\n                    if (index >= 0) {\n                        continue;\n                    }\n                    const item = new ExpressionParameterValue();\n                    item.parameterId = expressionParameters.at(i).parameterId;\n                    item.additiveValue = CubismExpressionMotion.DefaultAdditiveValue;\n                    item.multiplyValue = CubismExpressionMotion.DefaultMultiplyValue;\n                    item.overwriteValue = model.getParameterValueById(item.parameterId);\n                    this._expressionParameterValues.pushBack(item);\n                }\n            }\n            expressionMotion.setupMotionQueueEntry(motionQueueEntry, this._userTimeSeconds);\n            this.setFadeWeight(expressionIndex, expressionMotion.updateFadeWeight(motionQueueEntry, this._userTimeSeconds));\n            expressionMotion.calculateExpressionParameters(model, this._userTimeSeconds, motionQueueEntry, this._expressionParameterValues, expressionIndex, this.getFadeWeight(expressionIndex));\n            expressionWeight +=\n                expressionMotion.getFadeInTime() == 0.0\n                    ? 1.0\n                    : CubismMath.getEasingSine((this._userTimeSeconds - motionQueueEntry.getFadeInStartTime()) /\n                        expressionMotion.getFadeInTime());\n            updated = true;\n            if (motionQueueEntry.isTriggeredFadeOut()) {\n                motionQueueEntry.startFadeOut(motionQueueEntry.getFadeOutSeconds(), this._userTimeSeconds);\n            }\n            ite.preIncrement();\n            ++expressionIndex;\n        }\n        if (motions.getSize() > 1) {\n            const latestFadeWeight = this.getFadeWeight(this._fadeWeights.getSize() - 1);\n            if (latestFadeWeight >= 1.0) {\n                for (let i = motions.getSize() - 2; i >= 0; --i) {\n                    const motionQueueEntry = motions.at(i);\n                    csmDelete(motionQueueEntry);\n                    motions.remove(i);\n                    this._fadeWeights.remove(i);\n                }\n            }\n        }\n        if (expressionWeight > 1.0) {\n            expressionWeight = 1.0;\n        }\n        for (let i = 0; i < this._expressionParameterValues.getSize(); ++i) {\n            const expressionParameterValue = this._expressionParameterValues.at(i);\n            model.setParameterValueById(expressionParameterValue.parameterId, (expressionParameterValue.overwriteValue +\n                expressionParameterValue.additiveValue) *\n                expressionParameterValue.multiplyValue, expressionWeight);\n            expressionParameterValue.additiveValue =\n                CubismExpressionMotion.DefaultAdditiveValue;\n            expressionParameterValue.multiplyValue =\n                CubismExpressionMotion.DefaultMultiplyValue;\n        }\n        return updated;\n    }\n}\nimport * as $ from './cubismexpressionmotionmanager';\nimport { CubismMath } from '../math/cubismmath';\nexport var Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismExpressionMotionManager = $.CubismExpressionMotionManager;\n})(Live2DCubismFramework || (Live2DCubismFramework = {}));\n","import { csmVector } from '../type/csmvector';\nexport var CubismMotionCurveTarget;\n(function (CubismMotionCurveTarget) {\n    CubismMotionCurveTarget[CubismMotionCurveTarget[\"CubismMotionCurveTarget_Model\"] = 0] = \"CubismMotionCurveTarget_Model\";\n    CubismMotionCurveTarget[CubismMotionCurveTarget[\"CubismMotionCurveTarget_Parameter\"] = 1] = \"CubismMotionCurveTarget_Parameter\";\n    CubismMotionCurveTarget[CubismMotionCurveTarget[\"CubismMotionCurveTarget_PartOpacity\"] = 2] = \"CubismMotionCurveTarget_PartOpacity\";\n})(CubismMotionCurveTarget || (CubismMotionCurveTarget = {}));\nexport var CubismMotionSegmentType;\n(function (CubismMotionSegmentType) {\n    CubismMotionSegmentType[CubismMotionSegmentType[\"CubismMotionSegmentType_Linear\"] = 0] = \"CubismMotionSegmentType_Linear\";\n    CubismMotionSegmentType[CubismMotionSegmentType[\"CubismMotionSegmentType_Bezier\"] = 1] = \"CubismMotionSegmentType_Bezier\";\n    CubismMotionSegmentType[CubismMotionSegmentType[\"CubismMotionSegmentType_Stepped\"] = 2] = \"CubismMotionSegmentType_Stepped\";\n    CubismMotionSegmentType[CubismMotionSegmentType[\"CubismMotionSegmentType_InverseStepped\"] = 3] = \"CubismMotionSegmentType_InverseStepped\";\n})(CubismMotionSegmentType || (CubismMotionSegmentType = {}));\nexport class CubismMotionPoint {\n    constructor() {\n        this.time = 0.0;\n        this.value = 0.0;\n    }\n}\nexport class CubismMotionSegment {\n    constructor() {\n        this.evaluate = null;\n        this.basePointIndex = 0;\n        this.segmentType = 0;\n    }\n}\nexport class CubismMotionCurve {\n    constructor() {\n        this.type = CubismMotionCurveTarget.CubismMotionCurveTarget_Model;\n        this.segmentCount = 0;\n        this.baseSegmentIndex = 0;\n        this.fadeInTime = 0.0;\n        this.fadeOutTime = 0.0;\n    }\n}\nexport class CubismMotionEvent {\n    constructor() {\n        this.fireTime = 0.0;\n    }\n}\nexport class CubismMotionData {\n    constructor() {\n        this.duration = 0.0;\n        this.loop = false;\n        this.curveCount = 0;\n        this.eventCount = 0;\n        this.fps = 0.0;\n        this.curves = new csmVector();\n        this.segments = new csmVector();\n        this.points = new csmVector();\n        this.events = new csmVector();\n    }\n}\nimport * as $ from './cubismmotioninternal';\nexport var Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismMotionCurve = $.CubismMotionCurve;\n    Live2DCubismFramework.CubismMotionCurveTarget = $.CubismMotionCurveTarget;\n    Live2DCubismFramework.CubismMotionData = $.CubismMotionData;\n    Live2DCubismFramework.CubismMotionEvent = $.CubismMotionEvent;\n    Live2DCubismFramework.CubismMotionPoint = $.CubismMotionPoint;\n    Live2DCubismFramework.CubismMotionSegment = $.CubismMotionSegment;\n    Live2DCubismFramework.CubismMotionSegmentType = $.CubismMotionSegmentType;\n})(Live2DCubismFramework || (Live2DCubismFramework = {}));\n","import { CubismFramework } from '../live2dcubismframework';\nimport { csmString } from '../type/csmstring';\nimport { CSM_ASSERT, CubismLogWarning } from '../utils/cubismdebug';\nimport { CubismJson } from '../utils/cubismjson';\nimport { CubismMotionSegmentType } from './cubismmotioninternal';\nconst Meta = 'Meta';\nconst Duration = 'Duration';\nconst Loop = 'Loop';\nconst AreBeziersRestricted = 'AreBeziersRestricted';\nconst CurveCount = 'CurveCount';\nconst Fps = 'Fps';\nconst TotalSegmentCount = 'TotalSegmentCount';\nconst TotalPointCount = 'TotalPointCount';\nconst Curves = 'Curves';\nconst Target = 'Target';\nconst Id = 'Id';\nconst FadeInTime = 'FadeInTime';\nconst FadeOutTime = 'FadeOutTime';\nconst Segments = 'Segments';\nconst UserData = 'UserData';\nconst UserDataCount = 'UserDataCount';\nconst TotalUserDataSize = 'TotalUserDataSize';\nconst Time = 'Time';\nconst Value = 'Value';\nexport class CubismMotionJson {\n    constructor(buffer, size) {\n        this._json = CubismJson.create(buffer, size);\n    }\n    release() {\n        CubismJson.delete(this._json);\n    }\n    getMotionDuration() {\n        return this._json\n            .getRoot()\n            .getValueByString(Meta)\n            .getValueByString(Duration)\n            .toFloat();\n    }\n    isMotionLoop() {\n        return this._json\n            .getRoot()\n            .getValueByString(Meta)\n            .getValueByString(Loop)\n            .toBoolean();\n    }\n    hasConsistency() {\n        let result = true;\n        if (!this._json || !this._json.getRoot()) {\n            return false;\n        }\n        const actualCurveListSize = this._json\n            .getRoot()\n            .getValueByString(Curves)\n            .getVector()\n            .getSize();\n        let actualTotalSegmentCount = 0;\n        let actualTotalPointCount = 0;\n        for (let curvePosition = 0; curvePosition < actualCurveListSize; ++curvePosition) {\n            for (let segmentPosition = 0; segmentPosition < this.getMotionCurveSegmentCount(curvePosition);) {\n                if (segmentPosition == 0) {\n                    actualTotalPointCount += 1;\n                    segmentPosition += 2;\n                }\n                const segment = this.getMotionCurveSegment(curvePosition, segmentPosition);\n                switch (segment) {\n                    case CubismMotionSegmentType.CubismMotionSegmentType_Linear:\n                        actualTotalPointCount += 1;\n                        segmentPosition += 3;\n                        break;\n                    case CubismMotionSegmentType.CubismMotionSegmentType_Bezier:\n                        actualTotalPointCount += 3;\n                        segmentPosition += 7;\n                        break;\n                    case CubismMotionSegmentType.CubismMotionSegmentType_Stepped:\n                        actualTotalPointCount += 1;\n                        segmentPosition += 3;\n                        break;\n                    case CubismMotionSegmentType.CubismMotionSegmentType_InverseStepped:\n                        actualTotalPointCount += 1;\n                        segmentPosition += 3;\n                        break;\n                    default:\n                        CSM_ASSERT(0);\n                        break;\n                }\n                ++actualTotalSegmentCount;\n            }\n        }\n        if (actualCurveListSize != this.getMotionCurveCount()) {\n            CubismLogWarning('The number of curves does not match the metadata.');\n            result = false;\n        }\n        if (actualTotalSegmentCount != this.getMotionTotalSegmentCount()) {\n            CubismLogWarning('The number of segment does not match the metadata.');\n            result = false;\n        }\n        if (actualTotalPointCount != this.getMotionTotalPointCount()) {\n            CubismLogWarning('The number of point does not match the metadata.');\n            result = false;\n        }\n        return result;\n    }\n    getEvaluationOptionFlag(flagType) {\n        if (EvaluationOptionFlag.EvaluationOptionFlag_AreBeziersRistricted == flagType) {\n            return this._json\n                .getRoot()\n                .getValueByString(Meta)\n                .getValueByString(AreBeziersRestricted)\n                .toBoolean();\n        }\n        return false;\n    }\n    getMotionCurveCount() {\n        return this._json\n            .getRoot()\n            .getValueByString(Meta)\n            .getValueByString(CurveCount)\n            .toInt();\n    }\n    getMotionFps() {\n        return this._json\n            .getRoot()\n            .getValueByString(Meta)\n            .getValueByString(Fps)\n            .toFloat();\n    }\n    getMotionTotalSegmentCount() {\n        return this._json\n            .getRoot()\n            .getValueByString(Meta)\n            .getValueByString(TotalSegmentCount)\n            .toInt();\n    }\n    getMotionTotalPointCount() {\n        return this._json\n            .getRoot()\n            .getValueByString(Meta)\n            .getValueByString(TotalPointCount)\n            .toInt();\n    }\n    isExistMotionFadeInTime() {\n        return !this._json\n            .getRoot()\n            .getValueByString(Meta)\n            .getValueByString(FadeInTime)\n            .isNull();\n    }\n    isExistMotionFadeOutTime() {\n        return !this._json\n            .getRoot()\n            .getValueByString(Meta)\n            .getValueByString(FadeOutTime)\n            .isNull();\n    }\n    getMotionFadeInTime() {\n        return this._json\n            .getRoot()\n            .getValueByString(Meta)\n            .getValueByString(FadeInTime)\n            .toFloat();\n    }\n    getMotionFadeOutTime() {\n        return this._json\n            .getRoot()\n            .getValueByString(Meta)\n            .getValueByString(FadeOutTime)\n            .toFloat();\n    }\n    getMotionCurveTarget(curveIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(Curves)\n            .getValueByIndex(curveIndex)\n            .getValueByString(Target)\n            .getRawString();\n    }\n    getMotionCurveId(curveIndex) {\n        return CubismFramework.getIdManager().getId(this._json\n            .getRoot()\n            .getValueByString(Curves)\n            .getValueByIndex(curveIndex)\n            .getValueByString(Id)\n            .getRawString());\n    }\n    isExistMotionCurveFadeInTime(curveIndex) {\n        return !this._json\n            .getRoot()\n            .getValueByString(Curves)\n            .getValueByIndex(curveIndex)\n            .getValueByString(FadeInTime)\n            .isNull();\n    }\n    isExistMotionCurveFadeOutTime(curveIndex) {\n        return !this._json\n            .getRoot()\n            .getValueByString(Curves)\n            .getValueByIndex(curveIndex)\n            .getValueByString(FadeOutTime)\n            .isNull();\n    }\n    getMotionCurveFadeInTime(curveIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(Curves)\n            .getValueByIndex(curveIndex)\n            .getValueByString(FadeInTime)\n            .toFloat();\n    }\n    getMotionCurveFadeOutTime(curveIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(Curves)\n            .getValueByIndex(curveIndex)\n            .getValueByString(FadeOutTime)\n            .toFloat();\n    }\n    getMotionCurveSegmentCount(curveIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(Curves)\n            .getValueByIndex(curveIndex)\n            .getValueByString(Segments)\n            .getVector()\n            .getSize();\n    }\n    getMotionCurveSegment(curveIndex, segmentIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(Curves)\n            .getValueByIndex(curveIndex)\n            .getValueByString(Segments)\n            .getValueByIndex(segmentIndex)\n            .toFloat();\n    }\n    getEventCount() {\n        return this._json\n            .getRoot()\n            .getValueByString(Meta)\n            .getValueByString(UserDataCount)\n            .toInt();\n    }\n    getTotalEventValueSize() {\n        return this._json\n            .getRoot()\n            .getValueByString(Meta)\n            .getValueByString(TotalUserDataSize)\n            .toInt();\n    }\n    getEventTime(userDataIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(UserData)\n            .getValueByIndex(userDataIndex)\n            .getValueByString(Time)\n            .toFloat();\n    }\n    getEventValue(userDataIndex) {\n        return new csmString(this._json\n            .getRoot()\n            .getValueByString(UserData)\n            .getValueByIndex(userDataIndex)\n            .getValueByString(Value)\n            .getRawString());\n    }\n}\nexport var EvaluationOptionFlag;\n(function (EvaluationOptionFlag) {\n    EvaluationOptionFlag[EvaluationOptionFlag[\"EvaluationOptionFlag_AreBeziersRistricted\"] = 0] = \"EvaluationOptionFlag_AreBeziersRistricted\";\n})(EvaluationOptionFlag || (EvaluationOptionFlag = {}));\nimport * as $ from './cubismmotionjson';\nexport var Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismMotionJson = $.CubismMotionJson;\n})(Live2DCubismFramework || (Live2DCubismFramework = {}));\n","import { csmDelete, CubismFramework } from '../live2dcubismframework';\nimport { CubismMath } from '../math/cubismmath';\nimport { csmString } from '../type/csmstring';\nimport { CSM_ASSERT, CubismLogDebug, CubismLogError, CubismLogWarning } from '../utils/cubismdebug';\nimport { ACubismMotion } from './acubismmotion';\nimport { CubismMotionCurve, CubismMotionCurveTarget, CubismMotionData, CubismMotionEvent, CubismMotionPoint, CubismMotionSegment, CubismMotionSegmentType } from './cubismmotioninternal';\nimport { CubismMotionJson, EvaluationOptionFlag } from './cubismmotionjson';\nconst EffectNameEyeBlink = 'EyeBlink';\nconst EffectNameLipSync = 'LipSync';\nconst TargetNameModel = 'Model';\nconst TargetNameParameter = 'Parameter';\nconst TargetNamePartOpacity = 'PartOpacity';\nconst IdNameOpacity = 'Opacity';\nconst UseOldBeziersCurveMotion = false;\nfunction lerpPoints(a, b, t) {\n    const result = new CubismMotionPoint();\n    result.time = a.time + (b.time - a.time) * t;\n    result.value = a.value + (b.value - a.value) * t;\n    return result;\n}\nfunction linearEvaluate(points, time) {\n    let t = (time - points[0].time) / (points[1].time - points[0].time);\n    if (t < 0.0) {\n        t = 0.0;\n    }\n    return points[0].value + (points[1].value - points[0].value) * t;\n}\nfunction bezierEvaluate(points, time) {\n    let t = (time - points[0].time) / (points[3].time - points[0].time);\n    if (t < 0.0) {\n        t = 0.0;\n    }\n    const p01 = lerpPoints(points[0], points[1], t);\n    const p12 = lerpPoints(points[1], points[2], t);\n    const p23 = lerpPoints(points[2], points[3], t);\n    const p012 = lerpPoints(p01, p12, t);\n    const p123 = lerpPoints(p12, p23, t);\n    return lerpPoints(p012, p123, t).value;\n}\nfunction bezierEvaluateBinarySearch(points, time) {\n    const xError = 0.01;\n    const x = time;\n    let x1 = points[0].time;\n    let x2 = points[3].time;\n    let cx1 = points[1].time;\n    let cx2 = points[2].time;\n    let ta = 0.0;\n    let tb = 1.0;\n    let t = 0.0;\n    let i = 0;\n    for (let var33 = true; i < 20; ++i) {\n        if (x < x1 + xError) {\n            t = ta;\n            break;\n        }\n        if (x2 - xError < x) {\n            t = tb;\n            break;\n        }\n        let centerx = (cx1 + cx2) * 0.5;\n        cx1 = (x1 + cx1) * 0.5;\n        cx2 = (x2 + cx2) * 0.5;\n        const ctrlx12 = (cx1 + centerx) * 0.5;\n        const ctrlx21 = (cx2 + centerx) * 0.5;\n        centerx = (ctrlx12 + ctrlx21) * 0.5;\n        if (x < centerx) {\n            tb = (ta + tb) * 0.5;\n            if (centerx - xError < x) {\n                t = tb;\n                break;\n            }\n            x2 = centerx;\n            cx2 = ctrlx12;\n        }\n        else {\n            ta = (ta + tb) * 0.5;\n            if (x < centerx + xError) {\n                t = ta;\n                break;\n            }\n            x1 = centerx;\n            cx1 = ctrlx21;\n        }\n    }\n    if (i == 20) {\n        t = (ta + tb) * 0.5;\n    }\n    if (t < 0.0) {\n        t = 0.0;\n    }\n    if (t > 1.0) {\n        t = 1.0;\n    }\n    const p01 = lerpPoints(points[0], points[1], t);\n    const p12 = lerpPoints(points[1], points[2], t);\n    const p23 = lerpPoints(points[2], points[3], t);\n    const p012 = lerpPoints(p01, p12, t);\n    const p123 = lerpPoints(p12, p23, t);\n    return lerpPoints(p012, p123, t).value;\n}\nfunction bezierEvaluateCardanoInterpretation(points, time) {\n    const x = time;\n    const x1 = points[0].time;\n    const x2 = points[3].time;\n    const cx1 = points[1].time;\n    const cx2 = points[2].time;\n    const a = x2 - 3.0 * cx2 + 3.0 * cx1 - x1;\n    const b = 3.0 * cx2 - 6.0 * cx1 + 3.0 * x1;\n    const c = 3.0 * cx1 - 3.0 * x1;\n    const d = x1 - x;\n    const t = CubismMath.cardanoAlgorithmForBezier(a, b, c, d);\n    const p01 = lerpPoints(points[0], points[1], t);\n    const p12 = lerpPoints(points[1], points[2], t);\n    const p23 = lerpPoints(points[2], points[3], t);\n    const p012 = lerpPoints(p01, p12, t);\n    const p123 = lerpPoints(p12, p23, t);\n    return lerpPoints(p012, p123, t).value;\n}\nfunction steppedEvaluate(points, time) {\n    return points[0].value;\n}\nfunction inverseSteppedEvaluate(points, time) {\n    return points[1].value;\n}\nfunction evaluateCurve(motionData, index, time, isCorrection, endTime) {\n    const curve = motionData.curves.at(index);\n    let target = -1;\n    const totalSegmentCount = curve.baseSegmentIndex + curve.segmentCount;\n    let pointPosition = 0;\n    for (let i = curve.baseSegmentIndex; i < totalSegmentCount; ++i) {\n        pointPosition =\n            motionData.segments.at(i).basePointIndex +\n                (motionData.segments.at(i).segmentType ==\n                    CubismMotionSegmentType.CubismMotionSegmentType_Bezier\n                    ? 3\n                    : 1);\n        if (motionData.points.at(pointPosition).time > time) {\n            target = i;\n            break;\n        }\n    }\n    if (target == -1) {\n        if (isCorrection && time < endTime) {\n            return correctEndPoint(motionData, totalSegmentCount - 1, motionData.segments.at(curve.baseSegmentIndex).basePointIndex, pointPosition, time, endTime);\n        }\n        return motionData.points.at(pointPosition).value;\n    }\n    const segment = motionData.segments.at(target);\n    return segment.evaluate(motionData.points.get(segment.basePointIndex), time);\n}\nfunction correctEndPoint(motionData, segmentIndex, beginIndex, endIndex, time, endTime) {\n    const motionPoint = [\n        new CubismMotionPoint(),\n        new CubismMotionPoint()\n    ];\n    {\n        const src = motionData.points.at(endIndex);\n        motionPoint[0].time = src.time;\n        motionPoint[0].value = src.value;\n    }\n    {\n        const src = motionData.points.at(beginIndex);\n        motionPoint[1].time = endTime;\n        motionPoint[1].value = src.value;\n    }\n    switch (motionData.segments.at(segmentIndex).segmentType) {\n        case CubismMotionSegmentType.CubismMotionSegmentType_Linear:\n        case CubismMotionSegmentType.CubismMotionSegmentType_Bezier:\n        default:\n            return linearEvaluate(motionPoint, time);\n        case CubismMotionSegmentType.CubismMotionSegmentType_Stepped:\n            return steppedEvaluate(motionPoint, time);\n        case CubismMotionSegmentType.CubismMotionSegmentType_InverseStepped:\n            return inverseSteppedEvaluate(motionPoint, time);\n    }\n}\nexport var MotionBehavior;\n(function (MotionBehavior) {\n    MotionBehavior[MotionBehavior[\"MotionBehavior_V1\"] = 0] = \"MotionBehavior_V1\";\n    MotionBehavior[MotionBehavior[\"MotionBehavior_V2\"] = 1] = \"MotionBehavior_V2\";\n})(MotionBehavior || (MotionBehavior = {}));\nexport class CubismMotion extends ACubismMotion {\n    static create(buffer, size, onFinishedMotionHandler, onBeganMotionHandler, shouldCheckMotionConsistency = false) {\n        const ret = new CubismMotion();\n        ret.parse(buffer, size, shouldCheckMotionConsistency);\n        if (ret._motionData) {\n            ret._sourceFrameRate = ret._motionData.fps;\n            ret._loopDurationSeconds = ret._motionData.duration;\n            ret._onFinishedMotion = onFinishedMotionHandler;\n            ret._onBeganMotion = onBeganMotionHandler;\n        }\n        else {\n            csmDelete(ret);\n            return null;\n        }\n        return ret;\n    }\n    doUpdateParameters(model, userTimeSeconds, fadeWeight, motionQueueEntry) {\n        if (this._modelCurveIdEyeBlink == null) {\n            this._modelCurveIdEyeBlink =\n                CubismFramework.getIdManager().getId(EffectNameEyeBlink);\n        }\n        if (this._modelCurveIdLipSync == null) {\n            this._modelCurveIdLipSync =\n                CubismFramework.getIdManager().getId(EffectNameLipSync);\n        }\n        if (this._modelCurveIdOpacity == null) {\n            this._modelCurveIdOpacity =\n                CubismFramework.getIdManager().getId(IdNameOpacity);\n        }\n        if (this._motionBehavior === MotionBehavior.MotionBehavior_V2) {\n            if (this._previousLoopState !== this._isLoop) {\n                this.adjustEndTime(motionQueueEntry);\n                this._previousLoopState = this._isLoop;\n            }\n        }\n        let timeOffsetSeconds = userTimeSeconds - motionQueueEntry.getStartTime();\n        if (timeOffsetSeconds < 0.0) {\n            timeOffsetSeconds = 0.0;\n        }\n        let lipSyncValue = Number.MAX_VALUE;\n        let eyeBlinkValue = Number.MAX_VALUE;\n        const maxTargetSize = 64;\n        let lipSyncFlags = 0;\n        let eyeBlinkFlags = 0;\n        if (this._eyeBlinkParameterIds.getSize() > maxTargetSize) {\n            CubismLogDebug('too many eye blink targets : {0}', this._eyeBlinkParameterIds.getSize());\n        }\n        if (this._lipSyncParameterIds.getSize() > maxTargetSize) {\n            CubismLogDebug('too many lip sync targets : {0}', this._lipSyncParameterIds.getSize());\n        }\n        const tmpFadeIn = this._fadeInSeconds <= 0.0\n            ? 1.0\n            : CubismMath.getEasingSine((userTimeSeconds - motionQueueEntry.getFadeInStartTime()) /\n                this._fadeInSeconds);\n        const tmpFadeOut = this._fadeOutSeconds <= 0.0 || motionQueueEntry.getEndTime() < 0.0\n            ? 1.0\n            : CubismMath.getEasingSine((motionQueueEntry.getEndTime() - userTimeSeconds) /\n                this._fadeOutSeconds);\n        let value;\n        let c, parameterIndex;\n        let time = timeOffsetSeconds;\n        let duration = this._motionData.duration;\n        const isCorrection = this._motionBehavior === MotionBehavior.MotionBehavior_V2 && this._isLoop;\n        if (this._isLoop) {\n            if (this._motionBehavior === MotionBehavior.MotionBehavior_V2) {\n                duration += 1.0 / this._motionData.fps;\n            }\n            while (time > duration) {\n                time -= duration;\n            }\n        }\n        const curves = this._motionData.curves;\n        for (c = 0; c < this._motionData.curveCount &&\n            curves.at(c).type ==\n                CubismMotionCurveTarget.CubismMotionCurveTarget_Model; ++c) {\n            value = evaluateCurve(this._motionData, c, time, isCorrection, duration);\n            if (curves.at(c).id == this._modelCurveIdEyeBlink) {\n                eyeBlinkValue = value;\n            }\n            else if (curves.at(c).id == this._modelCurveIdLipSync) {\n                lipSyncValue = value;\n            }\n            else if (curves.at(c).id == this._modelCurveIdOpacity) {\n                this._modelOpacity = value;\n                model.setModelOapcity(this.getModelOpacityValue());\n            }\n        }\n        let parameterMotionCurveCount = 0;\n        for (; c < this._motionData.curveCount &&\n            curves.at(c).type ==\n                CubismMotionCurveTarget.CubismMotionCurveTarget_Parameter; ++c) {\n            parameterMotionCurveCount++;\n            parameterIndex = model.getParameterIndex(curves.at(c).id);\n            if (parameterIndex == -1) {\n                continue;\n            }\n            const sourceValue = model.getParameterValueByIndex(parameterIndex);\n            value = evaluateCurve(this._motionData, c, time, isCorrection, duration);\n            if (eyeBlinkValue != Number.MAX_VALUE) {\n                for (let i = 0; i < this._eyeBlinkParameterIds.getSize() && i < maxTargetSize; ++i) {\n                    if (this._eyeBlinkParameterIds.at(i) == curves.at(c).id) {\n                        value *= eyeBlinkValue;\n                        eyeBlinkFlags |= 1 << i;\n                        break;\n                    }\n                }\n            }\n            if (lipSyncValue != Number.MAX_VALUE) {\n                for (let i = 0; i < this._lipSyncParameterIds.getSize() && i < maxTargetSize; ++i) {\n                    if (this._lipSyncParameterIds.at(i) == curves.at(c).id) {\n                        value += lipSyncValue;\n                        lipSyncFlags |= 1 << i;\n                        break;\n                    }\n                }\n            }\n            if (model.isRepeat(parameterIndex)) {\n                value = model.getParameterRepeatValue(parameterIndex, value);\n            }\n            let v;\n            if (curves.at(c).fadeInTime < 0.0 && curves.at(c).fadeOutTime < 0.0) {\n                v = sourceValue + (value - sourceValue) * fadeWeight;\n            }\n            else {\n                let fin;\n                let fout;\n                if (curves.at(c).fadeInTime < 0.0) {\n                    fin = tmpFadeIn;\n                }\n                else {\n                    fin =\n                        curves.at(c).fadeInTime == 0.0\n                            ? 1.0\n                            : CubismMath.getEasingSine((userTimeSeconds - motionQueueEntry.getFadeInStartTime()) /\n                                curves.at(c).fadeInTime);\n                }\n                if (curves.at(c).fadeOutTime < 0.0) {\n                    fout = tmpFadeOut;\n                }\n                else {\n                    fout =\n                        curves.at(c).fadeOutTime == 0.0 ||\n                            motionQueueEntry.getEndTime() < 0.0\n                            ? 1.0\n                            : CubismMath.getEasingSine((motionQueueEntry.getEndTime() - userTimeSeconds) /\n                                curves.at(c).fadeOutTime);\n                }\n                const paramWeight = this._weight * fin * fout;\n                v = sourceValue + (value - sourceValue) * paramWeight;\n            }\n            model.setParameterValueByIndex(parameterIndex, v, 1.0);\n        }\n        {\n            if (eyeBlinkValue != Number.MAX_VALUE) {\n                for (let i = 0; i < this._eyeBlinkParameterIds.getSize() && i < maxTargetSize; ++i) {\n                    const sourceValue = model.getParameterValueById(this._eyeBlinkParameterIds.at(i));\n                    if ((eyeBlinkFlags >> i) & 0x01) {\n                        continue;\n                    }\n                    const v = sourceValue + (eyeBlinkValue - sourceValue) * fadeWeight;\n                    model.setParameterValueById(this._eyeBlinkParameterIds.at(i), v);\n                }\n            }\n            if (lipSyncValue != Number.MAX_VALUE) {\n                for (let i = 0; i < this._lipSyncParameterIds.getSize() && i < maxTargetSize; ++i) {\n                    const sourceValue = model.getParameterValueById(this._lipSyncParameterIds.at(i));\n                    if ((lipSyncFlags >> i) & 0x01) {\n                        continue;\n                    }\n                    const v = sourceValue + (lipSyncValue - sourceValue) * fadeWeight;\n                    model.setParameterValueById(this._lipSyncParameterIds.at(i), v);\n                }\n            }\n        }\n        for (; c < this._motionData.curveCount &&\n            curves.at(c).type ==\n                CubismMotionCurveTarget.CubismMotionCurveTarget_PartOpacity; ++c) {\n            parameterIndex = model.getParameterIndex(curves.at(c).id);\n            if (parameterIndex == -1) {\n                continue;\n            }\n            value = evaluateCurve(this._motionData, c, time, isCorrection, duration);\n            model.setParameterValueByIndex(parameterIndex, value);\n        }\n        if (timeOffsetSeconds >= duration) {\n            if (this._isLoop) {\n                this.updateForNextLoop(motionQueueEntry, userTimeSeconds, time);\n            }\n            else {\n                if (this._onFinishedMotion) {\n                    this._onFinishedMotion(this);\n                }\n                motionQueueEntry.setIsFinished(true);\n            }\n        }\n        this._lastWeight = fadeWeight;\n    }\n    setIsLoop(loop) {\n        CubismLogWarning('setIsLoop() is a deprecated function. Please use setLoop().');\n        this._isLoop = loop;\n    }\n    isLoop() {\n        CubismLogWarning('isLoop() is a deprecated function. Please use getLoop().');\n        return this._isLoop;\n    }\n    setIsLoopFadeIn(loopFadeIn) {\n        CubismLogWarning('setIsLoopFadeIn() is a deprecated function. Please use setLoopFadeIn().');\n        this._isLoopFadeIn = loopFadeIn;\n    }\n    isLoopFadeIn() {\n        CubismLogWarning('isLoopFadeIn() is a deprecated function. Please use getLoopFadeIn().');\n        return this._isLoopFadeIn;\n    }\n    setMotionBehavior(motionBehavior) {\n        this._motionBehavior = motionBehavior;\n    }\n    getMotionBehavior() {\n        return this._motionBehavior;\n    }\n    getDuration() {\n        return this._isLoop ? -1.0 : this._loopDurationSeconds;\n    }\n    getLoopDuration() {\n        return this._loopDurationSeconds;\n    }\n    setParameterFadeInTime(parameterId, value) {\n        const curves = this._motionData.curves;\n        for (let i = 0; i < this._motionData.curveCount; ++i) {\n            if (parameterId == curves.at(i).id) {\n                curves.at(i).fadeInTime = value;\n                return;\n            }\n        }\n    }\n    setParameterFadeOutTime(parameterId, value) {\n        const curves = this._motionData.curves;\n        for (let i = 0; i < this._motionData.curveCount; ++i) {\n            if (parameterId == curves.at(i).id) {\n                curves.at(i).fadeOutTime = value;\n                return;\n            }\n        }\n    }\n    getParameterFadeInTime(parameterId) {\n        const curves = this._motionData.curves;\n        for (let i = 0; i < this._motionData.curveCount; ++i) {\n            if (parameterId == curves.at(i).id) {\n                return curves.at(i).fadeInTime;\n            }\n        }\n        return -1;\n    }\n    getParameterFadeOutTime(parameterId) {\n        const curves = this._motionData.curves;\n        for (let i = 0; i < this._motionData.curveCount; ++i) {\n            if (parameterId == curves.at(i).id) {\n                return curves.at(i).fadeOutTime;\n            }\n        }\n        return -1;\n    }\n    setEffectIds(eyeBlinkParameterIds, lipSyncParameterIds) {\n        this._eyeBlinkParameterIds = eyeBlinkParameterIds;\n        this._lipSyncParameterIds = lipSyncParameterIds;\n    }\n    constructor() {\n        super();\n        this._motionBehavior = MotionBehavior.MotionBehavior_V2;\n        this._sourceFrameRate = 30.0;\n        this._loopDurationSeconds = -1.0;\n        this._isLoop = false;\n        this._isLoopFadeIn = true;\n        this._lastWeight = 0.0;\n        this._motionData = null;\n        this._modelCurveIdEyeBlink = null;\n        this._modelCurveIdLipSync = null;\n        this._modelCurveIdOpacity = null;\n        this._eyeBlinkParameterIds = null;\n        this._lipSyncParameterIds = null;\n        this._modelOpacity = 1.0;\n        this._debugMode = false;\n    }\n    release() {\n        this._motionData = void 0;\n        this._motionData = null;\n    }\n    updateForNextLoop(motionQueueEntry, userTimeSeconds, time) {\n        switch (this._motionBehavior) {\n            case MotionBehavior.MotionBehavior_V2:\n            default:\n                motionQueueEntry.setStartTime(userTimeSeconds - time);\n                if (this._isLoopFadeIn) {\n                    motionQueueEntry.setFadeInStartTime(userTimeSeconds - time);\n                }\n                if (this._onFinishedMotion != null) {\n                    this._onFinishedMotion(this);\n                }\n                break;\n            case MotionBehavior.MotionBehavior_V1:\n                motionQueueEntry.setStartTime(userTimeSeconds);\n                if (this._isLoopFadeIn) {\n                    motionQueueEntry.setFadeInStartTime(userTimeSeconds);\n                }\n                break;\n        }\n    }\n    parse(motionJson, size, shouldCheckMotionConsistency = false) {\n        let json = new CubismMotionJson(motionJson, size);\n        if (!json) {\n            json.release();\n            json = void 0;\n            return;\n        }\n        if (shouldCheckMotionConsistency) {\n            const consistency = json.hasConsistency();\n            if (!consistency) {\n                json.release();\n                CubismLogError('Inconsistent motion3.json.');\n                return;\n            }\n        }\n        this._motionData = new CubismMotionData();\n        this._motionData.duration = json.getMotionDuration();\n        this._motionData.loop = json.isMotionLoop();\n        this._motionData.curveCount = json.getMotionCurveCount();\n        this._motionData.fps = json.getMotionFps();\n        this._motionData.eventCount = json.getEventCount();\n        const areBeziersRestructed = json.getEvaluationOptionFlag(EvaluationOptionFlag.EvaluationOptionFlag_AreBeziersRistricted);\n        if (json.isExistMotionFadeInTime()) {\n            this._fadeInSeconds =\n                json.getMotionFadeInTime() < 0.0 ? 1.0 : json.getMotionFadeInTime();\n        }\n        else {\n            this._fadeInSeconds = 1.0;\n        }\n        if (json.isExistMotionFadeOutTime()) {\n            this._fadeOutSeconds =\n                json.getMotionFadeOutTime() < 0.0 ? 1.0 : json.getMotionFadeOutTime();\n        }\n        else {\n            this._fadeOutSeconds = 1.0;\n        }\n        this._motionData.curves.updateSize(this._motionData.curveCount, CubismMotionCurve, true);\n        this._motionData.segments.updateSize(json.getMotionTotalSegmentCount(), CubismMotionSegment, true);\n        this._motionData.points.updateSize(json.getMotionTotalPointCount(), CubismMotionPoint, true);\n        this._motionData.events.updateSize(this._motionData.eventCount, CubismMotionEvent, true);\n        let totalPointCount = 0;\n        let totalSegmentCount = 0;\n        for (let curveCount = 0; curveCount < this._motionData.curveCount; ++curveCount) {\n            if (json.getMotionCurveTarget(curveCount) == TargetNameModel) {\n                this._motionData.curves.at(curveCount).type =\n                    CubismMotionCurveTarget.CubismMotionCurveTarget_Model;\n            }\n            else if (json.getMotionCurveTarget(curveCount) == TargetNameParameter) {\n                this._motionData.curves.at(curveCount).type =\n                    CubismMotionCurveTarget.CubismMotionCurveTarget_Parameter;\n            }\n            else if (json.getMotionCurveTarget(curveCount) == TargetNamePartOpacity) {\n                this._motionData.curves.at(curveCount).type =\n                    CubismMotionCurveTarget.CubismMotionCurveTarget_PartOpacity;\n            }\n            else {\n                CubismLogWarning('Warning : Unable to get segment type from Curve! The number of \"CurveCount\" may be incorrect!');\n            }\n            this._motionData.curves.at(curveCount).id =\n                json.getMotionCurveId(curveCount);\n            this._motionData.curves.at(curveCount).baseSegmentIndex =\n                totalSegmentCount;\n            this._motionData.curves.at(curveCount).fadeInTime =\n                json.isExistMotionCurveFadeInTime(curveCount)\n                    ? json.getMotionCurveFadeInTime(curveCount)\n                    : -1.0;\n            this._motionData.curves.at(curveCount).fadeOutTime =\n                json.isExistMotionCurveFadeOutTime(curveCount)\n                    ? json.getMotionCurveFadeOutTime(curveCount)\n                    : -1.0;\n            for (let segmentPosition = 0; segmentPosition < json.getMotionCurveSegmentCount(curveCount);) {\n                if (segmentPosition == 0) {\n                    this._motionData.segments.at(totalSegmentCount).basePointIndex =\n                        totalPointCount;\n                    this._motionData.points.at(totalPointCount).time =\n                        json.getMotionCurveSegment(curveCount, segmentPosition);\n                    this._motionData.points.at(totalPointCount).value =\n                        json.getMotionCurveSegment(curveCount, segmentPosition + 1);\n                    totalPointCount += 1;\n                    segmentPosition += 2;\n                }\n                else {\n                    this._motionData.segments.at(totalSegmentCount).basePointIndex =\n                        totalPointCount - 1;\n                }\n                const segment = json.getMotionCurveSegment(curveCount, segmentPosition);\n                const segmentType = segment;\n                switch (segmentType) {\n                    case CubismMotionSegmentType.CubismMotionSegmentType_Linear: {\n                        this._motionData.segments.at(totalSegmentCount).segmentType =\n                            CubismMotionSegmentType.CubismMotionSegmentType_Linear;\n                        this._motionData.segments.at(totalSegmentCount).evaluate =\n                            linearEvaluate;\n                        this._motionData.points.at(totalPointCount).time =\n                            json.getMotionCurveSegment(curveCount, segmentPosition + 1);\n                        this._motionData.points.at(totalPointCount).value =\n                            json.getMotionCurveSegment(curveCount, segmentPosition + 2);\n                        totalPointCount += 1;\n                        segmentPosition += 3;\n                        break;\n                    }\n                    case CubismMotionSegmentType.CubismMotionSegmentType_Bezier: {\n                        this._motionData.segments.at(totalSegmentCount).segmentType =\n                            CubismMotionSegmentType.CubismMotionSegmentType_Bezier;\n                        if (areBeziersRestructed || UseOldBeziersCurveMotion) {\n                            this._motionData.segments.at(totalSegmentCount).evaluate =\n                                bezierEvaluate;\n                        }\n                        else {\n                            this._motionData.segments.at(totalSegmentCount).evaluate =\n                                bezierEvaluateCardanoInterpretation;\n                        }\n                        this._motionData.points.at(totalPointCount).time =\n                            json.getMotionCurveSegment(curveCount, segmentPosition + 1);\n                        this._motionData.points.at(totalPointCount).value =\n                            json.getMotionCurveSegment(curveCount, segmentPosition + 2);\n                        this._motionData.points.at(totalPointCount + 1).time =\n                            json.getMotionCurveSegment(curveCount, segmentPosition + 3);\n                        this._motionData.points.at(totalPointCount + 1).value =\n                            json.getMotionCurveSegment(curveCount, segmentPosition + 4);\n                        this._motionData.points.at(totalPointCount + 2).time =\n                            json.getMotionCurveSegment(curveCount, segmentPosition + 5);\n                        this._motionData.points.at(totalPointCount + 2).value =\n                            json.getMotionCurveSegment(curveCount, segmentPosition + 6);\n                        totalPointCount += 3;\n                        segmentPosition += 7;\n                        break;\n                    }\n                    case CubismMotionSegmentType.CubismMotionSegmentType_Stepped: {\n                        this._motionData.segments.at(totalSegmentCount).segmentType =\n                            CubismMotionSegmentType.CubismMotionSegmentType_Stepped;\n                        this._motionData.segments.at(totalSegmentCount).evaluate =\n                            steppedEvaluate;\n                        this._motionData.points.at(totalPointCount).time =\n                            json.getMotionCurveSegment(curveCount, segmentPosition + 1);\n                        this._motionData.points.at(totalPointCount).value =\n                            json.getMotionCurveSegment(curveCount, segmentPosition + 2);\n                        totalPointCount += 1;\n                        segmentPosition += 3;\n                        break;\n                    }\n                    case CubismMotionSegmentType.CubismMotionSegmentType_InverseStepped: {\n                        this._motionData.segments.at(totalSegmentCount).segmentType =\n                            CubismMotionSegmentType.CubismMotionSegmentType_InverseStepped;\n                        this._motionData.segments.at(totalSegmentCount).evaluate =\n                            inverseSteppedEvaluate;\n                        this._motionData.points.at(totalPointCount).time =\n                            json.getMotionCurveSegment(curveCount, segmentPosition + 1);\n                        this._motionData.points.at(totalPointCount).value =\n                            json.getMotionCurveSegment(curveCount, segmentPosition + 2);\n                        totalPointCount += 1;\n                        segmentPosition += 3;\n                        break;\n                    }\n                    default: {\n                        CSM_ASSERT(0);\n                        break;\n                    }\n                }\n                ++this._motionData.curves.at(curveCount).segmentCount;\n                ++totalSegmentCount;\n            }\n        }\n        for (let userdatacount = 0; userdatacount < json.getEventCount(); ++userdatacount) {\n            this._motionData.events.at(userdatacount).fireTime =\n                json.getEventTime(userdatacount);\n            this._motionData.events.at(userdatacount).value =\n                json.getEventValue(userdatacount);\n        }\n        json.release();\n        json = void 0;\n        json = null;\n    }\n    getFiredEvent(beforeCheckTimeSeconds, motionTimeSeconds) {\n        this._firedEventValues.updateSize(0);\n        for (let u = 0; u < this._motionData.eventCount; ++u) {\n            if (this._motionData.events.at(u).fireTime > beforeCheckTimeSeconds &&\n                this._motionData.events.at(u).fireTime <= motionTimeSeconds) {\n                this._firedEventValues.pushBack(new csmString(this._motionData.events.at(u).value.s));\n            }\n        }\n        return this._firedEventValues;\n    }\n    isExistModelOpacity() {\n        for (let i = 0; i < this._motionData.curveCount; i++) {\n            const curve = this._motionData.curves.at(i);\n            if (curve.type != CubismMotionCurveTarget.CubismMotionCurveTarget_Model) {\n                continue;\n            }\n            if (curve.id.getString().s.localeCompare(IdNameOpacity) == 0) {\n                return true;\n            }\n        }\n        return false;\n    }\n    getModelOpacityIndex() {\n        if (this.isExistModelOpacity()) {\n            for (let i = 0; i < this._motionData.curveCount; i++) {\n                const curve = this._motionData.curves.at(i);\n                if (curve.type != CubismMotionCurveTarget.CubismMotionCurveTarget_Model) {\n                    continue;\n                }\n                if (curve.id.getString().s.localeCompare(IdNameOpacity) == 0) {\n                    return i;\n                }\n            }\n        }\n        return -1;\n    }\n    getModelOpacityId(index) {\n        if (index != -1) {\n            const curve = this._motionData.curves.at(index);\n            if (curve.type == CubismMotionCurveTarget.CubismMotionCurveTarget_Model) {\n                if (curve.id.getString().s.localeCompare(IdNameOpacity) == 0) {\n                    return CubismFramework.getIdManager().getId(curve.id.getString().s);\n                }\n            }\n        }\n        return null;\n    }\n    getModelOpacityValue() {\n        return this._modelOpacity;\n    }\n    setDebugMode(debugMode) {\n        this._debugMode = debugMode;\n    }\n}\nimport * as $ from './cubismmotion';\nexport var Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismMotion = $.CubismMotion;\n})(Live2DCubismFramework || (Live2DCubismFramework = {}));\n","import { CubismMotionQueueManager } from './cubismmotionqueuemanager';\nexport class CubismMotionManager extends CubismMotionQueueManager {\n    constructor() {\n        super();\n        this._currentPriority = 0;\n        this._reservePriority = 0;\n    }\n    getCurrentPriority() {\n        return this._currentPriority;\n    }\n    getReservePriority() {\n        return this._reservePriority;\n    }\n    setReservePriority(val) {\n        this._reservePriority = val;\n    }\n    startMotionPriority(motion, autoDelete, priority) {\n        if (priority == this._reservePriority) {\n            this._reservePriority = 0;\n        }\n        this._currentPriority = priority;\n        return super.startMotion(motion, autoDelete);\n    }\n    updateMotion(model, deltaTimeSeconds) {\n        this._userTimeSeconds += deltaTimeSeconds;\n        const updated = super.doUpdateMotion(model, this._userTimeSeconds);\n        if (this.isFinished()) {\n            this._currentPriority = 0;\n        }\n        return updated;\n    }\n    reserveMotion(priority) {\n        if (priority <= this._reservePriority ||\n            priority <= this._currentPriority) {\n            return false;\n        }\n        this._reservePriority = priority;\n        return true;\n    }\n}\nimport * as $ from './cubismmotionmanager';\nexport var Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismMotionManager = $.CubismMotionManager;\n})(Live2DCubismFramework || (Live2DCubismFramework = {}));\n","import { CubismVector2 } from '../math/cubismvector2';\nimport { csmVector } from '../type/csmvector';\nexport var CubismPhysicsTargetType;\n(function (CubismPhysicsTargetType) {\n    CubismPhysicsTargetType[CubismPhysicsTargetType[\"CubismPhysicsTargetType_Parameter\"] = 0] = \"CubismPhysicsTargetType_Parameter\";\n})(CubismPhysicsTargetType || (CubismPhysicsTargetType = {}));\nexport var CubismPhysicsSource;\n(function (CubismPhysicsSource) {\n    CubismPhysicsSource[CubismPhysicsSource[\"CubismPhysicsSource_X\"] = 0] = \"CubismPhysicsSource_X\";\n    CubismPhysicsSource[CubismPhysicsSource[\"CubismPhysicsSource_Y\"] = 1] = \"CubismPhysicsSource_Y\";\n    CubismPhysicsSource[CubismPhysicsSource[\"CubismPhysicsSource_Angle\"] = 2] = \"CubismPhysicsSource_Angle\";\n})(CubismPhysicsSource || (CubismPhysicsSource = {}));\nexport class PhysicsJsonEffectiveForces {\n    constructor() {\n        this.gravity = new CubismVector2(0, 0);\n        this.wind = new CubismVector2(0, 0);\n    }\n}\nexport class CubismPhysicsParameter {\n}\nexport class CubismPhysicsNormalization {\n}\nexport class CubismPhysicsParticle {\n    constructor() {\n        this.initialPosition = new CubismVector2(0, 0);\n        this.position = new CubismVector2(0, 0);\n        this.lastPosition = new CubismVector2(0, 0);\n        this.lastGravity = new CubismVector2(0, 0);\n        this.force = new CubismVector2(0, 0);\n        this.velocity = new CubismVector2(0, 0);\n    }\n}\nexport class CubismPhysicsSubRig {\n    constructor() {\n        this.normalizationPosition = new CubismPhysicsNormalization();\n        this.normalizationAngle = new CubismPhysicsNormalization();\n    }\n}\nexport class CubismPhysicsInput {\n    constructor() {\n        this.source = new CubismPhysicsParameter();\n    }\n}\nexport class CubismPhysicsOutput {\n    constructor() {\n        this.destination = new CubismPhysicsParameter();\n        this.translationScale = new CubismVector2(0, 0);\n    }\n}\nexport class CubismPhysicsRig {\n    constructor() {\n        this.settings = new csmVector();\n        this.inputs = new csmVector();\n        this.outputs = new csmVector();\n        this.particles = new csmVector();\n        this.gravity = new CubismVector2(0, 0);\n        this.wind = new CubismVector2(0, 0);\n        this.fps = 0.0;\n    }\n}\nimport * as $ from './cubismphysicsinternal';\nexport var Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismPhysicsInput = $.CubismPhysicsInput;\n    Live2DCubismFramework.CubismPhysicsNormalization = $.CubismPhysicsNormalization;\n    Live2DCubismFramework.CubismPhysicsOutput = $.CubismPhysicsOutput;\n    Live2DCubismFramework.CubismPhysicsParameter = $.CubismPhysicsParameter;\n    Live2DCubismFramework.CubismPhysicsParticle = $.CubismPhysicsParticle;\n    Live2DCubismFramework.CubismPhysicsRig = $.CubismPhysicsRig;\n    Live2DCubismFramework.CubismPhysicsSource = $.CubismPhysicsSource;\n    Live2DCubismFramework.CubismPhysicsSubRig = $.CubismPhysicsSubRig;\n    Live2DCubismFramework.CubismPhysicsTargetType = $.CubismPhysicsTargetType;\n    Live2DCubismFramework.PhysicsJsonEffectiveForces = $.PhysicsJsonEffectiveForces;\n})(Live2DCubismFramework || (Live2DCubismFramework = {}));\n","import { CubismFramework } from '../live2dcubismframework';\nimport { CubismVector2 } from '../math/cubismvector2';\nimport { CubismJson } from '../utils/cubismjson';\nconst Position = 'Position';\nconst X = 'X';\nconst Y = 'Y';\nconst Angle = 'Angle';\nconst Type = 'Type';\nconst Id = 'Id';\nconst Meta = 'Meta';\nconst EffectiveForces = 'EffectiveForces';\nconst TotalInputCount = 'TotalInputCount';\nconst TotalOutputCount = 'TotalOutputCount';\nconst PhysicsSettingCount = 'PhysicsSettingCount';\nconst Gravity = 'Gravity';\nconst Wind = 'Wind';\nconst VertexCount = 'VertexCount';\nconst Fps = 'Fps';\nconst PhysicsSettings = 'PhysicsSettings';\nconst Normalization = 'Normalization';\nconst Minimum = 'Minimum';\nconst Maximum = 'Maximum';\nconst Default = 'Default';\nconst Reflect = 'Reflect';\nconst Weight = 'Weight';\nconst Input = 'Input';\nconst Source = 'Source';\nconst Output = 'Output';\nconst Scale = 'Scale';\nconst VertexIndex = 'VertexIndex';\nconst Destination = 'Destination';\nconst Vertices = 'Vertices';\nconst Mobility = 'Mobility';\nconst Delay = 'Delay';\nconst Radius = 'Radius';\nconst Acceleration = 'Acceleration';\nexport class CubismPhysicsJson {\n    constructor(buffer, size) {\n        this._json = CubismJson.create(buffer, size);\n    }\n    release() {\n        CubismJson.delete(this._json);\n    }\n    getGravity() {\n        const ret = new CubismVector2(0, 0);\n        ret.x = this._json\n            .getRoot()\n            .getValueByString(Meta)\n            .getValueByString(EffectiveForces)\n            .getValueByString(Gravity)\n            .getValueByString(X)\n            .toFloat();\n        ret.y = this._json\n            .getRoot()\n            .getValueByString(Meta)\n            .getValueByString(EffectiveForces)\n            .getValueByString(Gravity)\n            .getValueByString(Y)\n            .toFloat();\n        return ret;\n    }\n    getWind() {\n        const ret = new CubismVector2(0, 0);\n        ret.x = this._json\n            .getRoot()\n            .getValueByString(Meta)\n            .getValueByString(EffectiveForces)\n            .getValueByString(Wind)\n            .getValueByString(X)\n            .toFloat();\n        ret.y = this._json\n            .getRoot()\n            .getValueByString(Meta)\n            .getValueByString(EffectiveForces)\n            .getValueByString(Wind)\n            .getValueByString(Y)\n            .toFloat();\n        return ret;\n    }\n    getFps() {\n        return this._json\n            .getRoot()\n            .getValueByString(Meta)\n            .getValueByString(Fps)\n            .toFloat(0.0);\n    }\n    getSubRigCount() {\n        return this._json\n            .getRoot()\n            .getValueByString(Meta)\n            .getValueByString(PhysicsSettingCount)\n            .toInt();\n    }\n    getTotalInputCount() {\n        return this._json\n            .getRoot()\n            .getValueByString(Meta)\n            .getValueByString(TotalInputCount)\n            .toInt();\n    }\n    getTotalOutputCount() {\n        return this._json\n            .getRoot()\n            .getValueByString(Meta)\n            .getValueByString(TotalOutputCount)\n            .toInt();\n    }\n    getVertexCount() {\n        return this._json\n            .getRoot()\n            .getValueByString(Meta)\n            .getValueByString(VertexCount)\n            .toInt();\n    }\n    getNormalizationPositionMinimumValue(physicsSettingIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Normalization)\n            .getValueByString(Position)\n            .getValueByString(Minimum)\n            .toFloat();\n    }\n    getNormalizationPositionMaximumValue(physicsSettingIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Normalization)\n            .getValueByString(Position)\n            .getValueByString(Maximum)\n            .toFloat();\n    }\n    getNormalizationPositionDefaultValue(physicsSettingIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Normalization)\n            .getValueByString(Position)\n            .getValueByString(Default)\n            .toFloat();\n    }\n    getNormalizationAngleMinimumValue(physicsSettingIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Normalization)\n            .getValueByString(Angle)\n            .getValueByString(Minimum)\n            .toFloat();\n    }\n    getNormalizationAngleMaximumValue(physicsSettingIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Normalization)\n            .getValueByString(Angle)\n            .getValueByString(Maximum)\n            .toFloat();\n    }\n    getNormalizationAngleDefaultValue(physicsSettingIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Normalization)\n            .getValueByString(Angle)\n            .getValueByString(Default)\n            .toFloat();\n    }\n    getInputCount(physicsSettingIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Input)\n            .getVector()\n            .getSize();\n    }\n    getInputWeight(physicsSettingIndex, inputIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Input)\n            .getValueByIndex(inputIndex)\n            .getValueByString(Weight)\n            .toFloat();\n    }\n    getInputReflect(physicsSettingIndex, inputIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Input)\n            .getValueByIndex(inputIndex)\n            .getValueByString(Reflect)\n            .toBoolean();\n    }\n    getInputType(physicsSettingIndex, inputIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Input)\n            .getValueByIndex(inputIndex)\n            .getValueByString(Type)\n            .getRawString();\n    }\n    getInputSourceId(physicsSettingIndex, inputIndex) {\n        return CubismFramework.getIdManager().getId(this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Input)\n            .getValueByIndex(inputIndex)\n            .getValueByString(Source)\n            .getValueByString(Id)\n            .getRawString());\n    }\n    getOutputCount(physicsSettingIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Output)\n            .getVector()\n            .getSize();\n    }\n    getOutputVertexIndex(physicsSettingIndex, outputIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Output)\n            .getValueByIndex(outputIndex)\n            .getValueByString(VertexIndex)\n            .toInt();\n    }\n    getOutputAngleScale(physicsSettingIndex, outputIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Output)\n            .getValueByIndex(outputIndex)\n            .getValueByString(Scale)\n            .toFloat();\n    }\n    getOutputWeight(physicsSettingIndex, outputIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Output)\n            .getValueByIndex(outputIndex)\n            .getValueByString(Weight)\n            .toFloat();\n    }\n    getOutputDestinationId(physicsSettingIndex, outputIndex) {\n        return CubismFramework.getIdManager().getId(this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Output)\n            .getValueByIndex(outputIndex)\n            .getValueByString(Destination)\n            .getValueByString(Id)\n            .getRawString());\n    }\n    getOutputType(physicsSettingIndex, outputIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Output)\n            .getValueByIndex(outputIndex)\n            .getValueByString(Type)\n            .getRawString();\n    }\n    getOutputReflect(physicsSettingIndex, outputIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Output)\n            .getValueByIndex(outputIndex)\n            .getValueByString(Reflect)\n            .toBoolean();\n    }\n    getParticleCount(physicsSettingIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Vertices)\n            .getVector()\n            .getSize();\n    }\n    getParticleMobility(physicsSettingIndex, vertexIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Vertices)\n            .getValueByIndex(vertexIndex)\n            .getValueByString(Mobility)\n            .toFloat();\n    }\n    getParticleDelay(physicsSettingIndex, vertexIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Vertices)\n            .getValueByIndex(vertexIndex)\n            .getValueByString(Delay)\n            .toFloat();\n    }\n    getParticleAcceleration(physicsSettingIndex, vertexIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Vertices)\n            .getValueByIndex(vertexIndex)\n            .getValueByString(Acceleration)\n            .toFloat();\n    }\n    getParticleRadius(physicsSettingIndex, vertexIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Vertices)\n            .getValueByIndex(vertexIndex)\n            .getValueByString(Radius)\n            .toFloat();\n    }\n    getParticlePosition(physicsSettingIndex, vertexIndex) {\n        const ret = new CubismVector2(0, 0);\n        ret.x = this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Vertices)\n            .getValueByIndex(vertexIndex)\n            .getValueByString(Position)\n            .getValueByString(X)\n            .toFloat();\n        ret.y = this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Vertices)\n            .getValueByIndex(vertexIndex)\n            .getValueByString(Position)\n            .getValueByString(Y)\n            .toFloat();\n        return ret;\n    }\n}\nimport * as $ from './cubismphysicsjson';\nexport var Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismPhysicsJson = $.CubismPhysicsJson;\n})(Live2DCubismFramework || (Live2DCubismFramework = {}));\n","import { CubismMath } from '../math/cubismmath';\nimport { CubismVector2 } from '../math/cubismvector2';\nimport { csmVector } from '../type/csmvector';\nimport { CubismPhysicsInput, CubismPhysicsOutput, CubismPhysicsParticle, CubismPhysicsRig, CubismPhysicsSource, CubismPhysicsSubRig, CubismPhysicsTargetType } from './cubismphysicsinternal';\nimport { CubismPhysicsJson } from './cubismphysicsjson';\nconst PhysicsTypeTagX = 'X';\nconst PhysicsTypeTagY = 'Y';\nconst PhysicsTypeTagAngle = 'Angle';\nconst AirResistance = 5.0;\nconst MaximumWeight = 100.0;\nconst MovementThreshold = 0.001;\nconst MaxDeltaTime = 5.0;\nexport class CubismPhysics {\n    static create(buffer, size) {\n        const ret = new CubismPhysics();\n        ret.parse(buffer, size);\n        ret._physicsRig.gravity.y = 0;\n        return ret;\n    }\n    static delete(physics) {\n        if (physics != null) {\n            physics.release();\n            physics = null;\n        }\n    }\n    parse(physicsJson, size) {\n        this._physicsRig = new CubismPhysicsRig();\n        let json = new CubismPhysicsJson(physicsJson, size);\n        this._physicsRig.gravity = json.getGravity();\n        this._physicsRig.wind = json.getWind();\n        this._physicsRig.subRigCount = json.getSubRigCount();\n        this._physicsRig.fps = json.getFps();\n        this._physicsRig.settings.updateSize(this._physicsRig.subRigCount, CubismPhysicsSubRig, true);\n        this._physicsRig.inputs.updateSize(json.getTotalInputCount(), CubismPhysicsInput, true);\n        this._physicsRig.outputs.updateSize(json.getTotalOutputCount(), CubismPhysicsOutput, true);\n        this._physicsRig.particles.updateSize(json.getVertexCount(), CubismPhysicsParticle, true);\n        this._currentRigOutputs.clear();\n        this._previousRigOutputs.clear();\n        let inputIndex = 0, outputIndex = 0, particleIndex = 0;\n        for (let i = 0; i < this._physicsRig.settings.getSize(); ++i) {\n            this._physicsRig.settings.at(i).normalizationPosition.minimum =\n                json.getNormalizationPositionMinimumValue(i);\n            this._physicsRig.settings.at(i).normalizationPosition.maximum =\n                json.getNormalizationPositionMaximumValue(i);\n            this._physicsRig.settings.at(i).normalizationPosition.defalut =\n                json.getNormalizationPositionDefaultValue(i);\n            this._physicsRig.settings.at(i).normalizationAngle.minimum =\n                json.getNormalizationAngleMinimumValue(i);\n            this._physicsRig.settings.at(i).normalizationAngle.maximum =\n                json.getNormalizationAngleMaximumValue(i);\n            this._physicsRig.settings.at(i).normalizationAngle.defalut =\n                json.getNormalizationAngleDefaultValue(i);\n            this._physicsRig.settings.at(i).inputCount = json.getInputCount(i);\n            this._physicsRig.settings.at(i).baseInputIndex = inputIndex;\n            for (let j = 0; j < this._physicsRig.settings.at(i).inputCount; ++j) {\n                this._physicsRig.inputs.at(inputIndex + j).sourceParameterIndex = -1;\n                this._physicsRig.inputs.at(inputIndex + j).weight = json.getInputWeight(i, j);\n                this._physicsRig.inputs.at(inputIndex + j).reflect =\n                    json.getInputReflect(i, j);\n                if (json.getInputType(i, j) == PhysicsTypeTagX) {\n                    this._physicsRig.inputs.at(inputIndex + j).type =\n                        CubismPhysicsSource.CubismPhysicsSource_X;\n                    this._physicsRig.inputs.at(inputIndex + j).getNormalizedParameterValue =\n                        getInputTranslationXFromNormalizedParameterValue;\n                }\n                else if (json.getInputType(i, j) == PhysicsTypeTagY) {\n                    this._physicsRig.inputs.at(inputIndex + j).type =\n                        CubismPhysicsSource.CubismPhysicsSource_Y;\n                    this._physicsRig.inputs.at(inputIndex + j).getNormalizedParameterValue =\n                        getInputTranslationYFromNormalizedParamterValue;\n                }\n                else if (json.getInputType(i, j) == PhysicsTypeTagAngle) {\n                    this._physicsRig.inputs.at(inputIndex + j).type =\n                        CubismPhysicsSource.CubismPhysicsSource_Angle;\n                    this._physicsRig.inputs.at(inputIndex + j).getNormalizedParameterValue =\n                        getInputAngleFromNormalizedParameterValue;\n                }\n                this._physicsRig.inputs.at(inputIndex + j).source.targetType =\n                    CubismPhysicsTargetType.CubismPhysicsTargetType_Parameter;\n                this._physicsRig.inputs.at(inputIndex + j).source.id =\n                    json.getInputSourceId(i, j);\n            }\n            inputIndex += this._physicsRig.settings.at(i).inputCount;\n            this._physicsRig.settings.at(i).outputCount = json.getOutputCount(i);\n            this._physicsRig.settings.at(i).baseOutputIndex = outputIndex;\n            const currentRigOutput = new PhysicsOutput();\n            currentRigOutput.outputs.resize(this._physicsRig.settings.at(i).outputCount);\n            const previousRigOutput = new PhysicsOutput();\n            previousRigOutput.outputs.resize(this._physicsRig.settings.at(i).outputCount);\n            for (let j = 0; j < this._physicsRig.settings.at(i).outputCount; ++j) {\n                currentRigOutput.outputs.set(j, 0.0);\n                previousRigOutput.outputs.set(j, 0.0);\n                this._physicsRig.outputs.at(outputIndex + j).destinationParameterIndex =\n                    -1;\n                this._physicsRig.outputs.at(outputIndex + j).vertexIndex =\n                    json.getOutputVertexIndex(i, j);\n                this._physicsRig.outputs.at(outputIndex + j).angleScale =\n                    json.getOutputAngleScale(i, j);\n                this._physicsRig.outputs.at(outputIndex + j).weight =\n                    json.getOutputWeight(i, j);\n                this._physicsRig.outputs.at(outputIndex + j).destination.targetType =\n                    CubismPhysicsTargetType.CubismPhysicsTargetType_Parameter;\n                this._physicsRig.outputs.at(outputIndex + j).destination.id =\n                    json.getOutputDestinationId(i, j);\n                if (json.getOutputType(i, j) == PhysicsTypeTagX) {\n                    this._physicsRig.outputs.at(outputIndex + j).type =\n                        CubismPhysicsSource.CubismPhysicsSource_X;\n                    this._physicsRig.outputs.at(outputIndex + j).getValue =\n                        getOutputTranslationX;\n                    this._physicsRig.outputs.at(outputIndex + j).getScale =\n                        getOutputScaleTranslationX;\n                }\n                else if (json.getOutputType(i, j) == PhysicsTypeTagY) {\n                    this._physicsRig.outputs.at(outputIndex + j).type =\n                        CubismPhysicsSource.CubismPhysicsSource_Y;\n                    this._physicsRig.outputs.at(outputIndex + j).getValue =\n                        getOutputTranslationY;\n                    this._physicsRig.outputs.at(outputIndex + j).getScale =\n                        getOutputScaleTranslationY;\n                }\n                else if (json.getOutputType(i, j) == PhysicsTypeTagAngle) {\n                    this._physicsRig.outputs.at(outputIndex + j).type =\n                        CubismPhysicsSource.CubismPhysicsSource_Angle;\n                    this._physicsRig.outputs.at(outputIndex + j).getValue =\n                        getOutputAngle;\n                    this._physicsRig.outputs.at(outputIndex + j).getScale =\n                        getOutputScaleAngle;\n                }\n                this._physicsRig.outputs.at(outputIndex + j).reflect =\n                    json.getOutputReflect(i, j);\n            }\n            this._currentRigOutputs.pushBack(currentRigOutput);\n            this._previousRigOutputs.pushBack(previousRigOutput);\n            outputIndex += this._physicsRig.settings.at(i).outputCount;\n            this._physicsRig.settings.at(i).particleCount = json.getParticleCount(i);\n            this._physicsRig.settings.at(i).baseParticleIndex = particleIndex;\n            for (let j = 0; j < this._physicsRig.settings.at(i).particleCount; ++j) {\n                this._physicsRig.particles.at(particleIndex + j).mobility =\n                    json.getParticleMobility(i, j);\n                this._physicsRig.particles.at(particleIndex + j).delay =\n                    json.getParticleDelay(i, j);\n                this._physicsRig.particles.at(particleIndex + j).acceleration =\n                    json.getParticleAcceleration(i, j);\n                this._physicsRig.particles.at(particleIndex + j).radius =\n                    json.getParticleRadius(i, j);\n                this._physicsRig.particles.at(particleIndex + j).position =\n                    json.getParticlePosition(i, j);\n            }\n            particleIndex += this._physicsRig.settings.at(i).particleCount;\n        }\n        this.initialize();\n        json.release();\n        json = void 0;\n        json = null;\n    }\n    stabilization(model) {\n        var _b, _c, _d, _f;\n        let totalAngle;\n        let weight;\n        let radAngle;\n        let outputValue;\n        const totalTranslation = new CubismVector2();\n        let currentSetting;\n        let currentInputs;\n        let currentOutputs;\n        let currentParticles;\n        const parameterValues = model.getModel().parameters.values;\n        const parameterMaximumValues = model.getModel().parameters.maximumValues;\n        const parameterMinimumValues = model.getModel().parameters.minimumValues;\n        const parameterDefaultValues = model.getModel().parameters.defaultValues;\n        if (((_c = (_b = this._parameterCaches) === null || _b === void 0 ? void 0 : _b.length) !== null && _c !== void 0 ? _c : 0) < model.getParameterCount()) {\n            this._parameterCaches = new Float32Array(model.getParameterCount());\n        }\n        if (((_f = (_d = this._parameterInputCaches) === null || _d === void 0 ? void 0 : _d.length) !== null && _f !== void 0 ? _f : 0) < model.getParameterCount()) {\n            this._parameterInputCaches = new Float32Array(model.getParameterCount());\n        }\n        for (let j = 0; j < model.getParameterCount(); ++j) {\n            this._parameterCaches[j] = parameterValues[j];\n            this._parameterInputCaches[j] = parameterValues[j];\n        }\n        for (let settingIndex = 0; settingIndex < this._physicsRig.subRigCount; ++settingIndex) {\n            totalAngle = { angle: 0.0 };\n            totalTranslation.x = 0.0;\n            totalTranslation.y = 0.0;\n            currentSetting = this._physicsRig.settings.at(settingIndex);\n            currentInputs = this._physicsRig.inputs.get(currentSetting.baseInputIndex);\n            currentOutputs = this._physicsRig.outputs.get(currentSetting.baseOutputIndex);\n            currentParticles = this._physicsRig.particles.get(currentSetting.baseParticleIndex);\n            for (let i = 0; i < currentSetting.inputCount; ++i) {\n                weight = currentInputs[i].weight / MaximumWeight;\n                if (currentInputs[i].sourceParameterIndex == -1) {\n                    currentInputs[i].sourceParameterIndex = model.getParameterIndex(currentInputs[i].source.id);\n                }\n                currentInputs[i].getNormalizedParameterValue(totalTranslation, totalAngle, parameterValues[currentInputs[i].sourceParameterIndex], parameterMinimumValues[currentInputs[i].sourceParameterIndex], parameterMaximumValues[currentInputs[i].sourceParameterIndex], parameterDefaultValues[currentInputs[i].sourceParameterIndex], currentSetting.normalizationPosition, currentSetting.normalizationAngle, currentInputs[i].reflect, weight);\n                this._parameterCaches[currentInputs[i].sourceParameterIndex] =\n                    parameterValues[currentInputs[i].sourceParameterIndex];\n            }\n            radAngle = CubismMath.degreesToRadian(-totalAngle.angle);\n            totalTranslation.x =\n                totalTranslation.x * CubismMath.cos(radAngle) -\n                    totalTranslation.y * CubismMath.sin(radAngle);\n            totalTranslation.y =\n                totalTranslation.x * CubismMath.sin(radAngle) +\n                    totalTranslation.y * CubismMath.cos(radAngle);\n            updateParticlesForStabilization(currentParticles, currentSetting.particleCount, totalTranslation, totalAngle.angle, this._options.wind, MovementThreshold * currentSetting.normalizationPosition.maximum);\n            for (let i = 0; i < currentSetting.outputCount; ++i) {\n                const particleIndex = currentOutputs[i].vertexIndex;\n                if (currentOutputs[i].destinationParameterIndex == -1) {\n                    currentOutputs[i].destinationParameterIndex = model.getParameterIndex(currentOutputs[i].destination.id);\n                }\n                if (particleIndex < 1 ||\n                    particleIndex >= currentSetting.particleCount) {\n                    continue;\n                }\n                let translation = new CubismVector2();\n                translation = currentParticles[particleIndex].position.substract(currentParticles[particleIndex - 1].position);\n                outputValue = currentOutputs[i].getValue(translation, currentParticles, particleIndex, currentOutputs[i].reflect, this._options.gravity);\n                this._currentRigOutputs.at(settingIndex).outputs.set(i, outputValue);\n                this._previousRigOutputs.at(settingIndex).outputs.set(i, outputValue);\n                const destinationParameterIndex = currentOutputs[i].destinationParameterIndex;\n                const outParameterCaches = !Float32Array.prototype.slice && 'subarray' in Float32Array.prototype\n                    ? JSON.parse(JSON.stringify(parameterValues.subarray(destinationParameterIndex)))\n                    : parameterValues.slice(destinationParameterIndex);\n                updateOutputParameterValue(outParameterCaches, parameterMinimumValues[destinationParameterIndex], parameterMaximumValues[destinationParameterIndex], outputValue, currentOutputs[i]);\n                for (let offset = destinationParameterIndex, outParamIndex = 0; offset < this._parameterCaches.length; offset++, outParamIndex++) {\n                    parameterValues[offset] = this._parameterCaches[offset] =\n                        outParameterCaches[outParamIndex];\n                }\n            }\n        }\n    }\n    evaluate(model, deltaTimeSeconds) {\n        var _b, _c, _d, _f;\n        let totalAngle;\n        let weight;\n        let radAngle;\n        let outputValue;\n        const totalTranslation = new CubismVector2();\n        let currentSetting;\n        let currentInputs;\n        let currentOutputs;\n        let currentParticles;\n        if (0.0 >= deltaTimeSeconds) {\n            return;\n        }\n        const parameterValues = model.getModel().parameters.values;\n        const parameterMaximumValues = model.getModel().parameters.maximumValues;\n        const parameterMinimumValues = model.getModel().parameters.minimumValues;\n        const parameterDefaultValues = model.getModel().parameters.defaultValues;\n        let physicsDeltaTime;\n        this._currentRemainTime += deltaTimeSeconds;\n        if (this._currentRemainTime > MaxDeltaTime) {\n            this._currentRemainTime = 0.0;\n        }\n        if (((_c = (_b = this._parameterCaches) === null || _b === void 0 ? void 0 : _b.length) !== null && _c !== void 0 ? _c : 0) < model.getParameterCount()) {\n            this._parameterCaches = new Float32Array(model.getParameterCount());\n        }\n        if (((_f = (_d = this._parameterInputCaches) === null || _d === void 0 ? void 0 : _d.length) !== null && _f !== void 0 ? _f : 0) < model.getParameterCount()) {\n            this._parameterInputCaches = new Float32Array(model.getParameterCount());\n            for (let j = 0; j < model.getParameterCount(); ++j) {\n                this._parameterInputCaches[j] = parameterValues[j];\n            }\n        }\n        if (this._physicsRig.fps > 0.0) {\n            physicsDeltaTime = 1.0 / this._physicsRig.fps;\n        }\n        else {\n            physicsDeltaTime = deltaTimeSeconds;\n        }\n        while (this._currentRemainTime >= physicsDeltaTime) {\n            for (let settingIndex = 0; settingIndex < this._physicsRig.subRigCount; ++settingIndex) {\n                currentSetting = this._physicsRig.settings.at(settingIndex);\n                currentOutputs = this._physicsRig.outputs.get(currentSetting.baseOutputIndex);\n                for (let i = 0; i < currentSetting.outputCount; ++i) {\n                    this._previousRigOutputs\n                        .at(settingIndex)\n                        .outputs.set(i, this._currentRigOutputs.at(settingIndex).outputs.at(i));\n                }\n            }\n            const inputWeight = physicsDeltaTime / this._currentRemainTime;\n            for (let j = 0; j < model.getParameterCount(); ++j) {\n                this._parameterCaches[j] =\n                    this._parameterInputCaches[j] * (1.0 - inputWeight) +\n                        parameterValues[j] * inputWeight;\n                this._parameterInputCaches[j] = this._parameterCaches[j];\n            }\n            for (let settingIndex = 0; settingIndex < this._physicsRig.subRigCount; ++settingIndex) {\n                totalAngle = { angle: 0.0 };\n                totalTranslation.x = 0.0;\n                totalTranslation.y = 0.0;\n                currentSetting = this._physicsRig.settings.at(settingIndex);\n                currentInputs = this._physicsRig.inputs.get(currentSetting.baseInputIndex);\n                currentOutputs = this._physicsRig.outputs.get(currentSetting.baseOutputIndex);\n                currentParticles = this._physicsRig.particles.get(currentSetting.baseParticleIndex);\n                for (let i = 0; i < currentSetting.inputCount; ++i) {\n                    weight = currentInputs[i].weight / MaximumWeight;\n                    if (currentInputs[i].sourceParameterIndex == -1) {\n                        currentInputs[i].sourceParameterIndex = model.getParameterIndex(currentInputs[i].source.id);\n                    }\n                    currentInputs[i].getNormalizedParameterValue(totalTranslation, totalAngle, this._parameterCaches[currentInputs[i].sourceParameterIndex], parameterMinimumValues[currentInputs[i].sourceParameterIndex], parameterMaximumValues[currentInputs[i].sourceParameterIndex], parameterDefaultValues[currentInputs[i].sourceParameterIndex], currentSetting.normalizationPosition, currentSetting.normalizationAngle, currentInputs[i].reflect, weight);\n                }\n                radAngle = CubismMath.degreesToRadian(-totalAngle.angle);\n                totalTranslation.x =\n                    totalTranslation.x * CubismMath.cos(radAngle) -\n                        totalTranslation.y * CubismMath.sin(radAngle);\n                totalTranslation.y =\n                    totalTranslation.x * CubismMath.sin(radAngle) +\n                        totalTranslation.y * CubismMath.cos(radAngle);\n                updateParticles(currentParticles, currentSetting.particleCount, totalTranslation, totalAngle.angle, this._options.wind, MovementThreshold * currentSetting.normalizationPosition.maximum, physicsDeltaTime, AirResistance);\n                for (let i = 0; i < currentSetting.outputCount; ++i) {\n                    const particleIndex = currentOutputs[i].vertexIndex;\n                    if (currentOutputs[i].destinationParameterIndex == -1) {\n                        currentOutputs[i].destinationParameterIndex =\n                            model.getParameterIndex(currentOutputs[i].destination.id);\n                    }\n                    if (particleIndex < 1 ||\n                        particleIndex >= currentSetting.particleCount) {\n                        continue;\n                    }\n                    const translation = new CubismVector2();\n                    translation.x =\n                        currentParticles[particleIndex].position.x -\n                            currentParticles[particleIndex - 1].position.x;\n                    translation.y =\n                        currentParticles[particleIndex].position.y -\n                            currentParticles[particleIndex - 1].position.y;\n                    outputValue = currentOutputs[i].getValue(translation, currentParticles, particleIndex, currentOutputs[i].reflect, this._options.gravity);\n                    this._currentRigOutputs.at(settingIndex).outputs.set(i, outputValue);\n                    const destinationParameterIndex = currentOutputs[i].destinationParameterIndex;\n                    const outParameterCaches = !Float32Array.prototype.slice &&\n                        'subarray' in Float32Array.prototype\n                        ? JSON.parse(JSON.stringify(this._parameterCaches.subarray(destinationParameterIndex)))\n                        : this._parameterCaches.slice(destinationParameterIndex);\n                    updateOutputParameterValue(outParameterCaches, parameterMinimumValues[destinationParameterIndex], parameterMaximumValues[destinationParameterIndex], outputValue, currentOutputs[i]);\n                    for (let offset = destinationParameterIndex, outParamIndex = 0; offset < this._parameterCaches.length; offset++, outParamIndex++) {\n                        this._parameterCaches[offset] = outParameterCaches[outParamIndex];\n                    }\n                }\n            }\n            this._currentRemainTime -= physicsDeltaTime;\n        }\n        const alpha = this._currentRemainTime / physicsDeltaTime;\n        this.interpolate(model, alpha);\n    }\n    interpolate(model, weight) {\n        let currentOutputs;\n        let currentSetting;\n        const parameterValues = model.getModel().parameters.values;\n        const parameterMaximumValues = model.getModel().parameters.maximumValues;\n        const parameterMinimumValues = model.getModel().parameters.minimumValues;\n        for (let settingIndex = 0; settingIndex < this._physicsRig.subRigCount; ++settingIndex) {\n            currentSetting = this._physicsRig.settings.at(settingIndex);\n            currentOutputs = this._physicsRig.outputs.get(currentSetting.baseOutputIndex);\n            for (let i = 0; i < currentSetting.outputCount; ++i) {\n                if (currentOutputs[i].destinationParameterIndex == -1) {\n                    continue;\n                }\n                const destinationParameterIndex = currentOutputs[i].destinationParameterIndex;\n                const outParameterValues = !Float32Array.prototype.slice && 'subarray' in Float32Array.prototype\n                    ? JSON.parse(JSON.stringify(parameterValues.subarray(destinationParameterIndex)))\n                    : parameterValues.slice(destinationParameterIndex);\n                updateOutputParameterValue(outParameterValues, parameterMinimumValues[destinationParameterIndex], parameterMaximumValues[destinationParameterIndex], this._previousRigOutputs.at(settingIndex).outputs.at(i) *\n                    (1 - weight) +\n                    this._currentRigOutputs.at(settingIndex).outputs.at(i) * weight, currentOutputs[i]);\n                for (let offset = destinationParameterIndex, outParamIndex = 0; offset < parameterValues.length; offset++, outParamIndex++) {\n                    parameterValues[offset] = outParameterValues[outParamIndex];\n                }\n            }\n        }\n    }\n    setOptions(options) {\n        this._options = options;\n    }\n    getOption() {\n        return this._options;\n    }\n    constructor() {\n        this._physicsRig = null;\n        this._options = new Options();\n        this._options.gravity.y = -1.0;\n        this._options.gravity.x = 0.0;\n        this._options.wind.x = 0.0;\n        this._options.wind.y = 0.0;\n        this._currentRigOutputs = new csmVector();\n        this._previousRigOutputs = new csmVector();\n        this._currentRemainTime = 0.0;\n        this._parameterCaches = null;\n        this._parameterInputCaches = null;\n    }\n    release() {\n        this._physicsRig = void 0;\n        this._physicsRig = null;\n    }\n    initialize() {\n        let strand;\n        let currentSetting;\n        let radius;\n        for (let settingIndex = 0; settingIndex < this._physicsRig.subRigCount; ++settingIndex) {\n            currentSetting = this._physicsRig.settings.at(settingIndex);\n            strand = this._physicsRig.particles.get(currentSetting.baseParticleIndex);\n            strand[0].initialPosition = new CubismVector2(0.0, 0.0);\n            strand[0].lastPosition = new CubismVector2(strand[0].initialPosition.x, strand[0].initialPosition.y);\n            strand[0].lastGravity = new CubismVector2(0.0, -1.0);\n            strand[0].lastGravity.y *= -1.0;\n            strand[0].velocity = new CubismVector2(0.0, 0.0);\n            strand[0].force = new CubismVector2(0.0, 0.0);\n            for (let i = 1; i < currentSetting.particleCount; ++i) {\n                radius = new CubismVector2(0.0, 0.0);\n                radius.y = strand[i].radius;\n                strand[i].initialPosition = new CubismVector2(strand[i - 1].initialPosition.x + radius.x, strand[i - 1].initialPosition.y + radius.y);\n                strand[i].position = new CubismVector2(strand[i].initialPosition.x, strand[i].initialPosition.y);\n                strand[i].lastPosition = new CubismVector2(strand[i].initialPosition.x, strand[i].initialPosition.y);\n                strand[i].lastGravity = new CubismVector2(0.0, -1.0);\n                strand[i].lastGravity.y *= -1.0;\n                strand[i].velocity = new CubismVector2(0.0, 0.0);\n                strand[i].force = new CubismVector2(0.0, 0.0);\n            }\n        }\n    }\n}\nexport class Options {\n    constructor() {\n        this.gravity = new CubismVector2(0, 0);\n        this.wind = new CubismVector2(0, 0);\n    }\n}\nexport class PhysicsOutput {\n    constructor() {\n        this.outputs = new csmVector(0);\n    }\n}\nfunction sign(value) {\n    let ret = 0;\n    if (value > 0.0) {\n        ret = 1;\n    }\n    else if (value < 0.0) {\n        ret = -1;\n    }\n    return ret;\n}\nfunction getInputTranslationXFromNormalizedParameterValue(targetTranslation, targetAngle, value, parameterMinimumValue, parameterMaximumValue, parameterDefaultValue, normalizationPosition, normalizationAngle, isInverted, weight) {\n    targetTranslation.x +=\n        normalizeParameterValue(value, parameterMinimumValue, parameterMaximumValue, parameterDefaultValue, normalizationPosition.minimum, normalizationPosition.maximum, normalizationPosition.defalut, isInverted) * weight;\n}\nfunction getInputTranslationYFromNormalizedParamterValue(targetTranslation, targetAngle, value, parameterMinimumValue, parameterMaximumValue, parameterDefaultValue, normalizationPosition, normalizationAngle, isInverted, weight) {\n    targetTranslation.y +=\n        normalizeParameterValue(value, parameterMinimumValue, parameterMaximumValue, parameterDefaultValue, normalizationPosition.minimum, normalizationPosition.maximum, normalizationPosition.defalut, isInverted) * weight;\n}\nfunction getInputAngleFromNormalizedParameterValue(targetTranslation, targetAngle, value, parameterMinimumValue, parameterMaximumValue, parameterDefaultValue, normalizaitionPosition, normalizationAngle, isInverted, weight) {\n    targetAngle.angle +=\n        normalizeParameterValue(value, parameterMinimumValue, parameterMaximumValue, parameterDefaultValue, normalizationAngle.minimum, normalizationAngle.maximum, normalizationAngle.defalut, isInverted) * weight;\n}\nfunction getOutputTranslationX(translation, particles, particleIndex, isInverted, parentGravity) {\n    let outputValue = translation.x;\n    if (isInverted) {\n        outputValue *= -1.0;\n    }\n    return outputValue;\n}\nfunction getOutputTranslationY(translation, particles, particleIndex, isInverted, parentGravity) {\n    let outputValue = translation.y;\n    if (isInverted) {\n        outputValue *= -1.0;\n    }\n    return outputValue;\n}\nfunction getOutputAngle(translation, particles, particleIndex, isInverted, parentGravity) {\n    let outputValue;\n    if (particleIndex >= 2) {\n        parentGravity = particles[particleIndex - 1].position.substract(particles[particleIndex - 2].position);\n    }\n    else {\n        parentGravity = parentGravity.multiplyByScaler(-1.0);\n    }\n    outputValue = CubismMath.directionToRadian(parentGravity, translation);\n    if (isInverted) {\n        outputValue *= -1.0;\n    }\n    return outputValue;\n}\nfunction getRangeValue(min, max) {\n    const maxValue = CubismMath.max(min, max);\n    const minValue = CubismMath.min(min, max);\n    return CubismMath.abs(maxValue - minValue);\n}\nfunction getDefaultValue(min, max) {\n    const minValue = CubismMath.min(min, max);\n    return minValue + getRangeValue(min, max) / 2.0;\n}\nfunction getOutputScaleTranslationX(translationScale, angleScale) {\n    return JSON.parse(JSON.stringify(translationScale.x));\n}\nfunction getOutputScaleTranslationY(translationScale, angleScale) {\n    return JSON.parse(JSON.stringify(translationScale.y));\n}\nfunction getOutputScaleAngle(translationScale, angleScale) {\n    return JSON.parse(JSON.stringify(angleScale));\n}\nfunction updateParticles(strand, strandCount, totalTranslation, totalAngle, windDirection, thresholdValue, deltaTimeSeconds, airResistance) {\n    let delay;\n    let radian;\n    let direction = new CubismVector2(0.0, 0.0);\n    let velocity = new CubismVector2(0.0, 0.0);\n    let force = new CubismVector2(0.0, 0.0);\n    let newDirection = new CubismVector2(0.0, 0.0);\n    strand[0].position = new CubismVector2(totalTranslation.x, totalTranslation.y);\n    const totalRadian = CubismMath.degreesToRadian(totalAngle);\n    const currentGravity = CubismMath.radianToDirection(totalRadian);\n    currentGravity.normalize();\n    for (let i = 1; i < strandCount; ++i) {\n        strand[i].force = currentGravity\n            .multiplyByScaler(strand[i].acceleration)\n            .add(windDirection);\n        strand[i].lastPosition = new CubismVector2(strand[i].position.x, strand[i].position.y);\n        delay = strand[i].delay * deltaTimeSeconds * 30.0;\n        direction = strand[i].position.substract(strand[i - 1].position);\n        radian =\n            CubismMath.directionToRadian(strand[i].lastGravity, currentGravity) /\n                airResistance;\n        direction.x =\n            CubismMath.cos(radian) * direction.x -\n                direction.y * CubismMath.sin(radian);\n        direction.y =\n            CubismMath.sin(radian) * direction.x +\n                direction.y * CubismMath.cos(radian);\n        strand[i].position = strand[i - 1].position.add(direction);\n        velocity = strand[i].velocity.multiplyByScaler(delay);\n        force = strand[i].force.multiplyByScaler(delay).multiplyByScaler(delay);\n        strand[i].position = strand[i].position.add(velocity).add(force);\n        newDirection = strand[i].position.substract(strand[i - 1].position);\n        newDirection.normalize();\n        strand[i].position = strand[i - 1].position.add(newDirection.multiplyByScaler(strand[i].radius));\n        if (CubismMath.abs(strand[i].position.x) < thresholdValue) {\n            strand[i].position.x = 0.0;\n        }\n        if (delay != 0.0) {\n            strand[i].velocity = strand[i].position.substract(strand[i].lastPosition);\n            strand[i].velocity = strand[i].velocity.divisionByScalar(delay);\n            strand[i].velocity = strand[i].velocity.multiplyByScaler(strand[i].mobility);\n        }\n        strand[i].force = new CubismVector2(0.0, 0.0);\n        strand[i].lastGravity = new CubismVector2(currentGravity.x, currentGravity.y);\n    }\n}\nfunction updateParticlesForStabilization(strand, strandCount, totalTranslation, totalAngle, windDirection, thresholdValue) {\n    let force = new CubismVector2(0.0, 0.0);\n    strand[0].position = new CubismVector2(totalTranslation.x, totalTranslation.y);\n    const totalRadian = CubismMath.degreesToRadian(totalAngle);\n    const currentGravity = CubismMath.radianToDirection(totalRadian);\n    currentGravity.normalize();\n    for (let i = 1; i < strandCount; ++i) {\n        strand[i].force = currentGravity\n            .multiplyByScaler(strand[i].acceleration)\n            .add(windDirection);\n        strand[i].lastPosition = new CubismVector2(strand[i].position.x, strand[i].position.y);\n        strand[i].velocity = new CubismVector2(0.0, 0.0);\n        force = strand[i].force;\n        force.normalize();\n        force = force.multiplyByScaler(strand[i].radius);\n        strand[i].position = strand[i - 1].position.add(force);\n        if (CubismMath.abs(strand[i].position.x) < thresholdValue) {\n            strand[i].position.x = 0.0;\n        }\n        strand[i].force = new CubismVector2(0.0, 0.0);\n        strand[i].lastGravity = new CubismVector2(currentGravity.x, currentGravity.y);\n    }\n}\nfunction updateOutputParameterValue(parameterValue, parameterValueMinimum, parameterValueMaximum, translation, output) {\n    let value;\n    const outputScale = output.getScale(output.translationScale, output.angleScale);\n    value = translation * outputScale;\n    if (value < parameterValueMinimum) {\n        if (value < output.valueBelowMinimum) {\n            output.valueBelowMinimum = value;\n        }\n        value = parameterValueMinimum;\n    }\n    else if (value > parameterValueMaximum) {\n        if (value > output.valueExceededMaximum) {\n            output.valueExceededMaximum = value;\n        }\n        value = parameterValueMaximum;\n    }\n    const weight = output.weight / MaximumWeight;\n    if (weight >= 1.0) {\n        parameterValue[0] = value;\n    }\n    else {\n        value = parameterValue[0] * (1.0 - weight) + value * weight;\n        parameterValue[0] = value;\n    }\n}\nfunction normalizeParameterValue(value, parameterMinimum, parameterMaximum, parameterDefault, normalizedMinimum, normalizedMaximum, normalizedDefault, isInverted) {\n    let result = 0.0;\n    const maxValue = CubismMath.max(parameterMaximum, parameterMinimum);\n    if (maxValue < value) {\n        value = maxValue;\n    }\n    const minValue = CubismMath.min(parameterMaximum, parameterMinimum);\n    if (minValue > value) {\n        value = minValue;\n    }\n    const minNormValue = CubismMath.min(normalizedMinimum, normalizedMaximum);\n    const maxNormValue = CubismMath.max(normalizedMinimum, normalizedMaximum);\n    const middleNormValue = normalizedDefault;\n    const middleValue = getDefaultValue(minValue, maxValue);\n    const paramValue = value - middleValue;\n    switch (sign(paramValue)) {\n        case 1: {\n            const nLength = maxNormValue - middleNormValue;\n            const pLength = maxValue - middleValue;\n            if (pLength != 0.0) {\n                result = paramValue * (nLength / pLength);\n                result += middleNormValue;\n            }\n            break;\n        }\n        case -1: {\n            const nLength = minNormValue - middleNormValue;\n            const pLength = minValue - middleValue;\n            if (pLength != 0.0) {\n                result = paramValue * (nLength / pLength);\n                result += middleNormValue;\n            }\n            break;\n        }\n        case 0: {\n            result = middleNormValue;\n            break;\n        }\n        default: {\n            break;\n        }\n    }\n    return isInverted ? result : result * -1.0;\n}\nimport * as $ from './cubismphysics';\nexport var Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismPhysics = $.CubismPhysics;\n    Live2DCubismFramework.Options = $.Options;\n})(Live2DCubismFramework || (Live2DCubismFramework = {}));\n","import { Constant } from '../live2dcubismframework';\nimport { csmVector } from '../type/csmvector';\nimport { csmRect } from '../type/csmrectf';\nimport { CubismMatrix44 } from '../math/cubismmatrix44';\nimport { CubismTextureColor } from './cubismrenderer';\nimport { CubismLogError, CubismLogWarning } from '../utils/cubismdebug';\nconst ColorChannelCount = 4;\nconst ClippingMaskMaxCountOnDefault = 36;\nconst ClippingMaskMaxCountOnMultiRenderTexture = 32;\nexport class CubismClippingManager {\n    constructor(clippingContextFactory) {\n        this._renderTextureCount = 0;\n        this._clippingMaskBufferSize = 256;\n        this._clippingContextListForMask = new csmVector();\n        this._clippingContextListForDraw = new csmVector();\n        this._channelColors = new csmVector();\n        this._tmpBoundsOnModel = new csmRect();\n        this._tmpMatrix = new CubismMatrix44();\n        this._tmpMatrixForMask = new CubismMatrix44();\n        this._tmpMatrixForDraw = new CubismMatrix44();\n        this._clippingContexttConstructor = clippingContextFactory;\n        let tmp = new CubismTextureColor();\n        tmp.r = 1.0;\n        tmp.g = 0.0;\n        tmp.b = 0.0;\n        tmp.a = 0.0;\n        this._channelColors.pushBack(tmp);\n        tmp = new CubismTextureColor();\n        tmp.r = 0.0;\n        tmp.g = 1.0;\n        tmp.b = 0.0;\n        tmp.a = 0.0;\n        this._channelColors.pushBack(tmp);\n        tmp = new CubismTextureColor();\n        tmp.r = 0.0;\n        tmp.g = 0.0;\n        tmp.b = 1.0;\n        tmp.a = 0.0;\n        this._channelColors.pushBack(tmp);\n        tmp = new CubismTextureColor();\n        tmp.r = 0.0;\n        tmp.g = 0.0;\n        tmp.b = 0.0;\n        tmp.a = 1.0;\n        this._channelColors.pushBack(tmp);\n    }\n    release() {\n        for (let i = 0; i < this._clippingContextListForMask.getSize(); i++) {\n            if (this._clippingContextListForMask.at(i)) {\n                this._clippingContextListForMask.at(i).release();\n                this._clippingContextListForMask.set(i, void 0);\n            }\n            this._clippingContextListForMask.set(i, null);\n        }\n        this._clippingContextListForMask = null;\n        for (let i = 0; i < this._clippingContextListForDraw.getSize(); i++) {\n            this._clippingContextListForDraw.set(i, null);\n        }\n        this._clippingContextListForDraw = null;\n        for (let i = 0; i < this._channelColors.getSize(); i++) {\n            this._channelColors.set(i, null);\n        }\n        this._channelColors = null;\n        if (this._clearedFrameBufferFlags != null) {\n            this._clearedFrameBufferFlags.clear();\n        }\n        this._clearedFrameBufferFlags = null;\n    }\n    initialize(model, renderTextureCount) {\n        if (renderTextureCount % 1 != 0) {\n            CubismLogWarning('The number of render textures must be specified as an integer. The decimal point is rounded down and corrected to an integer.');\n            renderTextureCount = ~~renderTextureCount;\n        }\n        if (renderTextureCount < 1) {\n            CubismLogWarning('The number of render textures must be an integer greater than or equal to 1. Set the number of render textures to 1.');\n        }\n        this._renderTextureCount = renderTextureCount < 1 ? 1 : renderTextureCount;\n        this._clearedFrameBufferFlags = new csmVector(this._renderTextureCount);\n        for (let i = 0; i < model.getDrawableCount(); i++) {\n            if (model.getDrawableMaskCounts()[i] <= 0) {\n                this._clippingContextListForDraw.pushBack(null);\n                continue;\n            }\n            let clippingContext = this.findSameClip(model.getDrawableMasks()[i], model.getDrawableMaskCounts()[i]);\n            if (clippingContext == null) {\n                clippingContext = new this._clippingContexttConstructor(this, model.getDrawableMasks()[i], model.getDrawableMaskCounts()[i]);\n                this._clippingContextListForMask.pushBack(clippingContext);\n            }\n            clippingContext.addClippedDrawable(i);\n            this._clippingContextListForDraw.pushBack(clippingContext);\n        }\n    }\n    findSameClip(drawableMasks, drawableMaskCounts) {\n        for (let i = 0; i < this._clippingContextListForMask.getSize(); i++) {\n            const clippingContext = this._clippingContextListForMask.at(i);\n            const count = clippingContext._clippingIdCount;\n            if (count != drawableMaskCounts) {\n                continue;\n            }\n            let sameCount = 0;\n            for (let j = 0; j < count; j++) {\n                const clipId = clippingContext._clippingIdList[j];\n                for (let k = 0; k < count; k++) {\n                    if (drawableMasks[k] == clipId) {\n                        sameCount++;\n                        break;\n                    }\n                }\n            }\n            if (sameCount == count) {\n                return clippingContext;\n            }\n        }\n        return null;\n    }\n    setupMatrixForHighPrecision(model, isRightHanded) {\n        let usingClipCount = 0;\n        for (let clipIndex = 0; clipIndex < this._clippingContextListForMask.getSize(); clipIndex++) {\n            const cc = this._clippingContextListForMask.at(clipIndex);\n            this.calcClippedDrawTotalBounds(model, cc);\n            if (cc._isUsing) {\n                usingClipCount++;\n            }\n        }\n        if (usingClipCount > 0) {\n            this.setupLayoutBounds(0);\n            if (this._clearedFrameBufferFlags.getSize() != this._renderTextureCount) {\n                this._clearedFrameBufferFlags.clear();\n                for (let i = 0; i < this._renderTextureCount; i++) {\n                    this._clearedFrameBufferFlags.pushBack(false);\n                }\n            }\n            else {\n                for (let i = 0; i < this._renderTextureCount; i++) {\n                    this._clearedFrameBufferFlags.set(i, false);\n                }\n            }\n            for (let clipIndex = 0; clipIndex < this._clippingContextListForMask.getSize(); clipIndex++) {\n                const clipContext = this._clippingContextListForMask.at(clipIndex);\n                const allClippedDrawRect = clipContext._allClippedDrawRect;\n                const layoutBoundsOnTex01 = clipContext._layoutBounds;\n                const margin = 0.05;\n                let scaleX = 0.0;\n                let scaleY = 0.0;\n                const ppu = model.getPixelsPerUnit();\n                const maskPixelSize = clipContext\n                    .getClippingManager()\n                    .getClippingMaskBufferSize();\n                const physicalMaskWidth = layoutBoundsOnTex01.width * maskPixelSize;\n                const physicalMaskHeight = layoutBoundsOnTex01.height * maskPixelSize;\n                this._tmpBoundsOnModel.setRect(allClippedDrawRect);\n                if (this._tmpBoundsOnModel.width * ppu > physicalMaskWidth) {\n                    this._tmpBoundsOnModel.expand(allClippedDrawRect.width * margin, 0.0);\n                    scaleX = layoutBoundsOnTex01.width / this._tmpBoundsOnModel.width;\n                }\n                else {\n                    scaleX = ppu / physicalMaskWidth;\n                }\n                if (this._tmpBoundsOnModel.height * ppu > physicalMaskHeight) {\n                    this._tmpBoundsOnModel.expand(0.0, allClippedDrawRect.height * margin);\n                    scaleY = layoutBoundsOnTex01.height / this._tmpBoundsOnModel.height;\n                }\n                else {\n                    scaleY = ppu / physicalMaskHeight;\n                }\n                this.createMatrixForMask(isRightHanded, layoutBoundsOnTex01, scaleX, scaleY);\n                clipContext._matrixForMask.setMatrix(this._tmpMatrixForMask.getArray());\n                clipContext._matrixForDraw.setMatrix(this._tmpMatrixForDraw.getArray());\n            }\n        }\n    }\n    createMatrixForMask(isRightHanded, layoutBoundsOnTex01, scaleX, scaleY) {\n        this._tmpMatrix.loadIdentity();\n        {\n            this._tmpMatrix.translateRelative(-1.0, -1.0);\n            this._tmpMatrix.scaleRelative(2.0, 2.0);\n        }\n        {\n            this._tmpMatrix.translateRelative(layoutBoundsOnTex01.x, layoutBoundsOnTex01.y);\n            this._tmpMatrix.scaleRelative(scaleX, scaleY);\n            this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x, -this._tmpBoundsOnModel.y);\n        }\n        this._tmpMatrixForMask.setMatrix(this._tmpMatrix.getArray());\n        this._tmpMatrix.loadIdentity();\n        {\n            this._tmpMatrix.translateRelative(layoutBoundsOnTex01.x, layoutBoundsOnTex01.y * (isRightHanded ? -1.0 : 1.0));\n            this._tmpMatrix.scaleRelative(scaleX, scaleY * (isRightHanded ? -1.0 : 1.0));\n            this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x, -this._tmpBoundsOnModel.y);\n        }\n        this._tmpMatrixForDraw.setMatrix(this._tmpMatrix.getArray());\n    }\n    setupLayoutBounds(usingClipCount) {\n        const useClippingMaskMaxCount = this._renderTextureCount <= 1\n            ? ClippingMaskMaxCountOnDefault\n            : ClippingMaskMaxCountOnMultiRenderTexture * this._renderTextureCount;\n        if (usingClipCount <= 0 || usingClipCount > useClippingMaskMaxCount) {\n            if (usingClipCount > useClippingMaskMaxCount) {\n                CubismLogError('not supported mask count : {0}\\n[Details] render texture count : {1}, mask count : {2}', usingClipCount - useClippingMaskMaxCount, this._renderTextureCount, usingClipCount);\n            }\n            for (let index = 0; index < this._clippingContextListForMask.getSize(); index++) {\n                const clipContext = this._clippingContextListForMask.at(index);\n                clipContext._layoutChannelIndex = 0;\n                clipContext._layoutBounds.x = 0.0;\n                clipContext._layoutBounds.y = 0.0;\n                clipContext._layoutBounds.width = 1.0;\n                clipContext._layoutBounds.height = 1.0;\n                clipContext._bufferIndex = 0;\n            }\n            return;\n        }\n        const layoutCountMaxValue = this._renderTextureCount <= 1 ? 9 : 8;\n        let countPerSheetDiv = usingClipCount / this._renderTextureCount;\n        const reduceLayoutTextureCount = usingClipCount % this._renderTextureCount;\n        countPerSheetDiv = Math.ceil(countPerSheetDiv);\n        let divCount = countPerSheetDiv / ColorChannelCount;\n        const modCount = countPerSheetDiv % ColorChannelCount;\n        divCount = ~~divCount;\n        let curClipIndex = 0;\n        for (let renderTextureIndex = 0; renderTextureIndex < this._renderTextureCount; renderTextureIndex++) {\n            for (let channelIndex = 0; channelIndex < ColorChannelCount; channelIndex++) {\n                let layoutCount = divCount + (channelIndex < modCount ? 1 : 0);\n                const checkChannelIndex = modCount + (divCount < 1 ? -1 : 0);\n                if (channelIndex == checkChannelIndex && reduceLayoutTextureCount > 0) {\n                    layoutCount -= !(renderTextureIndex < reduceLayoutTextureCount)\n                        ? 1\n                        : 0;\n                }\n                if (layoutCount == 0) {\n                }\n                else if (layoutCount == 1) {\n                    const clipContext = this._clippingContextListForMask.at(curClipIndex++);\n                    clipContext._layoutChannelIndex = channelIndex;\n                    clipContext._layoutBounds.x = 0.0;\n                    clipContext._layoutBounds.y = 0.0;\n                    clipContext._layoutBounds.width = 1.0;\n                    clipContext._layoutBounds.height = 1.0;\n                    clipContext._bufferIndex = renderTextureIndex;\n                }\n                else if (layoutCount == 2) {\n                    for (let i = 0; i < layoutCount; i++) {\n                        let xpos = i % 2;\n                        xpos = ~~xpos;\n                        const cc = this._clippingContextListForMask.at(curClipIndex++);\n                        cc._layoutChannelIndex = channelIndex;\n                        cc._layoutBounds.x = xpos * 0.5;\n                        cc._layoutBounds.y = 0.0;\n                        cc._layoutBounds.width = 0.5;\n                        cc._layoutBounds.height = 1.0;\n                        cc._bufferIndex = renderTextureIndex;\n                    }\n                }\n                else if (layoutCount <= 4) {\n                    for (let i = 0; i < layoutCount; i++) {\n                        let xpos = i % 2;\n                        let ypos = i / 2;\n                        xpos = ~~xpos;\n                        ypos = ~~ypos;\n                        const cc = this._clippingContextListForMask.at(curClipIndex++);\n                        cc._layoutChannelIndex = channelIndex;\n                        cc._layoutBounds.x = xpos * 0.5;\n                        cc._layoutBounds.y = ypos * 0.5;\n                        cc._layoutBounds.width = 0.5;\n                        cc._layoutBounds.height = 0.5;\n                        cc._bufferIndex = renderTextureIndex;\n                    }\n                }\n                else if (layoutCount <= layoutCountMaxValue) {\n                    for (let i = 0; i < layoutCount; i++) {\n                        let xpos = i % 3;\n                        let ypos = i / 3;\n                        xpos = ~~xpos;\n                        ypos = ~~ypos;\n                        const cc = this._clippingContextListForMask.at(curClipIndex++);\n                        cc._layoutChannelIndex = channelIndex;\n                        cc._layoutBounds.x = xpos / 3.0;\n                        cc._layoutBounds.y = ypos / 3.0;\n                        cc._layoutBounds.width = 1.0 / 3.0;\n                        cc._layoutBounds.height = 1.0 / 3.0;\n                        cc._bufferIndex = renderTextureIndex;\n                    }\n                }\n                else {\n                    CubismLogError('not supported mask count : {0}\\n[Details] render texture count : {1}, mask count : {2}', usingClipCount - useClippingMaskMaxCount, this._renderTextureCount, usingClipCount);\n                    for (let index = 0; index < layoutCount; index++) {\n                        const cc = this._clippingContextListForMask.at(curClipIndex++);\n                        cc._layoutChannelIndex = 0;\n                        cc._layoutBounds.x = 0.0;\n                        cc._layoutBounds.y = 0.0;\n                        cc._layoutBounds.width = 1.0;\n                        cc._layoutBounds.height = 1.0;\n                        cc._bufferIndex = 0;\n                    }\n                }\n            }\n        }\n    }\n    calcClippedDrawTotalBounds(model, clippingContext) {\n        let clippedDrawTotalMinX = Number.MAX_VALUE;\n        let clippedDrawTotalMinY = Number.MAX_VALUE;\n        let clippedDrawTotalMaxX = Number.MIN_VALUE;\n        let clippedDrawTotalMaxY = Number.MIN_VALUE;\n        const clippedDrawCount = clippingContext._clippedDrawableIndexList.length;\n        for (let clippedDrawableIndex = 0; clippedDrawableIndex < clippedDrawCount; clippedDrawableIndex++) {\n            const drawableIndex = clippingContext._clippedDrawableIndexList[clippedDrawableIndex];\n            const drawableVertexCount = model.getDrawableVertexCount(drawableIndex);\n            const drawableVertexes = model.getDrawableVertices(drawableIndex);\n            let minX = Number.MAX_VALUE;\n            let minY = Number.MAX_VALUE;\n            let maxX = -Number.MAX_VALUE;\n            let maxY = -Number.MAX_VALUE;\n            const loop = drawableVertexCount * Constant.vertexStep;\n            for (let pi = Constant.vertexOffset; pi < loop; pi += Constant.vertexStep) {\n                const x = drawableVertexes[pi];\n                const y = drawableVertexes[pi + 1];\n                if (x < minX) {\n                    minX = x;\n                }\n                if (x > maxX) {\n                    maxX = x;\n                }\n                if (y < minY) {\n                    minY = y;\n                }\n                if (y > maxY) {\n                    maxY = y;\n                }\n            }\n            if (minX == Number.MAX_VALUE) {\n                continue;\n            }\n            if (minX < clippedDrawTotalMinX) {\n                clippedDrawTotalMinX = minX;\n            }\n            if (minY < clippedDrawTotalMinY) {\n                clippedDrawTotalMinY = minY;\n            }\n            if (maxX > clippedDrawTotalMaxX) {\n                clippedDrawTotalMaxX = maxX;\n            }\n            if (maxY > clippedDrawTotalMaxY) {\n                clippedDrawTotalMaxY = maxY;\n            }\n            if (clippedDrawTotalMinX == Number.MAX_VALUE) {\n                clippingContext._allClippedDrawRect.x = 0.0;\n                clippingContext._allClippedDrawRect.y = 0.0;\n                clippingContext._allClippedDrawRect.width = 0.0;\n                clippingContext._allClippedDrawRect.height = 0.0;\n                clippingContext._isUsing = false;\n            }\n            else {\n                clippingContext._isUsing = true;\n                const w = clippedDrawTotalMaxX - clippedDrawTotalMinX;\n                const h = clippedDrawTotalMaxY - clippedDrawTotalMinY;\n                clippingContext._allClippedDrawRect.x = clippedDrawTotalMinX;\n                clippingContext._allClippedDrawRect.y = clippedDrawTotalMinY;\n                clippingContext._allClippedDrawRect.width = w;\n                clippingContext._allClippedDrawRect.height = h;\n            }\n        }\n    }\n    getClippingContextListForDraw() {\n        return this._clippingContextListForDraw;\n    }\n    getClippingMaskBufferSize() {\n        return this._clippingMaskBufferSize;\n    }\n    getRenderTextureCount() {\n        return this._renderTextureCount;\n    }\n    getChannelFlagAsColor(channelNo) {\n        return this._channelColors.at(channelNo);\n    }\n    setClippingMaskBufferSize(size) {\n        this._clippingMaskBufferSize = size;\n    }\n}\n","import { csmMap } from '../type/csmmap';\nimport { csmVector } from '../type/csmvector';\nimport { CubismLogError } from '../utils/cubismdebug';\nimport { CubismBlendMode } from './cubismrenderer';\nlet s_instance;\nconst ShaderCount = 10;\nexport class CubismShader_WebGL {\n    constructor() {\n        this._shaderSets = new csmVector();\n    }\n    release() {\n        this.releaseShaderProgram();\n    }\n    setupShaderProgramForDraw(renderer, model, index) {\n        if (!renderer.isPremultipliedAlpha()) {\n            CubismLogError('NoPremultipliedAlpha is not allowed');\n        }\n        if (this._shaderSets.getSize() == 0) {\n            this.generateShaders();\n        }\n        let srcColor;\n        let dstColor;\n        let srcAlpha;\n        let dstAlpha;\n        const masked = renderer.getClippingContextBufferForDraw() != null;\n        const invertedMask = model.getDrawableInvertedMaskBit(index);\n        const offset = masked ? (invertedMask ? 2 : 1) : 0;\n        let shaderSet;\n        switch (model.getDrawableBlendMode(index)) {\n            case CubismBlendMode.CubismBlendMode_Normal:\n            default:\n                shaderSet = this._shaderSets.at(ShaderNames.ShaderNames_NormalPremultipliedAlpha + offset);\n                srcColor = this.gl.ONE;\n                dstColor = this.gl.ONE_MINUS_SRC_ALPHA;\n                srcAlpha = this.gl.ONE;\n                dstAlpha = this.gl.ONE_MINUS_SRC_ALPHA;\n                break;\n            case CubismBlendMode.CubismBlendMode_Additive:\n                shaderSet = this._shaderSets.at(ShaderNames.ShaderNames_AddPremultipliedAlpha + offset);\n                srcColor = this.gl.ONE;\n                dstColor = this.gl.ONE;\n                srcAlpha = this.gl.ZERO;\n                dstAlpha = this.gl.ONE;\n                break;\n            case CubismBlendMode.CubismBlendMode_Multiplicative:\n                shaderSet = this._shaderSets.at(ShaderNames.ShaderNames_MultPremultipliedAlpha + offset);\n                srcColor = this.gl.DST_COLOR;\n                dstColor = this.gl.ONE_MINUS_SRC_ALPHA;\n                srcAlpha = this.gl.ZERO;\n                dstAlpha = this.gl.ONE;\n                break;\n        }\n        this.gl.useProgram(shaderSet.shaderProgram);\n        if (renderer._bufferData.vertex == null) {\n            renderer._bufferData.vertex = this.gl.createBuffer();\n        }\n        this.gl.bindBuffer(this.gl.ARRAY_BUFFER, renderer._bufferData.vertex);\n        const vertexArray = model.getDrawableVertices(index);\n        this.gl.bufferData(this.gl.ARRAY_BUFFER, vertexArray, this.gl.DYNAMIC_DRAW);\n        this.gl.enableVertexAttribArray(shaderSet.attributePositionLocation);\n        this.gl.vertexAttribPointer(shaderSet.attributePositionLocation, 2, this.gl.FLOAT, false, 0, 0);\n        if (renderer._bufferData.uv == null) {\n            renderer._bufferData.uv = this.gl.createBuffer();\n        }\n        this.gl.bindBuffer(this.gl.ARRAY_BUFFER, renderer._bufferData.uv);\n        const uvArray = model.getDrawableVertexUvs(index);\n        this.gl.bufferData(this.gl.ARRAY_BUFFER, uvArray, this.gl.DYNAMIC_DRAW);\n        this.gl.enableVertexAttribArray(shaderSet.attributeTexCoordLocation);\n        this.gl.vertexAttribPointer(shaderSet.attributeTexCoordLocation, 2, this.gl.FLOAT, false, 0, 0);\n        if (masked) {\n            this.gl.activeTexture(this.gl.TEXTURE1);\n            const tex = renderer\n                .getClippingContextBufferForDraw()\n                .getClippingManager()\n                .getColorBuffer()\n                .at(renderer.getClippingContextBufferForDraw()._bufferIndex);\n            this.gl.bindTexture(this.gl.TEXTURE_2D, tex);\n            this.gl.uniform1i(shaderSet.samplerTexture1Location, 1);\n            this.gl.uniformMatrix4fv(shaderSet.uniformClipMatrixLocation, false, renderer.getClippingContextBufferForDraw()._matrixForDraw.getArray());\n            const channelIndex = renderer.getClippingContextBufferForDraw()._layoutChannelIndex;\n            const colorChannel = renderer\n                .getClippingContextBufferForDraw()\n                .getClippingManager()\n                .getChannelFlagAsColor(channelIndex);\n            this.gl.uniform4f(shaderSet.uniformChannelFlagLocation, colorChannel.r, colorChannel.g, colorChannel.b, colorChannel.a);\n        }\n        const textureNo = model.getDrawableTextureIndex(index);\n        const textureId = renderer\n            .getBindedTextures()\n            .getValue(textureNo);\n        this.gl.activeTexture(this.gl.TEXTURE0);\n        this.gl.bindTexture(this.gl.TEXTURE_2D, textureId);\n        this.gl.uniform1i(shaderSet.samplerTexture0Location, 0);\n        const matrix4x4 = renderer.getMvpMatrix();\n        this.gl.uniformMatrix4fv(shaderSet.uniformMatrixLocation, false, matrix4x4.getArray());\n        const baseColor = renderer.getModelColorWithOpacity(model.getDrawableOpacity(index));\n        const multiplyColor = model.getMultiplyColor(index);\n        const screenColor = model.getScreenColor(index);\n        this.gl.uniform4f(shaderSet.uniformBaseColorLocation, baseColor.r, baseColor.g, baseColor.b, baseColor.a);\n        this.gl.uniform4f(shaderSet.uniformMultiplyColorLocation, multiplyColor.r, multiplyColor.g, multiplyColor.b, multiplyColor.a);\n        this.gl.uniform4f(shaderSet.uniformScreenColorLocation, screenColor.r, screenColor.g, screenColor.b, screenColor.a);\n        if (renderer._bufferData.index == null) {\n            renderer._bufferData.index = this.gl.createBuffer();\n        }\n        const indexArray = model.getDrawableVertexIndices(index);\n        this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, renderer._bufferData.index);\n        this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER, indexArray, this.gl.DYNAMIC_DRAW);\n        this.gl.blendFuncSeparate(srcColor, dstColor, srcAlpha, dstAlpha);\n    }\n    setupShaderProgramForMask(renderer, model, index) {\n        if (!renderer.isPremultipliedAlpha()) {\n            CubismLogError('NoPremultipliedAlpha is not allowed');\n        }\n        if (this._shaderSets.getSize() == 0) {\n            this.generateShaders();\n        }\n        const shaderSet = this._shaderSets.at(ShaderNames.ShaderNames_SetupMask);\n        this.gl.useProgram(shaderSet.shaderProgram);\n        if (renderer._bufferData.vertex == null) {\n            renderer._bufferData.vertex = this.gl.createBuffer();\n        }\n        this.gl.bindBuffer(this.gl.ARRAY_BUFFER, renderer._bufferData.vertex);\n        const vertexArray = model.getDrawableVertices(index);\n        this.gl.bufferData(this.gl.ARRAY_BUFFER, vertexArray, this.gl.DYNAMIC_DRAW);\n        this.gl.enableVertexAttribArray(shaderSet.attributePositionLocation);\n        this.gl.vertexAttribPointer(shaderSet.attributePositionLocation, 2, this.gl.FLOAT, false, 0, 0);\n        if (renderer._bufferData.uv == null) {\n            renderer._bufferData.uv = this.gl.createBuffer();\n        }\n        this.gl.bindBuffer(this.gl.ARRAY_BUFFER, renderer._bufferData.uv);\n        const textureNo = model.getDrawableTextureIndex(index);\n        const textureId = renderer\n            .getBindedTextures()\n            .getValue(textureNo);\n        this.gl.activeTexture(this.gl.TEXTURE0);\n        this.gl.bindTexture(this.gl.TEXTURE_2D, textureId);\n        this.gl.uniform1i(shaderSet.samplerTexture0Location, 0);\n        if (renderer._bufferData.uv == null) {\n            renderer._bufferData.uv = this.gl.createBuffer();\n        }\n        this.gl.bindBuffer(this.gl.ARRAY_BUFFER, renderer._bufferData.uv);\n        const uvArray = model.getDrawableVertexUvs(index);\n        this.gl.bufferData(this.gl.ARRAY_BUFFER, uvArray, this.gl.DYNAMIC_DRAW);\n        this.gl.enableVertexAttribArray(shaderSet.attributeTexCoordLocation);\n        this.gl.vertexAttribPointer(shaderSet.attributeTexCoordLocation, 2, this.gl.FLOAT, false, 0, 0);\n        const context = renderer.getClippingContextBufferForMask();\n        const channelIndex = renderer.getClippingContextBufferForMask()._layoutChannelIndex;\n        const colorChannel = renderer\n            .getClippingContextBufferForMask()\n            .getClippingManager()\n            .getChannelFlagAsColor(channelIndex);\n        this.gl.uniform4f(shaderSet.uniformChannelFlagLocation, colorChannel.r, colorChannel.g, colorChannel.b, colorChannel.a);\n        this.gl.uniformMatrix4fv(shaderSet.uniformClipMatrixLocation, false, renderer.getClippingContextBufferForMask()._matrixForMask.getArray());\n        const rect = renderer.getClippingContextBufferForMask()._layoutBounds;\n        this.gl.uniform4f(shaderSet.uniformBaseColorLocation, rect.x * 2.0 - 1.0, rect.y * 2.0 - 1.0, rect.getRight() * 2.0 - 1.0, rect.getBottom() * 2.0 - 1.0);\n        const multiplyColor = model.getMultiplyColor(index);\n        const screenColor = model.getScreenColor(index);\n        this.gl.uniform4f(shaderSet.uniformMultiplyColorLocation, multiplyColor.r, multiplyColor.g, multiplyColor.b, multiplyColor.a);\n        this.gl.uniform4f(shaderSet.uniformScreenColorLocation, screenColor.r, screenColor.g, screenColor.b, screenColor.a);\n        const srcColor = this.gl.ZERO;\n        const dstColor = this.gl.ONE_MINUS_SRC_COLOR;\n        const srcAlpha = this.gl.ZERO;\n        const dstAlpha = this.gl.ONE_MINUS_SRC_ALPHA;\n        if (renderer._bufferData.index == null) {\n            renderer._bufferData.index = this.gl.createBuffer();\n        }\n        const indexArray = model.getDrawableVertexIndices(index);\n        this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, renderer._bufferData.index);\n        this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER, indexArray, this.gl.DYNAMIC_DRAW);\n        this.gl.blendFuncSeparate(srcColor, dstColor, srcAlpha, dstAlpha);\n    }\n    releaseShaderProgram() {\n        for (let i = 0; i < this._shaderSets.getSize(); i++) {\n            this.gl.deleteProgram(this._shaderSets.at(i).shaderProgram);\n            this._shaderSets.at(i).shaderProgram = 0;\n            this._shaderSets.set(i, void 0);\n            this._shaderSets.set(i, null);\n        }\n    }\n    generateShaders() {\n        for (let i = 0; i < ShaderCount; i++) {\n            this._shaderSets.pushBack(new CubismShaderSet());\n        }\n        this._shaderSets.at(0).shaderProgram = this.loadShaderProgram(vertexShaderSrcSetupMask, fragmentShaderSrcsetupMask);\n        this._shaderSets.at(1).shaderProgram = this.loadShaderProgram(vertexShaderSrc, fragmentShaderSrcPremultipliedAlpha);\n        this._shaderSets.at(2).shaderProgram = this.loadShaderProgram(vertexShaderSrcMasked, fragmentShaderSrcMaskPremultipliedAlpha);\n        this._shaderSets.at(3).shaderProgram = this.loadShaderProgram(vertexShaderSrcMasked, fragmentShaderSrcMaskInvertedPremultipliedAlpha);\n        this._shaderSets.at(4).shaderProgram = this._shaderSets.at(1).shaderProgram;\n        this._shaderSets.at(5).shaderProgram = this._shaderSets.at(2).shaderProgram;\n        this._shaderSets.at(6).shaderProgram = this._shaderSets.at(3).shaderProgram;\n        this._shaderSets.at(7).shaderProgram = this._shaderSets.at(1).shaderProgram;\n        this._shaderSets.at(8).shaderProgram = this._shaderSets.at(2).shaderProgram;\n        this._shaderSets.at(9).shaderProgram = this._shaderSets.at(3).shaderProgram;\n        this._shaderSets.at(0).attributePositionLocation =\n            this.gl.getAttribLocation(this._shaderSets.at(0).shaderProgram, 'a_position');\n        this._shaderSets.at(0).attributeTexCoordLocation =\n            this.gl.getAttribLocation(this._shaderSets.at(0).shaderProgram, 'a_texCoord');\n        this._shaderSets.at(0).samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram, 's_texture0');\n        this._shaderSets.at(0).uniformClipMatrixLocation =\n            this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram, 'u_clipMatrix');\n        this._shaderSets.at(0).uniformChannelFlagLocation =\n            this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram, 'u_channelFlag');\n        this._shaderSets.at(0).uniformBaseColorLocation =\n            this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram, 'u_baseColor');\n        this._shaderSets.at(0).uniformMultiplyColorLocation =\n            this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram, 'u_multiplyColor');\n        this._shaderSets.at(0).uniformScreenColorLocation =\n            this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram, 'u_screenColor');\n        this._shaderSets.at(1).attributePositionLocation =\n            this.gl.getAttribLocation(this._shaderSets.at(1).shaderProgram, 'a_position');\n        this._shaderSets.at(1).attributeTexCoordLocation =\n            this.gl.getAttribLocation(this._shaderSets.at(1).shaderProgram, 'a_texCoord');\n        this._shaderSets.at(1).samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram, 's_texture0');\n        this._shaderSets.at(1).uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram, 'u_matrix');\n        this._shaderSets.at(1).uniformBaseColorLocation =\n            this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram, 'u_baseColor');\n        this._shaderSets.at(1).uniformMultiplyColorLocation =\n            this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram, 'u_multiplyColor');\n        this._shaderSets.at(1).uniformScreenColorLocation =\n            this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram, 'u_screenColor');\n        this._shaderSets.at(2).attributePositionLocation =\n            this.gl.getAttribLocation(this._shaderSets.at(2).shaderProgram, 'a_position');\n        this._shaderSets.at(2).attributeTexCoordLocation =\n            this.gl.getAttribLocation(this._shaderSets.at(2).shaderProgram, 'a_texCoord');\n        this._shaderSets.at(2).samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram, 's_texture0');\n        this._shaderSets.at(2).samplerTexture1Location = this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram, 's_texture1');\n        this._shaderSets.at(2).uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram, 'u_matrix');\n        this._shaderSets.at(2).uniformClipMatrixLocation =\n            this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram, 'u_clipMatrix');\n        this._shaderSets.at(2).uniformChannelFlagLocation =\n            this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram, 'u_channelFlag');\n        this._shaderSets.at(2).uniformBaseColorLocation =\n            this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram, 'u_baseColor');\n        this._shaderSets.at(2).uniformMultiplyColorLocation =\n            this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram, 'u_multiplyColor');\n        this._shaderSets.at(2).uniformScreenColorLocation =\n            this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram, 'u_screenColor');\n        this._shaderSets.at(3).attributePositionLocation =\n            this.gl.getAttribLocation(this._shaderSets.at(3).shaderProgram, 'a_position');\n        this._shaderSets.at(3).attributeTexCoordLocation =\n            this.gl.getAttribLocation(this._shaderSets.at(3).shaderProgram, 'a_texCoord');\n        this._shaderSets.at(3).samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram, 's_texture0');\n        this._shaderSets.at(3).samplerTexture1Location = this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram, 's_texture1');\n        this._shaderSets.at(3).uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram, 'u_matrix');\n        this._shaderSets.at(3).uniformClipMatrixLocation =\n            this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram, 'u_clipMatrix');\n        this._shaderSets.at(3).uniformChannelFlagLocation =\n            this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram, 'u_channelFlag');\n        this._shaderSets.at(3).uniformBaseColorLocation =\n            this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram, 'u_baseColor');\n        this._shaderSets.at(3).uniformMultiplyColorLocation =\n            this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram, 'u_multiplyColor');\n        this._shaderSets.at(3).uniformScreenColorLocation =\n            this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram, 'u_screenColor');\n        this._shaderSets.at(4).attributePositionLocation =\n            this.gl.getAttribLocation(this._shaderSets.at(4).shaderProgram, 'a_position');\n        this._shaderSets.at(4).attributeTexCoordLocation =\n            this.gl.getAttribLocation(this._shaderSets.at(4).shaderProgram, 'a_texCoord');\n        this._shaderSets.at(4).samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram, 's_texture0');\n        this._shaderSets.at(4).uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram, 'u_matrix');\n        this._shaderSets.at(4).uniformBaseColorLocation =\n            this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram, 'u_baseColor');\n        this._shaderSets.at(4).uniformMultiplyColorLocation =\n            this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram, 'u_multiplyColor');\n        this._shaderSets.at(4).uniformScreenColorLocation =\n            this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram, 'u_screenColor');\n        this._shaderSets.at(5).attributePositionLocation =\n            this.gl.getAttribLocation(this._shaderSets.at(5).shaderProgram, 'a_position');\n        this._shaderSets.at(5).attributeTexCoordLocation =\n            this.gl.getAttribLocation(this._shaderSets.at(5).shaderProgram, 'a_texCoord');\n        this._shaderSets.at(5).samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram, 's_texture0');\n        this._shaderSets.at(5).samplerTexture1Location = this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram, 's_texture1');\n        this._shaderSets.at(5).uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram, 'u_matrix');\n        this._shaderSets.at(5).uniformClipMatrixLocation =\n            this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram, 'u_clipMatrix');\n        this._shaderSets.at(5).uniformChannelFlagLocation =\n            this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram, 'u_channelFlag');\n        this._shaderSets.at(5).uniformBaseColorLocation =\n            this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram, 'u_baseColor');\n        this._shaderSets.at(5).uniformMultiplyColorLocation =\n            this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram, 'u_multiplyColor');\n        this._shaderSets.at(5).uniformScreenColorLocation =\n            this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram, 'u_screenColor');\n        this._shaderSets.at(6).attributePositionLocation =\n            this.gl.getAttribLocation(this._shaderSets.at(6).shaderProgram, 'a_position');\n        this._shaderSets.at(6).attributeTexCoordLocation =\n            this.gl.getAttribLocation(this._shaderSets.at(6).shaderProgram, 'a_texCoord');\n        this._shaderSets.at(6).samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram, 's_texture0');\n        this._shaderSets.at(6).samplerTexture1Location = this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram, 's_texture1');\n        this._shaderSets.at(6).uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram, 'u_matrix');\n        this._shaderSets.at(6).uniformClipMatrixLocation =\n            this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram, 'u_clipMatrix');\n        this._shaderSets.at(6).uniformChannelFlagLocation =\n            this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram, 'u_channelFlag');\n        this._shaderSets.at(6).uniformBaseColorLocation =\n            this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram, 'u_baseColor');\n        this._shaderSets.at(6).uniformMultiplyColorLocation =\n            this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram, 'u_multiplyColor');\n        this._shaderSets.at(6).uniformScreenColorLocation =\n            this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram, 'u_screenColor');\n        this._shaderSets.at(7).attributePositionLocation =\n            this.gl.getAttribLocation(this._shaderSets.at(7).shaderProgram, 'a_position');\n        this._shaderSets.at(7).attributeTexCoordLocation =\n            this.gl.getAttribLocation(this._shaderSets.at(7).shaderProgram, 'a_texCoord');\n        this._shaderSets.at(7).samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram, 's_texture0');\n        this._shaderSets.at(7).uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram, 'u_matrix');\n        this._shaderSets.at(7).uniformBaseColorLocation =\n            this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram, 'u_baseColor');\n        this._shaderSets.at(7).uniformMultiplyColorLocation =\n            this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram, 'u_multiplyColor');\n        this._shaderSets.at(7).uniformScreenColorLocation =\n            this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram, 'u_screenColor');\n        this._shaderSets.at(8).attributePositionLocation =\n            this.gl.getAttribLocation(this._shaderSets.at(8).shaderProgram, 'a_position');\n        this._shaderSets.at(8).attributeTexCoordLocation =\n            this.gl.getAttribLocation(this._shaderSets.at(8).shaderProgram, 'a_texCoord');\n        this._shaderSets.at(8).samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram, 's_texture0');\n        this._shaderSets.at(8).samplerTexture1Location = this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram, 's_texture1');\n        this._shaderSets.at(8).uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram, 'u_matrix');\n        this._shaderSets.at(8).uniformClipMatrixLocation =\n            this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram, 'u_clipMatrix');\n        this._shaderSets.at(8).uniformChannelFlagLocation =\n            this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram, 'u_channelFlag');\n        this._shaderSets.at(8).uniformBaseColorLocation =\n            this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram, 'u_baseColor');\n        this._shaderSets.at(8).uniformMultiplyColorLocation =\n            this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram, 'u_multiplyColor');\n        this._shaderSets.at(8).uniformScreenColorLocation =\n            this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram, 'u_screenColor');\n        this._shaderSets.at(9).attributePositionLocation =\n            this.gl.getAttribLocation(this._shaderSets.at(9).shaderProgram, 'a_position');\n        this._shaderSets.at(9).attributeTexCoordLocation =\n            this.gl.getAttribLocation(this._shaderSets.at(9).shaderProgram, 'a_texCoord');\n        this._shaderSets.at(9).samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram, 's_texture0');\n        this._shaderSets.at(9).samplerTexture1Location = this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram, 's_texture1');\n        this._shaderSets.at(9).uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram, 'u_matrix');\n        this._shaderSets.at(9).uniformClipMatrixLocation =\n            this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram, 'u_clipMatrix');\n        this._shaderSets.at(9).uniformChannelFlagLocation =\n            this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram, 'u_channelFlag');\n        this._shaderSets.at(9).uniformBaseColorLocation =\n            this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram, 'u_baseColor');\n        this._shaderSets.at(9).uniformMultiplyColorLocation =\n            this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram, 'u_multiplyColor');\n        this._shaderSets.at(9).uniformScreenColorLocation =\n            this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram, 'u_screenColor');\n    }\n    loadShaderProgram(vertexShaderSource, fragmentShaderSource) {\n        let shaderProgram = this.gl.createProgram();\n        let vertShader = this.compileShaderSource(this.gl.VERTEX_SHADER, vertexShaderSource);\n        if (!vertShader) {\n            CubismLogError('Vertex shader compile error!');\n            return 0;\n        }\n        let fragShader = this.compileShaderSource(this.gl.FRAGMENT_SHADER, fragmentShaderSource);\n        if (!fragShader) {\n            CubismLogError('Vertex shader compile error!');\n            return 0;\n        }\n        this.gl.attachShader(shaderProgram, vertShader);\n        this.gl.attachShader(shaderProgram, fragShader);\n        this.gl.linkProgram(shaderProgram);\n        const linkStatus = this.gl.getProgramParameter(shaderProgram, this.gl.LINK_STATUS);\n        if (!linkStatus) {\n            CubismLogError('Failed to link program: {0}', shaderProgram);\n            this.gl.deleteShader(vertShader);\n            vertShader = 0;\n            this.gl.deleteShader(fragShader);\n            fragShader = 0;\n            if (shaderProgram) {\n                this.gl.deleteProgram(shaderProgram);\n                shaderProgram = 0;\n            }\n            return 0;\n        }\n        this.gl.deleteShader(vertShader);\n        this.gl.deleteShader(fragShader);\n        return shaderProgram;\n    }\n    compileShaderSource(shaderType, shaderSource) {\n        const source = shaderSource;\n        const shader = this.gl.createShader(shaderType);\n        this.gl.shaderSource(shader, source);\n        this.gl.compileShader(shader);\n        if (!shader) {\n            const log = this.gl.getShaderInfoLog(shader);\n            CubismLogError('Shader compile log: {0} ', log);\n        }\n        const status = this.gl.getShaderParameter(shader, this.gl.COMPILE_STATUS);\n        if (!status) {\n            this.gl.deleteShader(shader);\n            return null;\n        }\n        return shader;\n    }\n    setGl(gl) {\n        this.gl = gl;\n    }\n}\nexport class CubismShaderManager_WebGL {\n    static getInstance() {\n        if (s_instance == null) {\n            s_instance = new CubismShaderManager_WebGL();\n        }\n        return s_instance;\n    }\n    static deleteInstance() {\n        if (s_instance) {\n            s_instance.release();\n            s_instance = null;\n        }\n    }\n    constructor() {\n        this._shaderMap = new csmMap();\n    }\n    release() {\n        for (const ite = this._shaderMap.begin(); ite.notEqual(this._shaderMap.end()); ite.preIncrement()) {\n            ite.ptr().second.release();\n        }\n        this._shaderMap.clear();\n    }\n    getShader(gl) {\n        return this._shaderMap.getValue(gl);\n    }\n    setGlContext(gl) {\n        if (!this._shaderMap.isExist(gl)) {\n            const instance = new CubismShader_WebGL();\n            instance.setGl(gl);\n            this._shaderMap.setValue(gl, instance);\n        }\n    }\n}\nexport class CubismShaderSet {\n}\nexport var ShaderNames;\n(function (ShaderNames) {\n    ShaderNames[ShaderNames[\"ShaderNames_SetupMask\"] = 0] = \"ShaderNames_SetupMask\";\n    ShaderNames[ShaderNames[\"ShaderNames_NormalPremultipliedAlpha\"] = 1] = \"ShaderNames_NormalPremultipliedAlpha\";\n    ShaderNames[ShaderNames[\"ShaderNames_NormalMaskedPremultipliedAlpha\"] = 2] = \"ShaderNames_NormalMaskedPremultipliedAlpha\";\n    ShaderNames[ShaderNames[\"ShaderNames_NomralMaskedInvertedPremultipliedAlpha\"] = 3] = \"ShaderNames_NomralMaskedInvertedPremultipliedAlpha\";\n    ShaderNames[ShaderNames[\"ShaderNames_AddPremultipliedAlpha\"] = 4] = \"ShaderNames_AddPremultipliedAlpha\";\n    ShaderNames[ShaderNames[\"ShaderNames_AddMaskedPremultipliedAlpha\"] = 5] = \"ShaderNames_AddMaskedPremultipliedAlpha\";\n    ShaderNames[ShaderNames[\"ShaderNames_AddMaskedPremultipliedAlphaInverted\"] = 6] = \"ShaderNames_AddMaskedPremultipliedAlphaInverted\";\n    ShaderNames[ShaderNames[\"ShaderNames_MultPremultipliedAlpha\"] = 7] = \"ShaderNames_MultPremultipliedAlpha\";\n    ShaderNames[ShaderNames[\"ShaderNames_MultMaskedPremultipliedAlpha\"] = 8] = \"ShaderNames_MultMaskedPremultipliedAlpha\";\n    ShaderNames[ShaderNames[\"ShaderNames_MultMaskedPremultipliedAlphaInverted\"] = 9] = \"ShaderNames_MultMaskedPremultipliedAlphaInverted\";\n})(ShaderNames || (ShaderNames = {}));\nexport const vertexShaderSrcSetupMask = 'attribute vec4     a_position;' +\n    'attribute vec2     a_texCoord;' +\n    'varying vec2       v_texCoord;' +\n    'varying vec4       v_myPos;' +\n    'uniform mat4       u_clipMatrix;' +\n    'void main()' +\n    '{' +\n    '   gl_Position = u_clipMatrix * a_position;' +\n    '   v_myPos = u_clipMatrix * a_position;' +\n    '   v_texCoord = a_texCoord;' +\n    '   v_texCoord.y = 1.0 - v_texCoord.y;' +\n    '}';\nexport const fragmentShaderSrcsetupMask = 'precision mediump float;' +\n    'varying vec2       v_texCoord;' +\n    'varying vec4       v_myPos;' +\n    'uniform vec4       u_baseColor;' +\n    'uniform vec4       u_channelFlag;' +\n    'uniform sampler2D  s_texture0;' +\n    'void main()' +\n    '{' +\n    '   float isInside = ' +\n    '       step(u_baseColor.x, v_myPos.x/v_myPos.w)' +\n    '       * step(u_baseColor.y, v_myPos.y/v_myPos.w)' +\n    '       * step(v_myPos.x/v_myPos.w, u_baseColor.z)' +\n    '       * step(v_myPos.y/v_myPos.w, u_baseColor.w);' +\n    '   gl_FragColor = u_channelFlag * texture2D(s_texture0, v_texCoord).a * isInside;' +\n    '}';\nexport const vertexShaderSrc = 'attribute vec4     a_position;' +\n    'attribute vec2     a_texCoord;' +\n    'varying vec2       v_texCoord;' +\n    'uniform mat4       u_matrix;' +\n    'void main()' +\n    '{' +\n    '   gl_Position = u_matrix * a_position;' +\n    '   v_texCoord = a_texCoord;' +\n    '   v_texCoord.y = 1.0 - v_texCoord.y;' +\n    '}';\nexport const vertexShaderSrcMasked = 'attribute vec4     a_position;' +\n    'attribute vec2     a_texCoord;' +\n    'varying vec2       v_texCoord;' +\n    'varying vec4       v_clipPos;' +\n    'uniform mat4       u_matrix;' +\n    'uniform mat4       u_clipMatrix;' +\n    'void main()' +\n    '{' +\n    '   gl_Position = u_matrix * a_position;' +\n    '   v_clipPos = u_clipMatrix * a_position;' +\n    '   v_texCoord = a_texCoord;' +\n    '   v_texCoord.y = 1.0 - v_texCoord.y;' +\n    '}';\nexport const fragmentShaderSrcPremultipliedAlpha = 'precision mediump float;' +\n    'varying vec2       v_texCoord;' +\n    'uniform vec4       u_baseColor;' +\n    'uniform sampler2D  s_texture0;' +\n    'uniform vec4       u_multiplyColor;' +\n    'uniform vec4       u_screenColor;' +\n    'void main()' +\n    '{' +\n    '   vec4 texColor = texture2D(s_texture0, v_texCoord);' +\n    '   texColor.rgb = texColor.rgb * u_multiplyColor.rgb;' +\n    '   texColor.rgb = (texColor.rgb + u_screenColor.rgb * texColor.a) - (texColor.rgb * u_screenColor.rgb);' +\n    '   vec4 color = texColor * u_baseColor;' +\n    '   gl_FragColor = vec4(color.rgb, color.a);' +\n    '}';\nexport const fragmentShaderSrcMaskPremultipliedAlpha = 'precision mediump float;' +\n    'varying vec2       v_texCoord;' +\n    'varying vec4       v_clipPos;' +\n    'uniform vec4       u_baseColor;' +\n    'uniform vec4       u_channelFlag;' +\n    'uniform sampler2D  s_texture0;' +\n    'uniform sampler2D  s_texture1;' +\n    'uniform vec4       u_multiplyColor;' +\n    'uniform vec4       u_screenColor;' +\n    'void main()' +\n    '{' +\n    '   vec4 texColor = texture2D(s_texture0, v_texCoord);' +\n    '   texColor.rgb = texColor.rgb * u_multiplyColor.rgb;' +\n    '   texColor.rgb = (texColor.rgb + u_screenColor.rgb * texColor.a) - (texColor.rgb * u_screenColor.rgb);' +\n    '   vec4 col_formask = texColor * u_baseColor;' +\n    '   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;' +\n    '   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;' +\n    '   col_formask = col_formask * maskVal;' +\n    '   gl_FragColor = col_formask;' +\n    '}';\nexport const fragmentShaderSrcMaskInvertedPremultipliedAlpha = 'precision mediump float;' +\n    'varying vec2      v_texCoord;' +\n    'varying vec4      v_clipPos;' +\n    'uniform sampler2D s_texture0;' +\n    'uniform sampler2D s_texture1;' +\n    'uniform vec4      u_channelFlag;' +\n    'uniform vec4      u_baseColor;' +\n    'uniform vec4      u_multiplyColor;' +\n    'uniform vec4      u_screenColor;' +\n    'void main()' +\n    '{' +\n    '   vec4 texColor = texture2D(s_texture0, v_texCoord);' +\n    '   texColor.rgb = texColor.rgb * u_multiplyColor.rgb;' +\n    '   texColor.rgb = (texColor.rgb + u_screenColor.rgb * texColor.a) - (texColor.rgb * u_screenColor.rgb);' +\n    '   vec4 col_formask = texColor * u_baseColor;' +\n    '   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;' +\n    '   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;' +\n    '   col_formask = col_formask * (1.0 - maskVal);' +\n    '   gl_FragColor = col_formask;' +\n    '}';\nimport * as $ from './cubismshader_webgl';\nexport var Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismShaderSet = $.CubismShaderSet;\n    Live2DCubismFramework.CubismShader_WebGL = $.CubismShader_WebGL;\n    Live2DCubismFramework.CubismShaderManager_WebGL = $.CubismShaderManager_WebGL;\n    Live2DCubismFramework.ShaderNames = $.ShaderNames;\n})(Live2DCubismFramework || (Live2DCubismFramework = {}));\n","import { csmMap } from '../type/csmmap';\nimport { csmVector } from '../type/csmvector';\nimport { CubismLogError } from '../utils/cubismdebug';\nimport { CubismClippingManager } from './cubismclippingmanager';\nimport { CubismClippingContext, CubismRenderer } from './cubismrenderer';\nimport { CubismShaderManager_WebGL } from './cubismshader_webgl';\nlet s_viewport;\nlet s_fbo;\nexport class CubismClippingManager_WebGL extends CubismClippingManager {\n    getMaskRenderTexture() {\n        if (this._maskTexture && this._maskTexture.textures != null) {\n            this._maskTexture.frameNo = this._currentFrameNo;\n        }\n        else {\n            if (this._maskRenderTextures != null) {\n                this._maskRenderTextures.clear();\n            }\n            this._maskRenderTextures = new csmVector();\n            if (this._maskColorBuffers != null) {\n                this._maskColorBuffers.clear();\n            }\n            this._maskColorBuffers = new csmVector();\n            const size = this._clippingMaskBufferSize;\n            for (let index = 0; index < this._renderTextureCount; index++) {\n                this._maskColorBuffers.pushBack(this.gl.createTexture());\n                this.gl.bindTexture(this.gl.TEXTURE_2D, this._maskColorBuffers.at(index));\n                this.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.gl.RGBA, size, size, 0, this.gl.RGBA, this.gl.UNSIGNED_BYTE, null);\n                this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_S, this.gl.CLAMP_TO_EDGE);\n                this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_T, this.gl.CLAMP_TO_EDGE);\n                this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MIN_FILTER, this.gl.LINEAR);\n                this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MAG_FILTER, this.gl.LINEAR);\n                this.gl.bindTexture(this.gl.TEXTURE_2D, null);\n                this._maskRenderTextures.pushBack(this.gl.createFramebuffer());\n                this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, this._maskRenderTextures.at(index));\n                this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER, this.gl.COLOR_ATTACHMENT0, this.gl.TEXTURE_2D, this._maskColorBuffers.at(index), 0);\n            }\n            this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, s_fbo);\n            this._maskTexture = new CubismRenderTextureResource(this._currentFrameNo, this._maskRenderTextures);\n        }\n        return this._maskTexture.textures;\n    }\n    setGL(gl) {\n        this.gl = gl;\n    }\n    constructor() {\n        super(CubismClippingContext_WebGL);\n    }\n    setupClippingContext(model, renderer) {\n        this._currentFrameNo++;\n        let usingClipCount = 0;\n        for (let clipIndex = 0; clipIndex < this._clippingContextListForMask.getSize(); clipIndex++) {\n            const cc = this._clippingContextListForMask.at(clipIndex);\n            this.calcClippedDrawTotalBounds(model, cc);\n            if (cc._isUsing) {\n                usingClipCount++;\n            }\n        }\n        if (usingClipCount > 0) {\n            this.gl.viewport(0, 0, this._clippingMaskBufferSize, this._clippingMaskBufferSize);\n            this._currentMaskRenderTexture = this.getMaskRenderTexture().at(0);\n            renderer.preDraw();\n            this.setupLayoutBounds(usingClipCount);\n            this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, this._currentMaskRenderTexture);\n            if (this._clearedFrameBufferFlags.getSize() != this._renderTextureCount) {\n                this._clearedFrameBufferFlags.clear();\n                this._clearedFrameBufferFlags = new csmVector(this._renderTextureCount);\n            }\n            for (let index = 0; index < this._clearedFrameBufferFlags.getSize(); index++) {\n                this._clearedFrameBufferFlags.set(index, false);\n            }\n            for (let clipIndex = 0; clipIndex < this._clippingContextListForMask.getSize(); clipIndex++) {\n                const clipContext = this._clippingContextListForMask.at(clipIndex);\n                const allClipedDrawRect = clipContext._allClippedDrawRect;\n                const layoutBoundsOnTex01 = clipContext._layoutBounds;\n                const margin = 0.05;\n                let scaleX = 0;\n                let scaleY = 0;\n                const clipContextRenderTexture = this.getMaskRenderTexture().at(clipContext._bufferIndex);\n                if (this._currentMaskRenderTexture != clipContextRenderTexture) {\n                    this._currentMaskRenderTexture = clipContextRenderTexture;\n                    renderer.preDraw();\n                    this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, this._currentMaskRenderTexture);\n                }\n                this._tmpBoundsOnModel.setRect(allClipedDrawRect);\n                this._tmpBoundsOnModel.expand(allClipedDrawRect.width * margin, allClipedDrawRect.height * margin);\n                scaleX = layoutBoundsOnTex01.width / this._tmpBoundsOnModel.width;\n                scaleY = layoutBoundsOnTex01.height / this._tmpBoundsOnModel.height;\n                {\n                    this._tmpMatrix.loadIdentity();\n                    {\n                        this._tmpMatrix.translateRelative(-1.0, -1.0);\n                        this._tmpMatrix.scaleRelative(2.0, 2.0);\n                    }\n                    {\n                        this._tmpMatrix.translateRelative(layoutBoundsOnTex01.x, layoutBoundsOnTex01.y);\n                        this._tmpMatrix.scaleRelative(scaleX, scaleY);\n                        this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x, -this._tmpBoundsOnModel.y);\n                    }\n                    this._tmpMatrixForMask.setMatrix(this._tmpMatrix.getArray());\n                }\n                {\n                    this._tmpMatrix.loadIdentity();\n                    {\n                        this._tmpMatrix.translateRelative(layoutBoundsOnTex01.x, layoutBoundsOnTex01.y);\n                        this._tmpMatrix.scaleRelative(scaleX, scaleY);\n                        this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x, -this._tmpBoundsOnModel.y);\n                    }\n                    this._tmpMatrixForDraw.setMatrix(this._tmpMatrix.getArray());\n                }\n                clipContext._matrixForMask.setMatrix(this._tmpMatrixForMask.getArray());\n                clipContext._matrixForDraw.setMatrix(this._tmpMatrixForDraw.getArray());\n                const clipDrawCount = clipContext._clippingIdCount;\n                for (let i = 0; i < clipDrawCount; i++) {\n                    const clipDrawIndex = clipContext._clippingIdList[i];\n                    if (!model.getDrawableDynamicFlagVertexPositionsDidChange(clipDrawIndex)) {\n                        continue;\n                    }\n                    renderer.setIsCulling(model.getDrawableCulling(clipDrawIndex) != false);\n                    if (!this._clearedFrameBufferFlags.at(clipContext._bufferIndex)) {\n                        this.gl.clearColor(1.0, 1.0, 1.0, 1.0);\n                        this.gl.clear(this.gl.COLOR_BUFFER_BIT);\n                        this._clearedFrameBufferFlags.set(clipContext._bufferIndex, true);\n                    }\n                    renderer.setClippingContextBufferForMask(clipContext);\n                    renderer.drawMeshWebGL(model, clipDrawIndex);\n                }\n            }\n            this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, s_fbo);\n            renderer.setClippingContextBufferForMask(null);\n            this.gl.viewport(s_viewport[0], s_viewport[1], s_viewport[2], s_viewport[3]);\n        }\n    }\n    getColorBuffer() {\n        return this._maskColorBuffers;\n    }\n    getClippingMaskCount() {\n        return this._clippingContextListForMask.getSize();\n    }\n}\nexport class CubismRenderTextureResource {\n    constructor(frameNo, texture) {\n        this.frameNo = frameNo;\n        this.textures = texture;\n    }\n}\nexport class CubismClippingContext_WebGL extends CubismClippingContext {\n    constructor(manager, clippingDrawableIndices, clipCount) {\n        super(clippingDrawableIndices, clipCount);\n        this._owner = manager;\n    }\n    getClippingManager() {\n        return this._owner;\n    }\n    setGl(gl) {\n        this._owner.setGL(gl);\n    }\n}\nexport class CubismRendererProfile_WebGL {\n    setGlEnable(index, enabled) {\n        if (enabled)\n            this.gl.enable(index);\n        else\n            this.gl.disable(index);\n    }\n    setGlEnableVertexAttribArray(index, enabled) {\n        if (enabled)\n            this.gl.enableVertexAttribArray(index);\n        else\n            this.gl.disableVertexAttribArray(index);\n    }\n    save() {\n        if (this.gl == null) {\n            CubismLogError(\"'gl' is null. WebGLRenderingContext is required.\\nPlease call 'CubimRenderer_WebGL.startUp' function.\");\n            return;\n        }\n        this._lastArrayBufferBinding = this.gl.getParameter(this.gl.ARRAY_BUFFER_BINDING);\n        this._lastElementArrayBufferBinding = this.gl.getParameter(this.gl.ELEMENT_ARRAY_BUFFER_BINDING);\n        this._lastProgram = this.gl.getParameter(this.gl.CURRENT_PROGRAM);\n        this._lastActiveTexture = this.gl.getParameter(this.gl.ACTIVE_TEXTURE);\n        this.gl.activeTexture(this.gl.TEXTURE1);\n        this._lastTexture1Binding2D = this.gl.getParameter(this.gl.TEXTURE_BINDING_2D);\n        this.gl.activeTexture(this.gl.TEXTURE0);\n        this._lastTexture0Binding2D = this.gl.getParameter(this.gl.TEXTURE_BINDING_2D);\n        this._lastVertexAttribArrayEnabled[0] = this.gl.getVertexAttrib(0, this.gl.VERTEX_ATTRIB_ARRAY_ENABLED);\n        this._lastVertexAttribArrayEnabled[1] = this.gl.getVertexAttrib(1, this.gl.VERTEX_ATTRIB_ARRAY_ENABLED);\n        this._lastVertexAttribArrayEnabled[2] = this.gl.getVertexAttrib(2, this.gl.VERTEX_ATTRIB_ARRAY_ENABLED);\n        this._lastVertexAttribArrayEnabled[3] = this.gl.getVertexAttrib(3, this.gl.VERTEX_ATTRIB_ARRAY_ENABLED);\n        this._lastScissorTest = this.gl.isEnabled(this.gl.SCISSOR_TEST);\n        this._lastStencilTest = this.gl.isEnabled(this.gl.STENCIL_TEST);\n        this._lastDepthTest = this.gl.isEnabled(this.gl.DEPTH_TEST);\n        this._lastCullFace = this.gl.isEnabled(this.gl.CULL_FACE);\n        this._lastBlend = this.gl.isEnabled(this.gl.BLEND);\n        this._lastFrontFace = this.gl.getParameter(this.gl.FRONT_FACE);\n        this._lastColorMask = this.gl.getParameter(this.gl.COLOR_WRITEMASK);\n        this._lastBlending[0] = this.gl.getParameter(this.gl.BLEND_SRC_RGB);\n        this._lastBlending[1] = this.gl.getParameter(this.gl.BLEND_DST_RGB);\n        this._lastBlending[2] = this.gl.getParameter(this.gl.BLEND_SRC_ALPHA);\n        this._lastBlending[3] = this.gl.getParameter(this.gl.BLEND_DST_ALPHA);\n        this._lastFBO = this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING);\n        this._lastViewport = this.gl.getParameter(this.gl.VIEWPORT);\n    }\n    restore() {\n        if (this.gl == null) {\n            CubismLogError(\"'gl' is null. WebGLRenderingContext is required.\\nPlease call 'CubimRenderer_WebGL.startUp' function.\");\n            return;\n        }\n        this.gl.useProgram(this._lastProgram);\n        this.setGlEnableVertexAttribArray(0, this._lastVertexAttribArrayEnabled[0]);\n        this.setGlEnableVertexAttribArray(1, this._lastVertexAttribArrayEnabled[1]);\n        this.setGlEnableVertexAttribArray(2, this._lastVertexAttribArrayEnabled[2]);\n        this.setGlEnableVertexAttribArray(3, this._lastVertexAttribArrayEnabled[3]);\n        this.setGlEnable(this.gl.SCISSOR_TEST, this._lastScissorTest);\n        this.setGlEnable(this.gl.STENCIL_TEST, this._lastStencilTest);\n        this.setGlEnable(this.gl.DEPTH_TEST, this._lastDepthTest);\n        this.setGlEnable(this.gl.CULL_FACE, this._lastCullFace);\n        this.setGlEnable(this.gl.BLEND, this._lastBlend);\n        this.gl.frontFace(this._lastFrontFace);\n        this.gl.colorMask(this._lastColorMask[0], this._lastColorMask[1], this._lastColorMask[2], this._lastColorMask[3]);\n        this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this._lastArrayBufferBinding);\n        this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this._lastElementArrayBufferBinding);\n        this.gl.activeTexture(this.gl.TEXTURE1);\n        this.gl.bindTexture(this.gl.TEXTURE_2D, this._lastTexture1Binding2D);\n        this.gl.activeTexture(this.gl.TEXTURE0);\n        this.gl.bindTexture(this.gl.TEXTURE_2D, this._lastTexture0Binding2D);\n        this.gl.activeTexture(this._lastActiveTexture);\n        this.gl.blendFuncSeparate(this._lastBlending[0], this._lastBlending[1], this._lastBlending[2], this._lastBlending[3]);\n    }\n    setGl(gl) {\n        this.gl = gl;\n    }\n    constructor() {\n        this._lastVertexAttribArrayEnabled = new Array(4);\n        this._lastColorMask = new Array(4);\n        this._lastBlending = new Array(4);\n        this._lastViewport = new Array(4);\n    }\n}\nexport class CubismRenderer_WebGL extends CubismRenderer {\n    initialize(model, maskBufferCount = 1) {\n        if (model.isUsingMasking()) {\n            this._clippingManager = new CubismClippingManager_WebGL();\n            this._clippingManager.initialize(model, maskBufferCount);\n        }\n        this._sortedDrawableIndexList.resize(model.getDrawableCount(), 0);\n        super.initialize(model);\n    }\n    bindTexture(modelTextureNo, glTexture) {\n        this._textures.setValue(modelTextureNo, glTexture);\n    }\n    getBindedTextures() {\n        return this._textures;\n    }\n    setClippingMaskBufferSize(size) {\n        if (!this._model.isUsingMasking()) {\n            return;\n        }\n        const renderTextureCount = this._clippingManager.getRenderTextureCount();\n        this._clippingManager.release();\n        this._clippingManager = void 0;\n        this._clippingManager = null;\n        this._clippingManager = new CubismClippingManager_WebGL();\n        this._clippingManager.setClippingMaskBufferSize(size);\n        this._clippingManager.initialize(this.getModel(), renderTextureCount);\n    }\n    getClippingMaskBufferSize() {\n        return this._model.isUsingMasking()\n            ? this._clippingManager.getClippingMaskBufferSize()\n            : -1;\n    }\n    getRenderTextureCount() {\n        return this._model.isUsingMasking()\n            ? this._clippingManager.getRenderTextureCount()\n            : -1;\n    }\n    constructor() {\n        super();\n        this._clippingContextBufferForMask = null;\n        this._clippingContextBufferForDraw = null;\n        this._rendererProfile = new CubismRendererProfile_WebGL();\n        this.firstDraw = true;\n        this._textures = new csmMap();\n        this._sortedDrawableIndexList = new csmVector();\n        this._bufferData = {\n            vertex: (WebGLBuffer = null),\n            uv: (WebGLBuffer = null),\n            index: (WebGLBuffer = null)\n        };\n        this._textures.prepareCapacity(32, true);\n    }\n    release() {\n        if (this._clippingManager) {\n            this._clippingManager.release();\n            this._clippingManager = void 0;\n            this._clippingManager = null;\n        }\n        if (this.gl == null) {\n            return;\n        }\n        this.gl.deleteBuffer(this._bufferData.vertex);\n        this._bufferData.vertex = null;\n        this.gl.deleteBuffer(this._bufferData.uv);\n        this._bufferData.uv = null;\n        this.gl.deleteBuffer(this._bufferData.index);\n        this._bufferData.index = null;\n        this._bufferData = null;\n        this._textures = null;\n    }\n    doDrawModel() {\n        if (this.gl == null) {\n            CubismLogError(\"'gl' is null. WebGLRenderingContext is required.\\nPlease call 'CubimRenderer_WebGL.startUp' function.\");\n            return;\n        }\n        if (this._clippingManager != null) {\n            this.preDraw();\n            if (this.isUsingHighPrecisionMask()) {\n                this._clippingManager.setupMatrixForHighPrecision(this.getModel(), false);\n            }\n            else {\n                this._clippingManager.setupClippingContext(this.getModel(), this);\n            }\n        }\n        this.preDraw();\n        const drawableCount = this.getModel().getDrawableCount();\n        const renderOrder = this.getModel().getDrawableRenderOrders();\n        for (let i = 0; i < drawableCount; ++i) {\n            const order = renderOrder[i];\n            this._sortedDrawableIndexList.set(order, i);\n        }\n        for (let i = 0; i < drawableCount; ++i) {\n            const drawableIndex = this._sortedDrawableIndexList.at(i);\n            if (!this.getModel().getDrawableDynamicFlagIsVisible(drawableIndex)) {\n                continue;\n            }\n            const clipContext = this._clippingManager != null\n                ? this._clippingManager\n                    .getClippingContextListForDraw()\n                    .at(drawableIndex)\n                : null;\n            if (clipContext != null && this.isUsingHighPrecisionMask()) {\n                if (clipContext._isUsing) {\n                    this.gl.viewport(0, 0, this._clippingManager.getClippingMaskBufferSize(), this._clippingManager.getClippingMaskBufferSize());\n                    this.preDraw();\n                    this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, clipContext\n                        .getClippingManager()\n                        .getMaskRenderTexture()\n                        .at(clipContext._bufferIndex));\n                    this.gl.clearColor(1.0, 1.0, 1.0, 1.0);\n                    this.gl.clear(this.gl.COLOR_BUFFER_BIT);\n                }\n                {\n                    const clipDrawCount = clipContext._clippingIdCount;\n                    for (let index = 0; index < clipDrawCount; index++) {\n                        const clipDrawIndex = clipContext._clippingIdList[index];\n                        if (!this._model.getDrawableDynamicFlagVertexPositionsDidChange(clipDrawIndex)) {\n                            continue;\n                        }\n                        this.setIsCulling(this._model.getDrawableCulling(clipDrawIndex) != false);\n                        this.setClippingContextBufferForMask(clipContext);\n                        this.drawMeshWebGL(this._model, clipDrawIndex);\n                    }\n                }\n                {\n                    this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, s_fbo);\n                    this.setClippingContextBufferForMask(null);\n                    this.gl.viewport(s_viewport[0], s_viewport[1], s_viewport[2], s_viewport[3]);\n                    this.preDraw();\n                }\n            }\n            this.setClippingContextBufferForDraw(clipContext);\n            this.setIsCulling(this.getModel().getDrawableCulling(drawableIndex));\n            this.drawMeshWebGL(this._model, drawableIndex);\n        }\n    }\n    drawMeshWebGL(model, index) {\n        if (this.isCulling()) {\n            this.gl.enable(this.gl.CULL_FACE);\n        }\n        else {\n            this.gl.disable(this.gl.CULL_FACE);\n        }\n        this.gl.frontFace(this.gl.CCW);\n        if (this.isGeneratingMask()) {\n            CubismShaderManager_WebGL.getInstance()\n                .getShader(this.gl)\n                .setupShaderProgramForMask(this, model, index);\n        }\n        else {\n            CubismShaderManager_WebGL.getInstance()\n                .getShader(this.gl)\n                .setupShaderProgramForDraw(this, model, index);\n        }\n        {\n            const indexCount = model.getDrawableVertexIndexCount(index);\n            this.gl.drawElements(this.gl.TRIANGLES, indexCount, this.gl.UNSIGNED_SHORT, 0);\n        }\n        this.gl.useProgram(null);\n        this.setClippingContextBufferForDraw(null);\n        this.setClippingContextBufferForMask(null);\n    }\n    saveProfile() {\n        this._rendererProfile.save();\n    }\n    restoreProfile() {\n        this._rendererProfile.restore();\n    }\n    static doStaticRelease() {\n        CubismShaderManager_WebGL.deleteInstance();\n    }\n    setRenderState(fbo, viewport) {\n        s_fbo = fbo;\n        s_viewport = viewport;\n    }\n    preDraw() {\n        if (this.firstDraw) {\n            this.firstDraw = false;\n        }\n        this.gl.disable(this.gl.SCISSOR_TEST);\n        this.gl.disable(this.gl.STENCIL_TEST);\n        this.gl.disable(this.gl.DEPTH_TEST);\n        this.gl.frontFace(this.gl.CW);\n        this.gl.enable(this.gl.BLEND);\n        this.gl.colorMask(true, true, true, true);\n        this.gl.bindBuffer(this.gl.ARRAY_BUFFER, null);\n        this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, null);\n        if (this.getAnisotropy() > 0.0 && this._extension) {\n            for (let i = 0; i < this._textures.getSize(); ++i) {\n                this.gl.bindTexture(this.gl.TEXTURE_2D, this._textures.getValue(i));\n                this.gl.texParameterf(this.gl.TEXTURE_2D, this._extension.TEXTURE_MAX_ANISOTROPY_EXT, this.getAnisotropy());\n            }\n        }\n    }\n    setClippingContextBufferForMask(clip) {\n        this._clippingContextBufferForMask = clip;\n    }\n    getClippingContextBufferForMask() {\n        return this._clippingContextBufferForMask;\n    }\n    setClippingContextBufferForDraw(clip) {\n        this._clippingContextBufferForDraw = clip;\n    }\n    getClippingContextBufferForDraw() {\n        return this._clippingContextBufferForDraw;\n    }\n    isGeneratingMask() {\n        return this.getClippingContextBufferForMask() != null;\n    }\n    startUp(gl) {\n        this.gl = gl;\n        if (this._clippingManager) {\n            this._clippingManager.setGL(gl);\n        }\n        CubismShaderManager_WebGL.getInstance().setGlContext(gl);\n        this._rendererProfile.setGl(gl);\n        this._extension =\n            this.gl.getExtension('EXT_texture_filter_anisotropic') ||\n                this.gl.getExtension('WEBKIT_EXT_texture_filter_anisotropic') ||\n                this.gl.getExtension('MOZ_EXT_texture_filter_anisotropic');\n    }\n}\nCubismRenderer.staticRelease = () => {\n    CubismRenderer_WebGL.doStaticRelease();\n};\nimport * as $ from './cubismrenderer_webgl';\nexport var Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismClippingContext = $.CubismClippingContext_WebGL;\n    Live2DCubismFramework.CubismClippingManager_WebGL = $.CubismClippingManager_WebGL;\n    Live2DCubismFramework.CubismRenderTextureResource = $.CubismRenderTextureResource;\n    Live2DCubismFramework.CubismRenderer_WebGL = $.CubismRenderer_WebGL;\n})(Live2DCubismFramework || (Live2DCubismFramework = {}));\n","import { CubismFramework } from '../live2dcubismframework';\nimport { CubismMath } from '../math/cubismmath';\nimport { CubismBlendMode, CubismTextureColor } from '../rendering/cubismrenderer';\nimport { csmMap } from '../type/csmmap';\nimport { csmVector } from '../type/csmvector';\nimport { CSM_ASSERT, CubismLogWarning } from '../utils/cubismdebug';\nexport class ParameterRepeatData {\n    constructor(isOverridden = false, isParameterRepeated = false) {\n        this.isOverridden = isOverridden;\n        this.isParameterRepeated = isParameterRepeated;\n    }\n}\nexport class DrawableColorData {\n    constructor(isOverridden = false, color = new CubismTextureColor()) {\n        this.isOverridden = isOverridden;\n        this.color = color;\n    }\n    get isOverwritten() {\n        return this.isOverridden;\n    }\n}\nexport class PartColorData {\n    constructor(isOverridden = false, color = new CubismTextureColor()) {\n        this.isOverridden = isOverridden;\n        this.color = color;\n    }\n    get isOverwritten() {\n        return this.isOverridden;\n    }\n}\nexport class DrawableCullingData {\n    constructor(isOverridden = false, isCulling = false) {\n        this.isOverridden = isOverridden;\n        this.isCulling = isCulling;\n    }\n    get isOverwritten() {\n        return this.isOverridden;\n    }\n}\nexport class CubismModel {\n    update() {\n        this._model.update();\n        this._model.drawables.resetDynamicFlags();\n    }\n    getPixelsPerUnit() {\n        if (this._model == null) {\n            return 0.0;\n        }\n        return this._model.canvasinfo.PixelsPerUnit;\n    }\n    getCanvasWidth() {\n        if (this._model == null) {\n            return 0.0;\n        }\n        return (this._model.canvasinfo.CanvasWidth / this._model.canvasinfo.PixelsPerUnit);\n    }\n    getCanvasHeight() {\n        if (this._model == null) {\n            return 0.0;\n        }\n        return (this._model.canvasinfo.CanvasHeight / this._model.canvasinfo.PixelsPerUnit);\n    }\n    saveParameters() {\n        const parameterCount = this._model.parameters.count;\n        const savedParameterCount = this._savedParameters.getSize();\n        for (let i = 0; i < parameterCount; ++i) {\n            if (i < savedParameterCount) {\n                this._savedParameters.set(i, this._parameterValues[i]);\n            }\n            else {\n                this._savedParameters.pushBack(this._parameterValues[i]);\n            }\n        }\n    }\n    getMultiplyColor(index) {\n        if (this.getOverrideFlagForModelMultiplyColors() ||\n            this.getOverrideFlagForDrawableMultiplyColors(index)) {\n            return this._userMultiplyColors.at(index).color;\n        }\n        const color = this.getDrawableMultiplyColor(index);\n        return color;\n    }\n    getScreenColor(index) {\n        if (this.getOverrideFlagForModelScreenColors() ||\n            this.getOverrideFlagForDrawableScreenColors(index)) {\n            return this._userScreenColors.at(index).color;\n        }\n        const color = this.getDrawableScreenColor(index);\n        return color;\n    }\n    setMultiplyColorByTextureColor(index, color) {\n        this.setMultiplyColorByRGBA(index, color.r, color.g, color.b, color.a);\n    }\n    setMultiplyColorByRGBA(index, r, g, b, a = 1.0) {\n        this._userMultiplyColors.at(index).color.r = r;\n        this._userMultiplyColors.at(index).color.g = g;\n        this._userMultiplyColors.at(index).color.b = b;\n        this._userMultiplyColors.at(index).color.a = a;\n    }\n    setScreenColorByTextureColor(index, color) {\n        this.setScreenColorByRGBA(index, color.r, color.g, color.b, color.a);\n    }\n    setScreenColorByRGBA(index, r, g, b, a = 1.0) {\n        this._userScreenColors.at(index).color.r = r;\n        this._userScreenColors.at(index).color.g = g;\n        this._userScreenColors.at(index).color.b = b;\n        this._userScreenColors.at(index).color.a = a;\n    }\n    getPartMultiplyColor(partIndex) {\n        return this._userPartMultiplyColors.at(partIndex).color;\n    }\n    getPartScreenColor(partIndex) {\n        return this._userPartScreenColors.at(partIndex).color;\n    }\n    setPartColor(partIndex, r, g, b, a, partColors, drawableColors) {\n        partColors.at(partIndex).color.r = r;\n        partColors.at(partIndex).color.g = g;\n        partColors.at(partIndex).color.b = b;\n        partColors.at(partIndex).color.a = a;\n        if (partColors.at(partIndex).isOverridden) {\n            for (let i = 0; i < this._partChildDrawables.at(partIndex).getSize(); ++i) {\n                const drawableIndex = this._partChildDrawables.at(partIndex).at(i);\n                drawableColors.at(drawableIndex).color.r = r;\n                drawableColors.at(drawableIndex).color.g = g;\n                drawableColors.at(drawableIndex).color.b = b;\n                drawableColors.at(drawableIndex).color.a = a;\n            }\n        }\n    }\n    setPartMultiplyColorByTextureColor(partIndex, color) {\n        this.setPartMultiplyColorByRGBA(partIndex, color.r, color.g, color.b, color.a);\n    }\n    setPartMultiplyColorByRGBA(partIndex, r, g, b, a) {\n        this.setPartColor(partIndex, r, g, b, a, this._userPartMultiplyColors, this._userMultiplyColors);\n    }\n    setPartScreenColorByTextureColor(partIndex, color) {\n        this.setPartScreenColorByRGBA(partIndex, color.r, color.g, color.b, color.a);\n    }\n    setPartScreenColorByRGBA(partIndex, r, g, b, a) {\n        this.setPartColor(partIndex, r, g, b, a, this._userPartScreenColors, this._userScreenColors);\n    }\n    getOverrideFlagForModelParameterRepeat() {\n        return this._isOverriddenParameterRepeat;\n    }\n    setOverrideFlagForModelParameterRepeat(isRepeat) {\n        this._isOverriddenParameterRepeat = isRepeat;\n    }\n    getOverrideFlagForParameterRepeat(parameterIndex) {\n        return this._userParameterRepeatDataList.at(parameterIndex).isOverridden;\n    }\n    setOverrideFlagForParameterRepeat(parameterIndex, value) {\n        this._userParameterRepeatDataList.at(parameterIndex).isOverridden = value;\n    }\n    getRepeatFlagForParameterRepeat(parameterIndex) {\n        return this._userParameterRepeatDataList.at(parameterIndex)\n            .isParameterRepeated;\n    }\n    setRepeatFlagForParameterRepeat(parameterIndex, value) {\n        this._userParameterRepeatDataList.at(parameterIndex).isParameterRepeated =\n            value;\n    }\n    getOverwriteFlagForModelMultiplyColors() {\n        CubismLogWarning('getOverwriteFlagForModelMultiplyColors() is a deprecated function. Please use getOverrideFlagForModelMultiplyColors().');\n        return this.getOverrideFlagForModelMultiplyColors();\n    }\n    getOverrideFlagForModelMultiplyColors() {\n        return this._isOverriddenModelMultiplyColors;\n    }\n    getOverwriteFlagForModelScreenColors() {\n        CubismLogWarning('getOverwriteFlagForModelScreenColors() is a deprecated function. Please use getOverrideFlagForModelScreenColors().');\n        return this.getOverrideFlagForModelScreenColors();\n    }\n    getOverrideFlagForModelScreenColors() {\n        return this._isOverriddenModelScreenColors;\n    }\n    setOverwriteFlagForModelMultiplyColors(value) {\n        CubismLogWarning('setOverwriteFlagForModelMultiplyColors(value: boolean) is a deprecated function. Please use setOverrideFlagForModelMultiplyColors(value: boolean).');\n        this.setOverrideFlagForModelMultiplyColors(value);\n    }\n    setOverrideFlagForModelMultiplyColors(value) {\n        this._isOverriddenModelMultiplyColors = value;\n    }\n    setOverwriteFlagForModelScreenColors(value) {\n        CubismLogWarning('setOverwriteFlagForModelScreenColors(value: boolean) is a deprecated function. Please use setOverrideFlagForModelScreenColors(value: boolean).');\n        this.setOverrideFlagForModelScreenColors(value);\n    }\n    setOverrideFlagForModelScreenColors(value) {\n        this._isOverriddenModelScreenColors = value;\n    }\n    getOverwriteFlagForDrawableMultiplyColors(drawableindex) {\n        CubismLogWarning('getOverwriteFlagForDrawableMultiplyColors(drawableindex: number) is a deprecated function. Please use getOverrideFlagForDrawableMultiplyColors(drawableindex: number).');\n        return this.getOverrideFlagForDrawableMultiplyColors(drawableindex);\n    }\n    getOverrideFlagForDrawableMultiplyColors(drawableindex) {\n        return this._userMultiplyColors.at(drawableindex).isOverridden;\n    }\n    getOverwriteFlagForDrawableScreenColors(drawableindex) {\n        CubismLogWarning('getOverwriteFlagForDrawableScreenColors(drawableindex: number) is a deprecated function. Please use getOverrideFlagForDrawableScreenColors(drawableindex: number).');\n        return this.getOverrideFlagForDrawableScreenColors(drawableindex);\n    }\n    getOverrideFlagForDrawableScreenColors(drawableindex) {\n        return this._userScreenColors.at(drawableindex).isOverridden;\n    }\n    setOverwriteFlagForDrawableMultiplyColors(drawableindex, value) {\n        CubismLogWarning('setOverwriteFlagForDrawableMultiplyColors(drawableindex: number, value: boolean) is a deprecated function. Please use setOverrideFlagForDrawableMultiplyColors(drawableindex: number, value: boolean).');\n        this.setOverrideFlagForDrawableMultiplyColors(drawableindex, value);\n    }\n    setOverrideFlagForDrawableMultiplyColors(drawableindex, value) {\n        this._userMultiplyColors.at(drawableindex).isOverridden = value;\n    }\n    setOverwriteFlagForDrawableScreenColors(drawableindex, value) {\n        CubismLogWarning('setOverwriteFlagForDrawableScreenColors(drawableindex: number, value: boolean) is a deprecated function. Please use setOverrideFlagForDrawableScreenColors(drawableindex: number, value: boolean).');\n        this.setOverrideFlagForDrawableScreenColors(drawableindex, value);\n    }\n    setOverrideFlagForDrawableScreenColors(drawableindex, value) {\n        this._userScreenColors.at(drawableindex).isOverridden = value;\n    }\n    getOverwriteColorForPartMultiplyColors(partIndex) {\n        CubismLogWarning('getOverwriteColorForPartMultiplyColors(partIndex: number) is a deprecated function. Please use getOverrideColorForPartMultiplyColors(partIndex: number).');\n        return this.getOverrideColorForPartMultiplyColors(partIndex);\n    }\n    getOverrideColorForPartMultiplyColors(partIndex) {\n        return this._userPartMultiplyColors.at(partIndex).isOverridden;\n    }\n    getOverwriteColorForPartScreenColors(partIndex) {\n        CubismLogWarning('getOverwriteColorForPartScreenColors(partIndex: number) is a deprecated function. Please use getOverrideColorForPartScreenColors(partIndex: number).');\n        return this.getOverrideColorForPartScreenColors(partIndex);\n    }\n    getOverrideColorForPartScreenColors(partIndex) {\n        return this._userPartScreenColors.at(partIndex).isOverridden;\n    }\n    setOverwriteColorForPartColors(partIndex, value, partColors, drawableColors) {\n        CubismLogWarning('setOverwriteColorForPartColors(partIndex: number, value: boolean, partColors: csmVector<PartColorData>, drawableColors: csmVector<DrawableColorData>) is a deprecated function. Please use setOverrideColorForPartColors(partIndex: number, value: boolean, partColors: csmVector<PartColorData>, drawableColors: csmVector<DrawableColorData>).');\n        this.setOverrideColorForPartColors(partIndex, value, partColors, drawableColors);\n    }\n    setOverrideColorForPartColors(partIndex, value, partColors, drawableColors) {\n        partColors.at(partIndex).isOverridden = value;\n        for (let i = 0; i < this._partChildDrawables.at(partIndex).getSize(); ++i) {\n            const drawableIndex = this._partChildDrawables.at(partIndex).at(i);\n            drawableColors.at(drawableIndex).isOverridden = value;\n            if (value) {\n                drawableColors.at(drawableIndex).color.r =\n                    partColors.at(partIndex).color.r;\n                drawableColors.at(drawableIndex).color.g =\n                    partColors.at(partIndex).color.g;\n                drawableColors.at(drawableIndex).color.b =\n                    partColors.at(partIndex).color.b;\n                drawableColors.at(drawableIndex).color.a =\n                    partColors.at(partIndex).color.a;\n            }\n        }\n    }\n    setOverwriteColorForPartMultiplyColors(partIndex, value) {\n        CubismLogWarning('setOverwriteColorForPartMultiplyColors(partIndex: number, value: boolean) is a deprecated function. Please use setOverrideColorForPartMultiplyColors(partIndex: number, value: boolean).');\n        this.setOverrideColorForPartMultiplyColors(partIndex, value);\n    }\n    setOverrideColorForPartMultiplyColors(partIndex, value) {\n        this._userPartMultiplyColors.at(partIndex).isOverridden = value;\n        this.setOverrideColorForPartColors(partIndex, value, this._userPartMultiplyColors, this._userMultiplyColors);\n    }\n    setOverwriteColorForPartScreenColors(partIndex, value) {\n        CubismLogWarning('setOverwriteColorForPartScreenColors(partIndex: number, value: boolean) is a deprecated function. Please use setOverrideColorForPartScreenColors(partIndex: number, value: boolean).');\n        this.setOverrideColorForPartScreenColors(partIndex, value);\n    }\n    setOverrideColorForPartScreenColors(partIndex, value) {\n        this._userPartScreenColors.at(partIndex).isOverridden = value;\n        this.setOverrideColorForPartColors(partIndex, value, this._userPartScreenColors, this._userScreenColors);\n    }\n    getDrawableCulling(drawableIndex) {\n        if (this.getOverrideFlagForModelCullings() ||\n            this.getOverrideFlagForDrawableCullings(drawableIndex)) {\n            return this._userCullings.at(drawableIndex).isCulling;\n        }\n        const constantFlags = this._model.drawables.constantFlags;\n        return !Live2DCubismCore.Utils.hasIsDoubleSidedBit(constantFlags[drawableIndex]);\n    }\n    setDrawableCulling(drawableIndex, isCulling) {\n        this._userCullings.at(drawableIndex).isCulling = isCulling;\n    }\n    getOverwriteFlagForModelCullings() {\n        CubismLogWarning('getOverwriteFlagForModelCullings() is a deprecated function. Please use getOverrideFlagForModelCullings().');\n        return this.getOverrideFlagForModelCullings();\n    }\n    getOverrideFlagForModelCullings() {\n        return this._isOverriddenCullings;\n    }\n    setOverwriteFlagForModelCullings(isOverriddenCullings) {\n        CubismLogWarning('setOverwriteFlagForModelCullings(isOverriddenCullings: boolean) is a deprecated function. Please use setOverrideFlagForModelCullings(isOverriddenCullings: boolean).');\n        this.setOverrideFlagForModelCullings(isOverriddenCullings);\n    }\n    setOverrideFlagForModelCullings(isOverriddenCullings) {\n        this._isOverriddenCullings = isOverriddenCullings;\n    }\n    getOverwriteFlagForDrawableCullings(drawableIndex) {\n        CubismLogWarning('getOverwriteFlagForDrawableCullings(drawableIndex: number) is a deprecated function. Please use getOverrideFlagForDrawableCullings(drawableIndex: number).');\n        return this.getOverrideFlagForDrawableCullings(drawableIndex);\n    }\n    getOverrideFlagForDrawableCullings(drawableIndex) {\n        return this._userCullings.at(drawableIndex).isOverridden;\n    }\n    setOverwriteFlagForDrawableCullings(drawableIndex, isOverriddenCullings) {\n        CubismLogWarning('setOverwriteFlagForDrawableCullings(drawableIndex: number, isOverriddenCullings: boolean) is a deprecated function. Please use setOverrideFlagForDrawableCullings(drawableIndex: number, isOverriddenCullings: boolean).');\n        this.setOverrideFlagForDrawableCullings(drawableIndex, isOverriddenCullings);\n    }\n    setOverrideFlagForDrawableCullings(drawableIndex, isOverriddenCullings) {\n        this._userCullings.at(drawableIndex).isOverridden = isOverriddenCullings;\n    }\n    getModelOapcity() {\n        return this._modelOpacity;\n    }\n    setModelOapcity(value) {\n        this._modelOpacity = value;\n    }\n    getModel() {\n        return this._model;\n    }\n    getPartIndex(partId) {\n        let partIndex;\n        const partCount = this._model.parts.count;\n        for (partIndex = 0; partIndex < partCount; ++partIndex) {\n            if (partId == this._partIds.at(partIndex)) {\n                return partIndex;\n            }\n        }\n        if (this._notExistPartId.isExist(partId)) {\n            return this._notExistPartId.getValue(partId);\n        }\n        partIndex = partCount + this._notExistPartId.getSize();\n        this._notExistPartId.setValue(partId, partIndex);\n        this._notExistPartOpacities.appendKey(partIndex);\n        return partIndex;\n    }\n    getPartId(partIndex) {\n        const partId = this._model.parts.ids[partIndex];\n        return CubismFramework.getIdManager().getId(partId);\n    }\n    getPartCount() {\n        const partCount = this._model.parts.count;\n        return partCount;\n    }\n    getPartParentPartIndices() {\n        const parentIndices = this._model.parts.parentIndices;\n        return parentIndices;\n    }\n    setPartOpacityByIndex(partIndex, opacity) {\n        if (this._notExistPartOpacities.isExist(partIndex)) {\n            this._notExistPartOpacities.setValue(partIndex, opacity);\n            return;\n        }\n        CSM_ASSERT(0 <= partIndex && partIndex < this.getPartCount());\n        this._partOpacities[partIndex] = opacity;\n    }\n    setPartOpacityById(partId, opacity) {\n        const index = this.getPartIndex(partId);\n        if (index < 0) {\n            return;\n        }\n        this.setPartOpacityByIndex(index, opacity);\n    }\n    getPartOpacityByIndex(partIndex) {\n        if (this._notExistPartOpacities.isExist(partIndex)) {\n            return this._notExistPartOpacities.getValue(partIndex);\n        }\n        CSM_ASSERT(0 <= partIndex && partIndex < this.getPartCount());\n        return this._partOpacities[partIndex];\n    }\n    getPartOpacityById(partId) {\n        const index = this.getPartIndex(partId);\n        if (index < 0) {\n            return 0;\n        }\n        return this.getPartOpacityByIndex(index);\n    }\n    getParameterIndex(parameterId) {\n        let parameterIndex;\n        const idCount = this._model.parameters.count;\n        for (parameterIndex = 0; parameterIndex < idCount; ++parameterIndex) {\n            if (parameterId != this._parameterIds.at(parameterIndex)) {\n                continue;\n            }\n            return parameterIndex;\n        }\n        if (this._notExistParameterId.isExist(parameterId)) {\n            return this._notExistParameterId.getValue(parameterId);\n        }\n        parameterIndex =\n            this._model.parameters.count + this._notExistParameterId.getSize();\n        this._notExistParameterId.setValue(parameterId, parameterIndex);\n        this._notExistParameterValues.appendKey(parameterIndex);\n        return parameterIndex;\n    }\n    getParameterCount() {\n        return this._model.parameters.count;\n    }\n    getParameterType(parameterIndex) {\n        return this._model.parameters.types[parameterIndex];\n    }\n    getParameterMaximumValue(parameterIndex) {\n        return this._model.parameters.maximumValues[parameterIndex];\n    }\n    getParameterMinimumValue(parameterIndex) {\n        return this._model.parameters.minimumValues[parameterIndex];\n    }\n    getParameterDefaultValue(parameterIndex) {\n        return this._model.parameters.defaultValues[parameterIndex];\n    }\n    getParameterId(parameterIndex) {\n        return CubismFramework.getIdManager().getId(this._model.parameters.ids[parameterIndex]);\n    }\n    getParameterValueByIndex(parameterIndex) {\n        if (this._notExistParameterValues.isExist(parameterIndex)) {\n            return this._notExistParameterValues.getValue(parameterIndex);\n        }\n        CSM_ASSERT(0 <= parameterIndex && parameterIndex < this.getParameterCount());\n        return this._parameterValues[parameterIndex];\n    }\n    getParameterValueById(parameterId) {\n        const parameterIndex = this.getParameterIndex(parameterId);\n        return this.getParameterValueByIndex(parameterIndex);\n    }\n    setParameterValueByIndex(parameterIndex, value, weight = 1.0) {\n        if (this._notExistParameterValues.isExist(parameterIndex)) {\n            this._notExistParameterValues.setValue(parameterIndex, weight == 1\n                ? value\n                : this._notExistParameterValues.getValue(parameterIndex) *\n                    (1 - weight) +\n                    value * weight);\n            return;\n        }\n        CSM_ASSERT(0 <= parameterIndex && parameterIndex < this.getParameterCount());\n        if (this.isRepeat(parameterIndex)) {\n            value = this.getParameterRepeatValue(parameterIndex, value);\n        }\n        else {\n            value = this.getParameterClampValue(parameterIndex, value);\n        }\n        this._parameterValues[parameterIndex] =\n            weight == 1\n                ? value\n                : (this._parameterValues[parameterIndex] =\n                    this._parameterValues[parameterIndex] * (1 - weight) +\n                        value * weight);\n    }\n    setParameterValueById(parameterId, value, weight = 1.0) {\n        const index = this.getParameterIndex(parameterId);\n        this.setParameterValueByIndex(index, value, weight);\n    }\n    addParameterValueByIndex(parameterIndex, value, weight = 1.0) {\n        this.setParameterValueByIndex(parameterIndex, this.getParameterValueByIndex(parameterIndex) + value * weight);\n    }\n    addParameterValueById(parameterId, value, weight = 1.0) {\n        const index = this.getParameterIndex(parameterId);\n        this.addParameterValueByIndex(index, value, weight);\n    }\n    isRepeat(parameterIndex) {\n        if (this._notExistParameterValues.isExist(parameterIndex)) {\n            return false;\n        }\n        CSM_ASSERT(0 <= parameterIndex && parameterIndex < this.getParameterCount());\n        let isRepeat;\n        if (this._isOverriddenParameterRepeat ||\n            this._userParameterRepeatDataList.at(parameterIndex).isOverridden) {\n            isRepeat =\n                this._userParameterRepeatDataList.at(parameterIndex).isParameterRepeated;\n        }\n        else {\n            isRepeat = this._model.parameters.repeats[parameterIndex] != 0;\n        }\n        return isRepeat;\n    }\n    getParameterRepeatValue(parameterIndex, value) {\n        if (this._notExistParameterValues.isExist(parameterIndex)) {\n            return value;\n        }\n        CSM_ASSERT(0 <= parameterIndex && parameterIndex < this.getParameterCount());\n        const maxValue = this._model.parameters.maximumValues[parameterIndex];\n        const minValue = this._model.parameters.minimumValues[parameterIndex];\n        const valueSize = maxValue - minValue;\n        if (maxValue < value) {\n            const overValue = CubismMath.mod(value - maxValue, valueSize);\n            if (!Number.isNaN(overValue)) {\n                value = minValue + overValue;\n            }\n            else {\n                value = maxValue;\n            }\n        }\n        if (value < minValue) {\n            const overValue = CubismMath.mod(minValue - value, valueSize);\n            if (!Number.isNaN(overValue)) {\n                value = maxValue - overValue;\n            }\n            else {\n                value = minValue;\n            }\n        }\n        return value;\n    }\n    getParameterClampValue(parameterIndex, value) {\n        if (this._notExistParameterValues.isExist(parameterIndex)) {\n            return value;\n        }\n        CSM_ASSERT(0 <= parameterIndex && parameterIndex < this.getParameterCount());\n        const maxValue = this._model.parameters.maximumValues[parameterIndex];\n        const minValue = this._model.parameters.minimumValues[parameterIndex];\n        return CubismMath.clamp(value, minValue, maxValue);\n    }\n    getParameterRepeats(parameterIndex) {\n        return this._model.parameters.repeats[parameterIndex] != 0;\n    }\n    multiplyParameterValueById(parameterId, value, weight = 1.0) {\n        const index = this.getParameterIndex(parameterId);\n        this.multiplyParameterValueByIndex(index, value, weight);\n    }\n    multiplyParameterValueByIndex(parameterIndex, value, weight = 1.0) {\n        this.setParameterValueByIndex(parameterIndex, this.getParameterValueByIndex(parameterIndex) *\n            (1.0 + (value - 1.0) * weight));\n    }\n    getDrawableIndex(drawableId) {\n        const drawableCount = this._model.drawables.count;\n        for (let drawableIndex = 0; drawableIndex < drawableCount; ++drawableIndex) {\n            if (this._drawableIds.at(drawableIndex) == drawableId) {\n                return drawableIndex;\n            }\n        }\n        return -1;\n    }\n    getDrawableCount() {\n        const drawableCount = this._model.drawables.count;\n        return drawableCount;\n    }\n    getDrawableId(drawableIndex) {\n        const parameterIds = this._model.drawables.ids;\n        return CubismFramework.getIdManager().getId(parameterIds[drawableIndex]);\n    }\n    getDrawableRenderOrders() {\n        const renderOrders = this._model.drawables.renderOrders;\n        return renderOrders;\n    }\n    getDrawableTextureIndices(drawableIndex) {\n        return this.getDrawableTextureIndex(drawableIndex);\n    }\n    getDrawableTextureIndex(drawableIndex) {\n        const textureIndices = this._model.drawables.textureIndices;\n        return textureIndices[drawableIndex];\n    }\n    getDrawableDynamicFlagVertexPositionsDidChange(drawableIndex) {\n        const dynamicFlags = this._model.drawables.dynamicFlags;\n        return Live2DCubismCore.Utils.hasVertexPositionsDidChangeBit(dynamicFlags[drawableIndex]);\n    }\n    getDrawableVertexIndexCount(drawableIndex) {\n        const indexCounts = this._model.drawables.indexCounts;\n        return indexCounts[drawableIndex];\n    }\n    getDrawableVertexCount(drawableIndex) {\n        const vertexCounts = this._model.drawables.vertexCounts;\n        return vertexCounts[drawableIndex];\n    }\n    getDrawableVertices(drawableIndex) {\n        return this.getDrawableVertexPositions(drawableIndex);\n    }\n    getDrawableVertexIndices(drawableIndex) {\n        const indicesArray = this._model.drawables.indices;\n        return indicesArray[drawableIndex];\n    }\n    getDrawableVertexPositions(drawableIndex) {\n        const verticesArray = this._model.drawables.vertexPositions;\n        return verticesArray[drawableIndex];\n    }\n    getDrawableVertexUvs(drawableIndex) {\n        const uvsArray = this._model.drawables.vertexUvs;\n        return uvsArray[drawableIndex];\n    }\n    getDrawableOpacity(drawableIndex) {\n        const opacities = this._model.drawables.opacities;\n        return opacities[drawableIndex];\n    }\n    getDrawableMultiplyColor(drawableIndex) {\n        const multiplyColors = this._model.drawables.multiplyColors;\n        const index = drawableIndex * 4;\n        const multiplyColor = new CubismTextureColor();\n        multiplyColor.r = multiplyColors[index];\n        multiplyColor.g = multiplyColors[index + 1];\n        multiplyColor.b = multiplyColors[index + 2];\n        multiplyColor.a = multiplyColors[index + 3];\n        return multiplyColor;\n    }\n    getDrawableScreenColor(drawableIndex) {\n        const screenColors = this._model.drawables.screenColors;\n        const index = drawableIndex * 4;\n        const screenColor = new CubismTextureColor();\n        screenColor.r = screenColors[index];\n        screenColor.g = screenColors[index + 1];\n        screenColor.b = screenColors[index + 2];\n        screenColor.a = screenColors[index + 3];\n        return screenColor;\n    }\n    getDrawableParentPartIndex(drawableIndex) {\n        return this._model.drawables.parentPartIndices[drawableIndex];\n    }\n    getDrawableBlendMode(drawableIndex) {\n        const constantFlags = this._model.drawables.constantFlags;\n        return Live2DCubismCore.Utils.hasBlendAdditiveBit(constantFlags[drawableIndex])\n            ? CubismBlendMode.CubismBlendMode_Additive\n            : Live2DCubismCore.Utils.hasBlendMultiplicativeBit(constantFlags[drawableIndex])\n                ? CubismBlendMode.CubismBlendMode_Multiplicative\n                : CubismBlendMode.CubismBlendMode_Normal;\n    }\n    getDrawableInvertedMaskBit(drawableIndex) {\n        const constantFlags = this._model.drawables.constantFlags;\n        return Live2DCubismCore.Utils.hasIsInvertedMaskBit(constantFlags[drawableIndex]);\n    }\n    getDrawableMasks() {\n        const masks = this._model.drawables.masks;\n        return masks;\n    }\n    getDrawableMaskCounts() {\n        const maskCounts = this._model.drawables.maskCounts;\n        return maskCounts;\n    }\n    isUsingMasking() {\n        for (let d = 0; d < this._model.drawables.count; ++d) {\n            if (this._model.drawables.maskCounts[d] <= 0) {\n                continue;\n            }\n            return true;\n        }\n        return false;\n    }\n    getDrawableDynamicFlagIsVisible(drawableIndex) {\n        const dynamicFlags = this._model.drawables.dynamicFlags;\n        return Live2DCubismCore.Utils.hasIsVisibleBit(dynamicFlags[drawableIndex]);\n    }\n    getDrawableDynamicFlagVisibilityDidChange(drawableIndex) {\n        const dynamicFlags = this._model.drawables.dynamicFlags;\n        return Live2DCubismCore.Utils.hasVisibilityDidChangeBit(dynamicFlags[drawableIndex]);\n    }\n    getDrawableDynamicFlagOpacityDidChange(drawableIndex) {\n        const dynamicFlags = this._model.drawables.dynamicFlags;\n        return Live2DCubismCore.Utils.hasOpacityDidChangeBit(dynamicFlags[drawableIndex]);\n    }\n    getDrawableDynamicFlagRenderOrderDidChange(drawableIndex) {\n        const dynamicFlags = this._model.drawables.dynamicFlags;\n        return Live2DCubismCore.Utils.hasRenderOrderDidChangeBit(dynamicFlags[drawableIndex]);\n    }\n    getDrawableDynamicFlagBlendColorDidChange(drawableIndex) {\n        const dynamicFlags = this._model.drawables.dynamicFlags;\n        return Live2DCubismCore.Utils.hasBlendColorDidChangeBit(dynamicFlags[drawableIndex]);\n    }\n    loadParameters() {\n        let parameterCount = this._model.parameters.count;\n        const savedParameterCount = this._savedParameters.getSize();\n        if (parameterCount > savedParameterCount) {\n            parameterCount = savedParameterCount;\n        }\n        for (let i = 0; i < parameterCount; ++i) {\n            this._parameterValues[i] = this._savedParameters.at(i);\n        }\n    }\n    initialize() {\n        CSM_ASSERT(this._model);\n        this._parameterValues = this._model.parameters.values;\n        this._partOpacities = this._model.parts.opacities;\n        this._parameterMaximumValues = this._model.parameters.maximumValues;\n        this._parameterMinimumValues = this._model.parameters.minimumValues;\n        {\n            const parameterIds = this._model.parameters.ids;\n            const parameterCount = this._model.parameters.count;\n            this._parameterIds.prepareCapacity(parameterCount);\n            this._userParameterRepeatDataList.prepareCapacity(parameterCount);\n            for (let i = 0; i < parameterCount; ++i) {\n                this._parameterIds.pushBack(CubismFramework.getIdManager().getId(parameterIds[i]));\n                this._userParameterRepeatDataList.pushBack(new ParameterRepeatData(false, false));\n            }\n        }\n        const partCount = this._model.parts.count;\n        {\n            const partIds = this._model.parts.ids;\n            this._partIds.prepareCapacity(partCount);\n            for (let i = 0; i < partCount; ++i) {\n                this._partIds.pushBack(CubismFramework.getIdManager().getId(partIds[i]));\n            }\n            this._userPartMultiplyColors.prepareCapacity(partCount);\n            this._userPartScreenColors.prepareCapacity(partCount);\n            this._partChildDrawables.prepareCapacity(partCount);\n        }\n        {\n            const drawableIds = this._model.drawables.ids;\n            const drawableCount = this._model.drawables.count;\n            this._userMultiplyColors.prepareCapacity(drawableCount);\n            this._userScreenColors.prepareCapacity(drawableCount);\n            this._userCullings.prepareCapacity(drawableCount);\n            const userCulling = new DrawableCullingData(false, false);\n            {\n                for (let i = 0; i < partCount; ++i) {\n                    const multiplyColor = new CubismTextureColor(1.0, 1.0, 1.0, 1.0);\n                    const screenColor = new CubismTextureColor(0.0, 0.0, 0.0, 1.0);\n                    const userMultiplyColor = new PartColorData(false, multiplyColor);\n                    const userScreenColor = new PartColorData(false, screenColor);\n                    this._userPartMultiplyColors.pushBack(userMultiplyColor);\n                    this._userPartScreenColors.pushBack(userScreenColor);\n                    this._partChildDrawables.pushBack(new csmVector());\n                    this._partChildDrawables.at(i).prepareCapacity(drawableCount);\n                }\n            }\n            {\n                for (let i = 0; i < drawableCount; ++i) {\n                    const multiplyColor = new CubismTextureColor(1.0, 1.0, 1.0, 1.0);\n                    const screenColor = new CubismTextureColor(0.0, 0.0, 0.0, 1.0);\n                    const userMultiplyColor = new DrawableColorData(false, multiplyColor);\n                    const userScreenColor = new DrawableColorData(false, screenColor);\n                    this._drawableIds.pushBack(CubismFramework.getIdManager().getId(drawableIds[i]));\n                    this._userMultiplyColors.pushBack(userMultiplyColor);\n                    this._userScreenColors.pushBack(userScreenColor);\n                    this._userCullings.pushBack(userCulling);\n                    const parentIndex = this.getDrawableParentPartIndex(i);\n                    if (parentIndex >= 0) {\n                        this._partChildDrawables.at(parentIndex).pushBack(i);\n                    }\n                }\n            }\n        }\n    }\n    constructor(model) {\n        this._model = model;\n        this._parameterValues = null;\n        this._parameterMaximumValues = null;\n        this._parameterMinimumValues = null;\n        this._partOpacities = null;\n        this._savedParameters = new csmVector();\n        this._parameterIds = new csmVector();\n        this._drawableIds = new csmVector();\n        this._partIds = new csmVector();\n        this._isOverriddenParameterRepeat = true;\n        this._isOverriddenModelMultiplyColors = false;\n        this._isOverriddenModelScreenColors = false;\n        this._isOverriddenCullings = false;\n        this._modelOpacity = 1.0;\n        this._userParameterRepeatDataList = new csmVector();\n        this._userMultiplyColors = new csmVector();\n        this._userScreenColors = new csmVector();\n        this._userCullings = new csmVector();\n        this._userPartMultiplyColors = new csmVector();\n        this._userPartScreenColors = new csmVector();\n        this._partChildDrawables = new csmVector();\n        this._notExistPartId = new csmMap();\n        this._notExistParameterId = new csmMap();\n        this._notExistParameterValues = new csmMap();\n        this._notExistPartOpacities = new csmMap();\n    }\n    release() {\n        this._model.release();\n        this._model = null;\n    }\n}\nimport * as $ from './cubismmodel';\nexport var Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismModel = $.CubismModel;\n})(Live2DCubismFramework || (Live2DCubismFramework = {}));\n","import { CSM_ASSERT, CubismLogError } from '../utils/cubismdebug';\nimport { CubismModel } from './cubismmodel';\nexport class CubismMoc {\n    static create(mocBytes, shouldCheckMocConsistency) {\n        let cubismMoc = null;\n        if (shouldCheckMocConsistency) {\n            const consistency = this.hasMocConsistency(mocBytes);\n            if (!consistency) {\n                CubismLogError(`Inconsistent MOC3.`);\n                return cubismMoc;\n            }\n        }\n        const moc = Live2DCubismCore.Moc.fromArrayBuffer(mocBytes);\n        if (moc) {\n            cubismMoc = new CubismMoc(moc);\n            cubismMoc._mocVersion = Live2DCubismCore.Version.csmGetMocVersion(moc, mocBytes);\n        }\n        return cubismMoc;\n    }\n    static delete(moc) {\n        moc._moc._release();\n        moc._moc = null;\n        moc = null;\n    }\n    createModel() {\n        let cubismModel = null;\n        const model = Live2DCubismCore.Model.fromMoc(this._moc);\n        if (model) {\n            cubismModel = new CubismModel(model);\n            cubismModel.initialize();\n            ++this._modelCount;\n        }\n        return cubismModel;\n    }\n    deleteModel(model) {\n        if (model != null) {\n            model.release();\n            model = null;\n            --this._modelCount;\n        }\n    }\n    constructor(moc) {\n        this._moc = moc;\n        this._modelCount = 0;\n        this._mocVersion = 0;\n    }\n    release() {\n        CSM_ASSERT(this._modelCount == 0);\n        this._moc._release();\n        this._moc = null;\n    }\n    getLatestMocVersion() {\n        return Live2DCubismCore.Version.csmGetLatestMocVersion();\n    }\n    getMocVersion() {\n        return this._mocVersion;\n    }\n    static hasMocConsistency(mocBytes) {\n        const isConsistent = Live2DCubismCore.Moc.prototype.hasMocConsistency(mocBytes);\n        return isConsistent === 1 ? true : false;\n    }\n}\nimport * as $ from './cubismmoc';\nexport var Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismMoc = $.CubismMoc;\n})(Live2DCubismFramework || (Live2DCubismFramework = {}));\n","import { CubismFramework } from '../live2dcubismframework';\nimport { CubismJson } from '../utils/cubismjson';\nconst Meta = 'Meta';\nconst UserDataCount = 'UserDataCount';\nconst TotalUserDataSize = 'TotalUserDataSize';\nconst UserData = 'UserData';\nconst Target = 'Target';\nconst Id = 'Id';\nconst Value = 'Value';\nexport class CubismModelUserDataJson {\n    constructor(buffer, size) {\n        this._json = CubismJson.create(buffer, size);\n    }\n    release() {\n        CubismJson.delete(this._json);\n    }\n    getUserDataCount() {\n        return this._json\n            .getRoot()\n            .getValueByString(Meta)\n            .getValueByString(UserDataCount)\n            .toInt();\n    }\n    getTotalUserDataSize() {\n        return this._json\n            .getRoot()\n            .getValueByString(Meta)\n            .getValueByString(TotalUserDataSize)\n            .toInt();\n    }\n    getUserDataTargetType(i) {\n        return this._json\n            .getRoot()\n            .getValueByString(UserData)\n            .getValueByIndex(i)\n            .getValueByString(Target)\n            .getRawString();\n    }\n    getUserDataId(i) {\n        return CubismFramework.getIdManager().getId(this._json\n            .getRoot()\n            .getValueByString(UserData)\n            .getValueByIndex(i)\n            .getValueByString(Id)\n            .getRawString());\n    }\n    getUserDataValue(i) {\n        return this._json\n            .getRoot()\n            .getValueByString(UserData)\n            .getValueByIndex(i)\n            .getValueByString(Value)\n            .getRawString();\n    }\n}\nimport * as $ from './cubismmodeluserdatajson';\nexport var Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismModelUserDataJson = $.CubismModelUserDataJson;\n})(Live2DCubismFramework || (Live2DCubismFramework = {}));\n","import { CubismFramework } from '../live2dcubismframework';\nimport { csmString } from '../type/csmstring';\nimport { csmVector } from '../type/csmvector';\nimport { CubismModelUserDataJson } from './cubismmodeluserdatajson';\nconst ArtMesh = 'ArtMesh';\nexport class CubismModelUserDataNode {\n}\nexport class CubismModelUserData {\n    static create(buffer, size) {\n        const ret = new CubismModelUserData();\n        ret.parseUserData(buffer, size);\n        return ret;\n    }\n    static delete(modelUserData) {\n        if (modelUserData != null) {\n            modelUserData.release();\n            modelUserData = null;\n        }\n    }\n    getArtMeshUserDatas() {\n        return this._artMeshUserDataNode;\n    }\n    parseUserData(buffer, size) {\n        let json = new CubismModelUserDataJson(buffer, size);\n        if (!json) {\n            json.release();\n            json = void 0;\n            return;\n        }\n        const typeOfArtMesh = CubismFramework.getIdManager().getId(ArtMesh);\n        const nodeCount = json.getUserDataCount();\n        for (let i = 0; i < nodeCount; i++) {\n            const addNode = new CubismModelUserDataNode();\n            addNode.targetId = json.getUserDataId(i);\n            addNode.targetType = CubismFramework.getIdManager().getId(json.getUserDataTargetType(i));\n            addNode.value = new csmString(json.getUserDataValue(i));\n            this._userDataNodes.pushBack(addNode);\n            if (addNode.targetType == typeOfArtMesh) {\n                this._artMeshUserDataNode.pushBack(addNode);\n            }\n        }\n        json.release();\n        json = void 0;\n    }\n    constructor() {\n        this._userDataNodes = new csmVector();\n        this._artMeshUserDataNode = new csmVector();\n    }\n    release() {\n        for (let i = 0; i < this._userDataNodes.getSize(); ++i) {\n            this._userDataNodes.set(i, null);\n        }\n        this._userDataNodes = null;\n    }\n}\nimport * as $ from './cubismmodeluserdata';\nexport var Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismModelUserData = $.CubismModelUserData;\n    Live2DCubismFramework.CubismModelUserDataNode = $.CubismModelUserDataNode;\n})(Live2DCubismFramework || (Live2DCubismFramework = {}));\n","import { CubismBreath } from '../effect/cubismbreath';\nimport { CubismEyeBlink } from '../effect/cubismeyeblink';\nimport { CubismPose } from '../effect/cubismpose';\nimport { Constant } from '../live2dcubismframework';\nimport { CubismModelMatrix } from '../math/cubismmodelmatrix';\nimport { CubismMouthTargetPoint, CubismTargetPoint, } from '../math/cubismtargetpoint';\nimport { CubismExpressionMotion } from '../motion/cubismexpressionmotion';\nimport { CubismExpressionMotionManager } from '../motion/cubismexpressionmotionmanager';\nimport { CubismMotion } from '../motion/cubismmotion';\nimport { CubismMotionManager } from '../motion/cubismmotionmanager';\nimport { CubismPhysics } from '../physics/cubismphysics';\nimport { CubismRenderer_WebGL } from '../rendering/cubismrenderer_webgl';\nimport { CubismLogError, CubismLogInfo } from '../utils/cubismdebug';\nimport { CubismMoc } from './cubismmoc';\nimport { CubismModelUserData } from './cubismmodeluserdata';\nexport class CubismUserModel {\n    isInitialized() {\n        return this._initialized;\n    }\n    setInitialized(v) {\n        this._initialized = v;\n    }\n    isUpdating() {\n        return this._updating;\n    }\n    setUpdating(v) {\n        this._updating = v;\n    }\n    setDragging(x, y) {\n        this._dragManager.set(x, y);\n    }\n    setMouthTarget(value) {\n        this._mouthManager.setMouthTarget(value);\n    }\n    setMouthValueImmediate(value) {\n        this._mouthManager.setMouthValueImmediate(value);\n    }\n    getMouthValue() {\n        return this._mouthManager.getMouthValue();\n    }\n    setAcceleration(x, y, z) {\n        this._accelerationX = x;\n        this._accelerationY = y;\n        this._accelerationZ = z;\n    }\n    getModelMatrix() {\n        return this._modelMatrix;\n    }\n    setOpacity(a) {\n        this._opacity = a;\n    }\n    getOpacity() {\n        return this._opacity;\n    }\n    loadModel(buffer, shouldCheckMocConsistency = false) {\n        this._moc = CubismMoc.create(buffer, shouldCheckMocConsistency);\n        if (this._moc == null) {\n            CubismLogError('Failed to CubismMoc.create().');\n            return;\n        }\n        this._model = this._moc.createModel();\n        if (this._model == null) {\n            CubismLogError('Failed to CreateModel().');\n            return;\n        }\n        this._model.saveParameters();\n        this._modelMatrix = new CubismModelMatrix(this._model.getCanvasWidth(), this._model.getCanvasHeight());\n    }\n    loadMotion(buffer, size, name, onFinishedMotionHandler, onBeganMotionHandler, modelSetting, group, index, shouldCheckMotionConsistency = false) {\n        if (buffer == null || size == 0) {\n            CubismLogError('Failed to loadMotion().');\n            return null;\n        }\n        const motion = CubismMotion.create(buffer, size, onFinishedMotionHandler, onBeganMotionHandler, shouldCheckMotionConsistency);\n        if (motion == null) {\n            CubismLogError(`Failed to create motion from buffer in LoadMotion()`);\n            return null;\n        }\n        if (modelSetting) {\n            const fadeInTime = modelSetting.getMotionFadeInTimeValue(group, index);\n            if (fadeInTime >= 0.0) {\n                motion.setFadeInTime(fadeInTime);\n            }\n            const fadeOutTime = modelSetting.getMotionFadeOutTimeValue(group, index);\n            if (fadeOutTime >= 0.0) {\n                motion.setFadeOutTime(fadeOutTime);\n            }\n        }\n        return motion;\n    }\n    loadExpression(buffer, size, name) {\n        if (buffer == null || size == 0) {\n            CubismLogError('Failed to loadExpression().');\n            return null;\n        }\n        return CubismExpressionMotion.create(buffer, size);\n    }\n    loadPose(buffer, size) {\n        if (buffer == null || size == 0) {\n            CubismLogError('Failed to loadPose().');\n            return;\n        }\n        this._pose = CubismPose.create(buffer, size);\n    }\n    loadUserData(buffer, size) {\n        if (buffer == null || size == 0) {\n            CubismLogError('Failed to loadUserData().');\n            return;\n        }\n        this._modelUserData = CubismModelUserData.create(buffer, size);\n    }\n    loadPhysics(buffer, size) {\n        if (buffer == null || size == 0) {\n            CubismLogError('Failed to loadPhysics().');\n            return;\n        }\n        this._physics = CubismPhysics.create(buffer, size);\n    }\n    isHit(drawableId, pointX, pointY) {\n        const drawIndex = this._model.getDrawableIndex(drawableId);\n        if (drawIndex < 0) {\n            return false;\n        }\n        const count = this._model.getDrawableVertexCount(drawIndex);\n        const vertices = this._model.getDrawableVertices(drawIndex);\n        let left = vertices[0];\n        let right = vertices[0];\n        let top = vertices[1];\n        let bottom = vertices[1];\n        for (let j = 1; j < count; ++j) {\n            const x = vertices[Constant.vertexOffset + j * Constant.vertexStep];\n            const y = vertices[Constant.vertexOffset + j * Constant.vertexStep + 1];\n            if (x < left) {\n                left = x;\n            }\n            if (x > right) {\n                right = x;\n            }\n            if (y < top) {\n                top = y;\n            }\n            if (y > bottom) {\n                bottom = y;\n            }\n        }\n        const tx = this._modelMatrix.invertTransformX(pointX);\n        const ty = this._modelMatrix.invertTransformY(pointY);\n        return left <= tx && tx <= right && top <= ty && ty <= bottom;\n    }\n    getModel() {\n        return this._model;\n    }\n    getRenderer() {\n        return this._renderer;\n    }\n    createRenderer(maskBufferCount = 1) {\n        if (this._renderer) {\n            this.deleteRenderer();\n        }\n        this._renderer = new CubismRenderer_WebGL();\n        this._renderer.initialize(this._model, maskBufferCount);\n    }\n    deleteRenderer() {\n        if (this._renderer != null) {\n            this._renderer.release();\n            this._renderer = null;\n        }\n    }\n    motionEventFired(eventValue) {\n        CubismLogInfo('{0}', eventValue.s);\n    }\n    static cubismDefaultMotionEventCallback(caller, eventValue, customData) {\n        const model = customData;\n        if (model != null) {\n            model.motionEventFired(eventValue);\n        }\n    }\n    constructor() {\n        this._moc = null;\n        this._model = null;\n        this._motionManager = null;\n        this._expressionManager = null;\n        this._eyeBlink = null;\n        this._breath = null;\n        this._modelMatrix = null;\n        this._pose = null;\n        this._dragManager = null;\n        this._physics = null;\n        this._modelUserData = null;\n        this._initialized = false;\n        this._updating = false;\n        this._opacity = 1.0;\n        this._lipsync = true;\n        this._lastLipSyncValue = 0.0;\n        this._dragX = 0.0;\n        this._dragY = 0.0;\n        this._accelerationX = 0.0;\n        this._accelerationY = 0.0;\n        this._accelerationZ = 0.0;\n        this._mocConsistency = false;\n        this._debugMode = false;\n        this._renderer = null;\n        this._motionManager = new CubismMotionManager();\n        this._motionManager.setEventCallback(CubismUserModel.cubismDefaultMotionEventCallback, this);\n        this._expressionManager = new CubismExpressionMotionManager();\n        this._dragManager = new CubismTargetPoint();\n        this._mouthManager = new CubismMouthTargetPoint();\n    }\n    release() {\n        if (this._motionManager != null) {\n            this._motionManager.release();\n            this._motionManager = null;\n        }\n        if (this._expressionManager != null) {\n            this._expressionManager.release();\n            this._expressionManager = null;\n        }\n        if (this._moc != null) {\n            this._moc.deleteModel(this._model);\n            this._moc.release();\n            this._moc = null;\n        }\n        this._modelMatrix = null;\n        CubismPose.delete(this._pose);\n        CubismEyeBlink.delete(this._eyeBlink);\n        CubismBreath.delete(this._breath);\n        this._dragManager = null;\n        CubismPhysics.delete(this._physics);\n        CubismModelUserData.delete(this._modelUserData);\n        this.deleteRenderer();\n    }\n}\nimport * as $ from './cubismusermodel';\nexport var Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismUserModel = $.CubismUserModel;\n})(Live2DCubismFramework || (Live2DCubismFramework = {}));\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport let s_instance = null;\nexport class LAppWavFileHandler {\n    static getInstance() {\n        if (s_instance == null) {\n            s_instance = new LAppWavFileHandler();\n        }\n        return s_instance;\n    }\n    static releaseInstance() {\n        if (s_instance != null) {\n            s_instance = void 0;\n        }\n        s_instance = null;\n    }\n    update(deltaTimeSeconds) {\n        let goalOffset;\n        let rms;\n        if (this._pcmData == null ||\n            this._sampleOffset >= this._wavFileInfo._samplesPerChannel) {\n            this._lastRms = 0.0;\n            return false;\n        }\n        this._userTimeSeconds += deltaTimeSeconds;\n        goalOffset = Math.floor(this._userTimeSeconds * this._wavFileInfo._samplingRate);\n        if (goalOffset > this._wavFileInfo._samplesPerChannel) {\n            goalOffset = this._wavFileInfo._samplesPerChannel;\n        }\n        rms = 0.0;\n        for (let channelCount = 0; channelCount < this._wavFileInfo._numberOfChannels; channelCount++) {\n            for (let sampleCount = this._sampleOffset; sampleCount < goalOffset; sampleCount++) {\n                const pcm = this._pcmData[channelCount][sampleCount];\n                rms += pcm * pcm;\n            }\n        }\n        rms = Math.sqrt(rms /\n            (this._wavFileInfo._numberOfChannels *\n                (goalOffset - this._sampleOffset)));\n        this._lastRms = rms;\n        this._sampleOffset = goalOffset;\n        return true;\n    }\n    start(filePath) {\n        this._sampleOffset = 0;\n        this._userTimeSeconds = 0.0;\n        this._lastRms = 0.0;\n        this.loadWavFile(filePath);\n    }\n    getRms() {\n        return this._lastRms;\n    }\n    loadWavFile(filePath) {\n        return new Promise(resolveValue => {\n            let ret = false;\n            if (this._pcmData != null) {\n                this.releasePcmData();\n            }\n            const asyncFileLoad = () => __awaiter(this, void 0, void 0, function* () {\n                return fetch(filePath).then(responce => {\n                    return responce.arrayBuffer();\n                });\n            });\n            const asyncWavFileManager = (() => __awaiter(this, void 0, void 0, function* () {\n                this._byteReader._fileByte = yield asyncFileLoad();\n                this._byteReader._fileDataView = new DataView(this._byteReader._fileByte);\n                this._byteReader._fileSize = this._byteReader._fileByte.byteLength;\n                this._byteReader._readOffset = 0;\n                if (this._byteReader._fileByte == null ||\n                    this._byteReader._fileSize < 4) {\n                    resolveValue(false);\n                    return;\n                }\n                this._wavFileInfo._fileName = filePath;\n                try {\n                    if (!this._byteReader.getCheckSignature('RIFF')) {\n                        ret = false;\n                        throw new Error('Cannot find Signeture \"RIFF\".');\n                    }\n                    this._byteReader.get32LittleEndian();\n                    if (!this._byteReader.getCheckSignature('WAVE')) {\n                        ret = false;\n                        throw new Error('Cannot find Signeture \"WAVE\".');\n                    }\n                    if (!this._byteReader.getCheckSignature('fmt ')) {\n                        ret = false;\n                        throw new Error('Cannot find Signeture \"fmt\".');\n                    }\n                    const fmtChunkSize = this._byteReader.get32LittleEndian();\n                    if (this._byteReader.get16LittleEndian() != 1) {\n                        ret = false;\n                        throw new Error('File is not linear PCM.');\n                    }\n                    this._wavFileInfo._numberOfChannels =\n                        this._byteReader.get16LittleEndian();\n                    this._wavFileInfo._samplingRate =\n                        this._byteReader.get32LittleEndian();\n                    this._byteReader.get32LittleEndian();\n                    this._byteReader.get16LittleEndian();\n                    this._wavFileInfo._bitsPerSample =\n                        this._byteReader.get16LittleEndian();\n                    if (fmtChunkSize > 16) {\n                        this._byteReader._readOffset += fmtChunkSize - 16;\n                    }\n                    while (!this._byteReader.getCheckSignature('data') &&\n                        this._byteReader._readOffset < this._byteReader._fileSize) {\n                        this._byteReader._readOffset +=\n                            this._byteReader.get32LittleEndian() + 4;\n                    }\n                    if (this._byteReader._readOffset >= this._byteReader._fileSize) {\n                        ret = false;\n                        throw new Error('Cannot find \"data\" Chunk.');\n                    }\n                    {\n                        const dataChunkSize = this._byteReader.get32LittleEndian();\n                        this._wavFileInfo._samplesPerChannel =\n                            (dataChunkSize * 8) /\n                                (this._wavFileInfo._bitsPerSample *\n                                    this._wavFileInfo._numberOfChannels);\n                    }\n                    this._pcmData = new Array(this._wavFileInfo._numberOfChannels);\n                    for (let channelCount = 0; channelCount < this._wavFileInfo._numberOfChannels; channelCount++) {\n                        this._pcmData[channelCount] = new Float32Array(this._wavFileInfo._samplesPerChannel);\n                    }\n                    for (let sampleCount = 0; sampleCount < this._wavFileInfo._samplesPerChannel; sampleCount++) {\n                        for (let channelCount = 0; channelCount < this._wavFileInfo._numberOfChannels; channelCount++) {\n                            this._pcmData[channelCount][sampleCount] = this.getPcmSample();\n                        }\n                    }\n                    ret = true;\n                    resolveValue(ret);\n                }\n                catch (e) {\n                    console.log(e);\n                }\n            }))().then(() => {\n                resolveValue(ret);\n            });\n        });\n    }\n    getPcmSample() {\n        let pcm32;\n        switch (this._wavFileInfo._bitsPerSample) {\n            case 8:\n                pcm32 = this._byteReader.get8() - 128;\n                pcm32 <<= 24;\n                break;\n            case 16:\n                pcm32 = this._byteReader.get16LittleEndian() << 16;\n                break;\n            case 24:\n                pcm32 = this._byteReader.get24LittleEndian() << 8;\n                break;\n            default:\n                pcm32 = 0;\n                break;\n        }\n        return pcm32 / 2147483647;\n    }\n    getPcmDataChannel(usechannel) {\n        if (!this._pcmData || !(usechannel < this._pcmData.length)) {\n            return null;\n        }\n        return Float32Array.from(this._pcmData[usechannel]);\n    }\n    getWavSamplingRate() {\n        if (!this._wavFileInfo || this._wavFileInfo._samplingRate < 1) {\n            return null;\n        }\n        return this._wavFileInfo._samplingRate;\n    }\n    releasePcmData() {\n        for (let channelCount = 0; channelCount < this._wavFileInfo._numberOfChannels; channelCount++) {\n            this._pcmData[channelCount] = null;\n        }\n        delete this._pcmData;\n        this._pcmData = null;\n    }\n    constructor() {\n        this.loadFiletoBytes = (arrayBuffer, length) => {\n            this._byteReader._fileByte = arrayBuffer;\n            this._byteReader._fileDataView = new DataView(this._byteReader._fileByte);\n            this._byteReader._fileSize = length;\n        };\n        this._pcmData = null;\n        this._userTimeSeconds = 0.0;\n        this._lastRms = 0.0;\n        this._sampleOffset = 0.0;\n        this._wavFileInfo = new WavFileInfo();\n        this._byteReader = new ByteReader();\n    }\n}\nexport class WavFileInfo {\n    constructor() {\n        this._fileName = '';\n        this._numberOfChannels = 0;\n        this._bitsPerSample = 0;\n        this._samplingRate = 0;\n        this._samplesPerChannel = 0;\n    }\n}\nexport class ByteReader {\n    constructor() {\n        this._fileByte = null;\n        this._fileDataView = null;\n        this._fileSize = 0;\n        this._readOffset = 0;\n    }\n    get8() {\n        const ret = this._fileDataView.getUint8(this._readOffset);\n        this._readOffset++;\n        return ret;\n    }\n    get16LittleEndian() {\n        const ret = (this._fileDataView.getUint8(this._readOffset + 1) << 8) |\n            this._fileDataView.getUint8(this._readOffset);\n        this._readOffset += 2;\n        return ret;\n    }\n    get24LittleEndian() {\n        const ret = (this._fileDataView.getUint8(this._readOffset + 2) << 16) |\n            (this._fileDataView.getUint8(this._readOffset + 1) << 8) |\n            this._fileDataView.getUint8(this._readOffset);\n        this._readOffset += 3;\n        return ret;\n    }\n    get32LittleEndian() {\n        const ret = (this._fileDataView.getUint8(this._readOffset + 3) << 24) |\n            (this._fileDataView.getUint8(this._readOffset + 2) << 16) |\n            (this._fileDataView.getUint8(this._readOffset + 1) << 8) |\n            this._fileDataView.getUint8(this._readOffset);\n        this._readOffset += 4;\n        return ret;\n    }\n    getCheckSignature(reference) {\n        const getSignature = new Uint8Array(4);\n        const referenceString = new TextEncoder().encode(reference);\n        if (reference.length != 4) {\n            return false;\n        }\n        for (let signatureOffset = 0; signatureOffset < 4; signatureOffset++) {\n            getSignature[signatureOffset] = this.get8();\n        }\n        return (getSignature[0] == referenceString[0] &&\n            getSignature[1] == referenceString[1] &&\n            getSignature[2] == referenceString[2] &&\n            getSignature[3] == referenceString[3]);\n    }\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CubismDefaultParameterId } from '@framework/cubismdefaultparameterid';\nimport { CubismModelSettingJson } from '@framework/cubismmodelsettingjson';\nimport { BreathParameterData, CubismBreath, } from '@framework/effect/cubismbreath';\nimport { CubismEyeBlink } from '@framework/effect/cubismeyeblink';\nimport { CubismFramework } from '@framework/live2dcubismframework';\nimport { CubismUserModel } from '@framework/model/cubismusermodel';\nimport { ACubismMotion, } from '@framework/motion/acubismmotion';\nimport { InvalidMotionQueueEntryHandleValue, } from '@framework/motion/cubismmotionqueuemanager';\nimport { csmMap } from '@framework/type/csmmap';\nimport { csmVector } from '@framework/type/csmvector';\nimport { CSM_ASSERT, CubismLogError, CubismLogInfo, } from '@framework/utils/cubismdebug';\nimport { CubismMoc } from '@framework/model/cubismmoc';\nimport * as LAppDefine from './lappdefine';\nimport { LAppPal } from './lapppal';\nimport { LAppWavFileHandler } from './lappwavfilehandler';\nvar LoadStep;\n(function (LoadStep) {\n    LoadStep[LoadStep[\"LoadAssets\"] = 0] = \"LoadAssets\";\n    LoadStep[LoadStep[\"LoadModel\"] = 1] = \"LoadModel\";\n    LoadStep[LoadStep[\"WaitLoadModel\"] = 2] = \"WaitLoadModel\";\n    LoadStep[LoadStep[\"LoadExpression\"] = 3] = \"LoadExpression\";\n    LoadStep[LoadStep[\"WaitLoadExpression\"] = 4] = \"WaitLoadExpression\";\n    LoadStep[LoadStep[\"LoadPhysics\"] = 5] = \"LoadPhysics\";\n    LoadStep[LoadStep[\"WaitLoadPhysics\"] = 6] = \"WaitLoadPhysics\";\n    LoadStep[LoadStep[\"LoadPose\"] = 7] = \"LoadPose\";\n    LoadStep[LoadStep[\"WaitLoadPose\"] = 8] = \"WaitLoadPose\";\n    LoadStep[LoadStep[\"SetupEyeBlink\"] = 9] = \"SetupEyeBlink\";\n    LoadStep[LoadStep[\"SetupBreath\"] = 10] = \"SetupBreath\";\n    LoadStep[LoadStep[\"LoadUserData\"] = 11] = \"LoadUserData\";\n    LoadStep[LoadStep[\"WaitLoadUserData\"] = 12] = \"WaitLoadUserData\";\n    LoadStep[LoadStep[\"SetupEyeBlinkIds\"] = 13] = \"SetupEyeBlinkIds\";\n    LoadStep[LoadStep[\"SetupLipSyncIds\"] = 14] = \"SetupLipSyncIds\";\n    LoadStep[LoadStep[\"SetupLayout\"] = 15] = \"SetupLayout\";\n    LoadStep[LoadStep[\"LoadMotion\"] = 16] = \"LoadMotion\";\n    LoadStep[LoadStep[\"WaitLoadMotion\"] = 17] = \"WaitLoadMotion\";\n    LoadStep[LoadStep[\"CompleteInitialize\"] = 18] = \"CompleteInitialize\";\n    LoadStep[LoadStep[\"CompleteSetupModel\"] = 19] = \"CompleteSetupModel\";\n    LoadStep[LoadStep[\"LoadTexture\"] = 20] = \"LoadTexture\";\n    LoadStep[LoadStep[\"WaitLoadTexture\"] = 21] = \"WaitLoadTexture\";\n    LoadStep[LoadStep[\"CompleteSetup\"] = 22] = \"CompleteSetup\";\n})(LoadStep || (LoadStep = {}));\nexport class LAppModel extends CubismUserModel {\n    loadAssets(dir, fileName) {\n        this._modelHomeDir = dir;\n        fetch(`${this._modelHomeDir}${fileName}`)\n            .then((response) => response.arrayBuffer())\n            .then((arrayBuffer) => {\n            const setting = new CubismModelSettingJson(arrayBuffer, arrayBuffer.byteLength);\n            this._state = LoadStep.LoadModel;\n            this.setupModel(setting);\n        })\n            .catch((error) => {\n            CubismLogError(`Failed to load file ${this._modelHomeDir}${fileName}`);\n        });\n    }\n    setupModel(setting) {\n        this._updating = true;\n        this._initialized = false;\n        this._modelSetting = setting;\n        if (this._modelSetting.getModelFileName() != '') {\n            const modelFileName = this._modelSetting.getModelFileName();\n            fetch(`${this._modelHomeDir}${modelFileName}`)\n                .then((response) => {\n                if (response.ok) {\n                    return response.arrayBuffer();\n                }\n                else if (response.status >= 400) {\n                    CubismLogError(`Failed to load file ${this._modelHomeDir}${modelFileName}`);\n                    return new ArrayBuffer(0);\n                }\n            })\n                .then((arrayBuffer) => {\n                this.loadModel(arrayBuffer, this._mocConsistency);\n                this._state = LoadStep.LoadExpression;\n                loadCubismExpression();\n            });\n            this._state = LoadStep.WaitLoadModel;\n        }\n        else {\n            LAppPal.printMessage('Model data does not exist.');\n        }\n        const loadCubismExpression = () => {\n            if (this._modelSetting.getExpressionCount() > 0) {\n                const count = this._modelSetting.getExpressionCount();\n                for (let i = 0; i < count; i++) {\n                    const expressionName = this._modelSetting.getExpressionName(i);\n                    const expressionFileName = this._modelSetting.getExpressionFileName(i);\n                    fetch(`${this._modelHomeDir}${expressionFileName}`)\n                        .then((response) => {\n                        if (response.ok) {\n                            return response.arrayBuffer();\n                        }\n                        else if (response.status >= 400) {\n                            CubismLogError(`Failed to load file ${this._modelHomeDir}${expressionFileName}`);\n                            return new ArrayBuffer(0);\n                        }\n                    })\n                        .then((arrayBuffer) => {\n                        const motion = this.loadExpression(arrayBuffer, arrayBuffer.byteLength, expressionName);\n                        if (this._expressions.getValue(expressionName) != null) {\n                            ACubismMotion.delete(this._expressions.getValue(expressionName));\n                            this._expressions.setValue(expressionName, null);\n                        }\n                        this._expressions.setValue(expressionName, motion);\n                        this._expressionCount++;\n                        if (this._expressionCount >= count) {\n                            this._state = LoadStep.LoadPhysics;\n                            loadCubismPhysics();\n                        }\n                    });\n                }\n                this._state = LoadStep.WaitLoadExpression;\n            }\n            else {\n                this._state = LoadStep.LoadPhysics;\n                loadCubismPhysics();\n            }\n        };\n        const loadCubismPhysics = () => {\n            if (this._modelSetting.getPhysicsFileName() != '') {\n                const physicsFileName = this._modelSetting.getPhysicsFileName();\n                fetch(`${this._modelHomeDir}${physicsFileName}`)\n                    .then((response) => {\n                    if (response.ok) {\n                        return response.arrayBuffer();\n                    }\n                    else if (response.status >= 400) {\n                        CubismLogError(`Failed to load file ${this._modelHomeDir}${physicsFileName}`);\n                        return new ArrayBuffer(0);\n                    }\n                })\n                    .then((arrayBuffer) => {\n                    this.loadPhysics(arrayBuffer, arrayBuffer.byteLength);\n                    this._state = LoadStep.LoadPose;\n                    loadCubismPose();\n                });\n                this._state = LoadStep.WaitLoadPhysics;\n            }\n            else {\n                this._state = LoadStep.LoadPose;\n                loadCubismPose();\n            }\n        };\n        const loadCubismPose = () => {\n            if (this._modelSetting.getPoseFileName() != '') {\n                const poseFileName = this._modelSetting.getPoseFileName();\n                fetch(`${this._modelHomeDir}${poseFileName}`)\n                    .then((response) => {\n                    if (response.ok) {\n                        return response.arrayBuffer();\n                    }\n                    else if (response.status >= 400) {\n                        CubismLogError(`Failed to load file ${this._modelHomeDir}${poseFileName}`);\n                        return new ArrayBuffer(0);\n                    }\n                })\n                    .then((arrayBuffer) => {\n                    this.loadPose(arrayBuffer, arrayBuffer.byteLength);\n                    this._state = LoadStep.SetupEyeBlink;\n                    setupEyeBlink();\n                });\n                this._state = LoadStep.WaitLoadPose;\n            }\n            else {\n                this._state = LoadStep.SetupEyeBlink;\n                setupEyeBlink();\n            }\n        };\n        const setupEyeBlink = () => {\n            if (this._modelSetting.getEyeBlinkParameterCount() > 0) {\n                this._eyeBlink = CubismEyeBlink.create(this._modelSetting);\n                this._state = LoadStep.SetupBreath;\n            }\n            setupBreath();\n        };\n        const setupBreath = () => {\n            this._breath = CubismBreath.create();\n            const breathParameters = new csmVector();\n            breathParameters.pushBack(new BreathParameterData(this._idParamAngleX, 0.0, 15.0, 6.5345, 0.5));\n            breathParameters.pushBack(new BreathParameterData(this._idParamAngleY, 0.0, 8.0, 3.5345, 0.5));\n            breathParameters.pushBack(new BreathParameterData(this._idParamAngleZ, 0.0, 10.0, 5.5345, 0.5));\n            breathParameters.pushBack(new BreathParameterData(this._idParamBodyAngleX, 0.0, 4.0, 15.5345, 0.5));\n            breathParameters.pushBack(new BreathParameterData(CubismFramework.getIdManager().getId(CubismDefaultParameterId.ParamBreath), 0.5, 0.5, 3.2345, 1));\n            this._breath.setParameters(breathParameters);\n            this._state = LoadStep.LoadUserData;\n            loadUserData();\n        };\n        const loadUserData = () => {\n            if (this._modelSetting.getUserDataFile() != '') {\n                const userDataFile = this._modelSetting.getUserDataFile();\n                fetch(`${this._modelHomeDir}${userDataFile}`)\n                    .then((response) => {\n                    if (response.ok) {\n                        return response.arrayBuffer();\n                    }\n                    else if (response.status >= 400) {\n                        CubismLogError(`Failed to load file ${this._modelHomeDir}${userDataFile}`);\n                        return new ArrayBuffer(0);\n                    }\n                })\n                    .then((arrayBuffer) => {\n                    this.loadUserData(arrayBuffer, arrayBuffer.byteLength);\n                    this._state = LoadStep.SetupEyeBlinkIds;\n                    setupEyeBlinkIds();\n                });\n                this._state = LoadStep.WaitLoadUserData;\n            }\n            else {\n                this._state = LoadStep.SetupEyeBlinkIds;\n                setupEyeBlinkIds();\n            }\n        };\n        const setupEyeBlinkIds = () => {\n            const eyeBlinkIdCount = this._modelSetting.getEyeBlinkParameterCount();\n            for (let i = 0; i < eyeBlinkIdCount; ++i) {\n                this._eyeBlinkIds.pushBack(this._modelSetting.getEyeBlinkParameterId(i));\n            }\n            this._state = LoadStep.SetupLipSyncIds;\n            setupLipSyncIds();\n        };\n        const setupLipSyncIds = () => {\n            const lipSyncIdCount = this._modelSetting.getLipSyncParameterCount();\n            for (let i = 0; i < lipSyncIdCount; ++i) {\n                this._lipSyncIds.pushBack(this._modelSetting.getLipSyncParameterId(i));\n            }\n            this._state = LoadStep.SetupLayout;\n            setupLayout();\n        };\n        const setupLayout = () => {\n            const layout = new csmMap();\n            if (this._modelSetting == null || this._modelMatrix == null) {\n                CubismLogError('Failed to setupLayout().');\n                return;\n            }\n            this._modelSetting.getLayoutMap(layout);\n            this._modelMatrix.setupFromLayout(layout);\n            this._state = LoadStep.LoadMotion;\n            loadCubismMotion();\n        };\n        const loadCubismMotion = () => {\n            this._state = LoadStep.WaitLoadMotion;\n            this._model.saveParameters();\n            this._allMotionCount = 0;\n            this._motionCount = 0;\n            const group = [];\n            const motionGroupCount = this._modelSetting.getMotionGroupCount();\n            for (let i = 0; i < motionGroupCount; i++) {\n                group[i] = this._modelSetting.getMotionGroupName(i);\n                this._allMotionCount += this._modelSetting.getMotionCount(group[i]);\n            }\n            for (let i = 0; i < motionGroupCount; i++) {\n                this.preLoadMotionGroup(group[i]);\n            }\n            if (motionGroupCount == 0) {\n                this._state = LoadStep.LoadTexture;\n                this._motionManager.stopAllMotions();\n                this._updating = false;\n                this._initialized = true;\n                this.createRenderer();\n                this.setupTextures();\n                this.getRenderer().startUp(this._subdelegate.getGlManager().getGl());\n            }\n        };\n    }\n    setupTextures() {\n        const usePremultiply = true;\n        if (this._state == LoadStep.LoadTexture) {\n            const textureCount = this._modelSetting.getTextureCount();\n            for (let modelTextureNumber = 0; modelTextureNumber < textureCount; modelTextureNumber++) {\n                if (this._modelSetting.getTextureFileName(modelTextureNumber) == '') {\n                    console.log('getTextureFileName null');\n                    continue;\n                }\n                let texturePath = this._modelSetting.getTextureFileName(modelTextureNumber);\n                texturePath = this._modelHomeDir + texturePath;\n                const onLoad = (textureInfo) => {\n                    this.getRenderer().bindTexture(modelTextureNumber, textureInfo.id);\n                    this._textureCount++;\n                    if (this._textureCount >= textureCount) {\n                        this._state = LoadStep.CompleteSetup;\n                    }\n                };\n                this._subdelegate\n                    .getTextureManager()\n                    .createTextureFromPngFile(texturePath, usePremultiply, onLoad);\n                this.getRenderer().setIsPremultipliedAlpha(usePremultiply);\n            }\n            this._state = LoadStep.WaitLoadTexture;\n        }\n    }\n    reloadRenderer() {\n        this.deleteRenderer();\n        this.createRenderer();\n        this.setupTextures();\n    }\n    update() {\n        if (this._state != LoadStep.CompleteSetup)\n            return;\n        const deltaTimeSeconds = LAppPal.getDeltaTime();\n        this._userTimeSeconds += deltaTimeSeconds;\n        this._dragManager.update(deltaTimeSeconds);\n        this._dragX = this._dragManager.getX();\n        this._dragY = this._dragManager.getY();\n        let motionUpdated = false;\n        this._model.loadParameters();\n        if (this._motionManager.isFinished()) {\n            this.startRandomMotion(LAppDefine.MotionGroupIdle, LAppDefine.PriorityIdle);\n        }\n        else {\n            motionUpdated = this._motionManager.updateMotion(this._model, deltaTimeSeconds);\n        }\n        this._model.saveParameters();\n        if (!motionUpdated) {\n            if (this._eyeBlink != null) {\n                this._eyeBlink.updateParameters(this._model, deltaTimeSeconds);\n            }\n        }\n        if (this._expressionManager != null) {\n            this._expressionManager.updateMotion(this._model, deltaTimeSeconds);\n        }\n        this._model.addParameterValueById(this._idParamAngleX, this._dragX * 30);\n        this._model.addParameterValueById(this._idParamAngleY, this._dragY * 30);\n        this._model.addParameterValueById(this._idParamAngleZ, this._dragX * this._dragY * -30);\n        this._model.addParameterValueById(this._idParamBodyAngleX, this._dragX * 10);\n        this._model.addParameterValueById(this._idParamEyeBallX, this._dragX);\n        this._model.addParameterValueById(this._idParamEyeBallY, this._dragY);\n        this._mouthManager.update(deltaTimeSeconds);\n        const mouthValue = this._mouthManager.getMouthValue();\n        this._model.addParameterValueById(this._idParamMouthOpenY, mouthValue);\n        if (this._breath != null) {\n            this._breath.updateParameters(this._model, deltaTimeSeconds);\n        }\n        if (this._physics != null) {\n            this._physics.evaluate(this._model, deltaTimeSeconds);\n        }\n        if (this._lipsync) {\n            let value = 0.0;\n            this._wavFileHandler.update(deltaTimeSeconds);\n            value = this._wavFileHandler.getRms();\n            for (let i = 0; i < this._lipSyncIds.getSize(); ++i) {\n                this._model.addParameterValueById(this._lipSyncIds.at(i), value, 0.8);\n            }\n        }\n        if (this._pose != null) {\n            this._pose.updateParameters(this._model, deltaTimeSeconds);\n        }\n        this._model.update();\n    }\n    startMotion(group, no, priority, onFinishedMotionHandler, onBeganMotionHandler) {\n        if (priority == LAppDefine.PriorityForce) {\n            this._motionManager.setReservePriority(priority);\n        }\n        else if (!this._motionManager.reserveMotion(priority)) {\n            if (this._debugMode) {\n                LAppPal.printMessage(\"[APP]can't start motion.\");\n            }\n            return InvalidMotionQueueEntryHandleValue;\n        }\n        const motionFileName = this._modelSetting.getMotionFileName(group, no);\n        const name = `${group}_${no}`;\n        let motion = this._motions.getValue(name);\n        let autoDelete = false;\n        if (motion == null) {\n            fetch(`${this._modelHomeDir}${motionFileName}`)\n                .then((response) => {\n                if (response.ok) {\n                    return response.arrayBuffer();\n                }\n                else if (response.status >= 400) {\n                    CubismLogError(`Failed to load file ${this._modelHomeDir}${motionFileName}`);\n                    return new ArrayBuffer(0);\n                }\n            })\n                .then((arrayBuffer) => {\n                motion = this.loadMotion(arrayBuffer, arrayBuffer.byteLength, null, onFinishedMotionHandler, onBeganMotionHandler, this._modelSetting, group, no, this._motionConsistency);\n            });\n            if (motion) {\n                motion.setEffectIds(this._eyeBlinkIds, this._lipSyncIds);\n                autoDelete = true;\n            }\n            else {\n                CubismLogError(\"Can't start motion {0} .\", motionFileName);\n                this._motionManager.setReservePriority(LAppDefine.PriorityNone);\n                return InvalidMotionQueueEntryHandleValue;\n            }\n        }\n        else {\n            motion.setBeganMotionHandler(onBeganMotionHandler);\n            motion.setFinishedMotionHandler(onFinishedMotionHandler);\n        }\n        const voice = this._modelSetting.getMotionSoundFileName(group, no);\n        if (voice.localeCompare('') != 0) {\n            let path = voice;\n            path = this._modelHomeDir + path;\n            this._wavFileHandler.start(path);\n        }\n        if (this._debugMode) {\n            LAppPal.printMessage(`[APP]start motion: [${group}_${no}]`);\n        }\n        return this._motionManager.startMotionPriority(motion, autoDelete, priority);\n    }\n    startRandomMotion(group, priority, onFinishedMotionHandler, onBeganMotionHandler) {\n        if (this._modelSetting.getMotionCount(group) == 0) {\n            return InvalidMotionQueueEntryHandleValue;\n        }\n        const no = Math.floor(Math.random() * this._modelSetting.getMotionCount(group));\n        return this.startMotion(group, no, priority, onFinishedMotionHandler, onBeganMotionHandler);\n    }\n    setExpression(expressionId) {\n        const motion = this._expressions.getValue(expressionId);\n        if (this._debugMode) {\n            LAppPal.printMessage(`[APP]expression: [${expressionId}]`);\n        }\n        if (motion != null) {\n            this._expressionManager.startMotion(motion, false);\n        }\n        else {\n            if (this._debugMode) {\n                LAppPal.printMessage(`[APP]expression[${expressionId}] is null`);\n            }\n        }\n    }\n    setRandomExpression() {\n        if (this._expressions.getSize() == 0) {\n            return;\n        }\n        const no = Math.floor(Math.random() * this._expressions.getSize());\n        for (let i = 0; i < this._expressions.getSize(); i++) {\n            if (i == no) {\n                const name = this._expressions._keyValues[i].first;\n                this.setExpression(name);\n                return;\n            }\n        }\n    }\n    motionEventFired(eventValue) {\n        CubismLogInfo('{0} is fired on LAppModel!!', eventValue.s);\n    }\n    hitTest(hitArenaName, x, y) {\n        if (this._opacity < 1) {\n            return false;\n        }\n        const count = this._modelSetting.getHitAreasCount();\n        for (let i = 0; i < count; i++) {\n            if (this._modelSetting.getHitAreaName(i) == hitArenaName) {\n                const drawId = this._modelSetting.getHitAreaId(i);\n                return this.isHit(drawId, x, y);\n            }\n        }\n        return false;\n    }\n    preLoadMotionGroup(group) {\n        for (let i = 0; i < this._modelSetting.getMotionCount(group); i++) {\n            const motionFileName = this._modelSetting.getMotionFileName(group, i);\n            const name = `${group}_${i}`;\n            if (this._debugMode) {\n                LAppPal.printMessage(`[APP]load motion: ${motionFileName} => [${name}]`);\n            }\n            fetch(`${this._modelHomeDir}${motionFileName}`)\n                .then((response) => {\n                if (response.ok) {\n                    return response.arrayBuffer();\n                }\n                else if (response.status >= 400) {\n                    CubismLogError(`Failed to load file ${this._modelHomeDir}${motionFileName}`);\n                    return new ArrayBuffer(0);\n                }\n            })\n                .then((arrayBuffer) => {\n                const tmpMotion = this.loadMotion(arrayBuffer, arrayBuffer.byteLength, name, null, null, this._modelSetting, group, i, this._motionConsistency);\n                if (tmpMotion != null) {\n                    tmpMotion.setEffectIds(this._eyeBlinkIds, this._lipSyncIds);\n                    if (this._motions.getValue(name) != null) {\n                        ACubismMotion.delete(this._motions.getValue(name));\n                    }\n                    this._motions.setValue(name, tmpMotion);\n                    this._motionCount++;\n                }\n                else {\n                    this._allMotionCount--;\n                }\n                if (this._motionCount >= this._allMotionCount) {\n                    this._state = LoadStep.LoadTexture;\n                    this._motionManager.stopAllMotions();\n                    this._updating = false;\n                    this._initialized = true;\n                    this.createRenderer();\n                    this.setupTextures();\n                    this.getRenderer().startUp(this._subdelegate.getGlManager().getGl());\n                }\n            });\n        }\n    }\n    releaseMotions() {\n        this._motions.clear();\n    }\n    releaseExpressions() {\n        this._expressions.clear();\n    }\n    doDraw() {\n        if (this._model == null)\n            return;\n        const canvas = this._subdelegate.getCanvas();\n        const viewport = [0, 0, canvas.width, canvas.height];\n        this.getRenderer().setRenderState(this._subdelegate.getFrameBuffer(), viewport);\n        this.getRenderer().drawModel();\n    }\n    draw(matrix) {\n        if (this._model == null) {\n            return;\n        }\n        if (this._state == LoadStep.CompleteSetup) {\n            matrix.multiplyByMatrix(this._modelMatrix);\n            this.getRenderer().setMvpMatrix(matrix);\n            this.doDraw();\n        }\n    }\n    hasMocConsistencyFromFile() {\n        return __awaiter(this, void 0, void 0, function* () {\n            CSM_ASSERT(this._modelSetting.getModelFileName().localeCompare(``));\n            if (this._modelSetting.getModelFileName() != '') {\n                const modelFileName = this._modelSetting.getModelFileName();\n                const response = yield fetch(`${this._modelHomeDir}${modelFileName}`);\n                const arrayBuffer = yield response.arrayBuffer();\n                this._consistency = CubismMoc.hasMocConsistency(arrayBuffer);\n                if (!this._consistency) {\n                    CubismLogInfo('Inconsistent MOC3.');\n                }\n                else {\n                    CubismLogInfo('Consistent MOC3.');\n                }\n                return this._consistency;\n            }\n            else {\n                LAppPal.printMessage('Model data does not exist.');\n            }\n        });\n    }\n    setSubdelegate(subdelegate) {\n        this._subdelegate = subdelegate;\n    }\n    constructor() {\n        super();\n        this._modelSetting = null;\n        this._modelHomeDir = null;\n        this._userTimeSeconds = 0.0;\n        this._eyeBlinkIds = new csmVector();\n        this._lipSyncIds = new csmVector();\n        this._motions = new csmMap();\n        this._expressions = new csmMap();\n        this._hitArea = new csmVector();\n        this._userArea = new csmVector();\n        this._idParamAngleX = CubismFramework.getIdManager().getId(CubismDefaultParameterId.ParamAngleX);\n        this._idParamAngleY = CubismFramework.getIdManager().getId(CubismDefaultParameterId.ParamAngleY);\n        this._idParamAngleZ = CubismFramework.getIdManager().getId(CubismDefaultParameterId.ParamAngleZ);\n        this._idParamEyeBallX = CubismFramework.getIdManager().getId(CubismDefaultParameterId.ParamEyeBallX);\n        this._idParamEyeBallY = CubismFramework.getIdManager().getId(CubismDefaultParameterId.ParamEyeBallY);\n        this._idParamBodyAngleX = CubismFramework.getIdManager().getId(CubismDefaultParameterId.ParamBodyAngleX);\n        this._idParamMouthOpenY =\n            CubismFramework.getIdManager().getId('ParamMouthOpenY');\n        if (LAppDefine.MOCConsistencyValidationEnable) {\n            this._mocConsistency = true;\n        }\n        if (LAppDefine.MotionConsistencyValidationEnable) {\n            this._motionConsistency = true;\n        }\n        this._state = LoadStep.LoadAssets;\n        this._expressionCount = 0;\n        this._textureCount = 0;\n        this._motionCount = 0;\n        this._allMotionCount = 0;\n        this._wavFileHandler = new LAppWavFileHandler();\n        this._consistency = false;\n    }\n}\n","import { CubismMatrix44 } from './cubismmatrix44';\nexport class CubismViewMatrix extends CubismMatrix44 {\n    constructor() {\n        super();\n        this._screenLeft = 0.0;\n        this._screenRight = 0.0;\n        this._screenTop = 0.0;\n        this._screenBottom = 0.0;\n        this._maxLeft = 0.0;\n        this._maxRight = 0.0;\n        this._maxTop = 0.0;\n        this._maxBottom = 0.0;\n        this._maxScale = 0.0;\n        this._minScale = 0.0;\n    }\n    adjustTranslate(x, y) {\n        if (this._tr[0] * this._maxLeft + (this._tr[12] + x) > this._screenLeft) {\n            x = this._screenLeft - this._tr[0] * this._maxLeft - this._tr[12];\n        }\n        if (this._tr[0] * this._maxRight + (this._tr[12] + x) < this._screenRight) {\n            x = this._screenRight - this._tr[0] * this._maxRight - this._tr[12];\n        }\n        if (this._tr[5] * this._maxTop + (this._tr[13] + y) < this._screenTop) {\n            y = this._screenTop - this._tr[5] * this._maxTop - this._tr[13];\n        }\n        if (this._tr[5] * this._maxBottom + (this._tr[13] + y) >\n            this._screenBottom) {\n            y = this._screenBottom - this._tr[5] * this._maxBottom - this._tr[13];\n        }\n        const tr1 = new Float32Array([\n            1.0,\n            0.0,\n            0.0,\n            0.0,\n            0.0,\n            1.0,\n            0.0,\n            0.0,\n            0.0,\n            0.0,\n            1.0,\n            0.0,\n            x,\n            y,\n            0.0,\n            1.0\n        ]);\n        CubismMatrix44.multiply(tr1, this._tr, this._tr);\n    }\n    adjustScale(cx, cy, scale) {\n        const maxScale = this.getMaxScale();\n        const minScale = this.getMinScale();\n        const targetScale = scale * this._tr[0];\n        if (targetScale < minScale) {\n            if (this._tr[0] > 0.0) {\n                scale = minScale / this._tr[0];\n            }\n        }\n        else if (targetScale > maxScale) {\n            if (this._tr[0] > 0.0) {\n                scale = maxScale / this._tr[0];\n            }\n        }\n        const tr1 = new Float32Array([\n            1.0,\n            0.0,\n            0.0,\n            0.0,\n            0.0,\n            1.0,\n            0.0,\n            0.0,\n            0.0,\n            0.0,\n            1.0,\n            0.0,\n            cx,\n            cy,\n            0.0,\n            1.0\n        ]);\n        const tr2 = new Float32Array([\n            scale,\n            0.0,\n            0.0,\n            0.0,\n            0.0,\n            scale,\n            0.0,\n            0.0,\n            0.0,\n            0.0,\n            1.0,\n            0.0,\n            0.0,\n            0.0,\n            0.0,\n            1.0\n        ]);\n        const tr3 = new Float32Array([\n            1.0,\n            0.0,\n            0.0,\n            0.0,\n            0.0,\n            1.0,\n            0.0,\n            0.0,\n            0.0,\n            0.0,\n            1.0,\n            0.0,\n            -cx,\n            -cy,\n            0.0,\n            1.0\n        ]);\n        CubismMatrix44.multiply(tr3, this._tr, this._tr);\n        CubismMatrix44.multiply(tr2, this._tr, this._tr);\n        CubismMatrix44.multiply(tr1, this._tr, this._tr);\n    }\n    setScreenRect(left, right, bottom, top) {\n        this._screenLeft = left;\n        this._screenRight = right;\n        this._screenBottom = bottom;\n        this._screenTop = top;\n    }\n    setMaxScreenRect(left, right, bottom, top) {\n        this._maxLeft = left;\n        this._maxRight = right;\n        this._maxTop = top;\n        this._maxBottom = bottom;\n    }\n    setMaxScale(maxScale) {\n        this._maxScale = maxScale;\n    }\n    setMinScale(minScale) {\n        this._minScale = minScale;\n    }\n    getMaxScale() {\n        return this._maxScale;\n    }\n    getMinScale() {\n        return this._minScale;\n    }\n    isMaxScale() {\n        return this.getScaleX() >= this._maxScale;\n    }\n    isMinScale() {\n        return this.getScaleX() <= this._minScale;\n    }\n    getScreenLeft() {\n        return this._screenLeft;\n    }\n    getScreenRight() {\n        return this._screenRight;\n    }\n    getScreenBottom() {\n        return this._screenBottom;\n    }\n    getScreenTop() {\n        return this._screenTop;\n    }\n    getMaxLeft() {\n        return this._maxLeft;\n    }\n    getMaxRight() {\n        return this._maxRight;\n    }\n    getMaxBottom() {\n        return this._maxBottom;\n    }\n    getMaxTop() {\n        return this._maxTop;\n    }\n}\nimport * as $ from './cubismviewmatrix';\nexport var Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismViewMatrix = $.CubismViewMatrix;\n})(Live2DCubismFramework || (Live2DCubismFramework = {}));\n","import { CubismMatrix44 } from '@framework/math/cubismmatrix44';\nimport { csmVector } from '@framework/type/csmvector';\nimport * as LAppDefine from './lappdefine';\nimport { LAppModel } from './lappmodel';\nimport { LAppPal } from './lapppal';\nexport class LAppLive2DManager {\n    releaseAllModel() {\n        this._models.clear();\n    }\n    onDrag(x, y) {\n        const model = this._models.at(0);\n        if (model) {\n            model.setDragging(x, y);\n        }\n    }\n    setMouthTarget(value) {\n        const model = this._models.at(0);\n        if (model) {\n            model.setMouthTarget(value);\n        }\n    }\n    setMouthValueImmediate(value) {\n        const model = this._models.at(0);\n        if (model) {\n            model.setMouthValueImmediate(value);\n        }\n    }\n    getMouthValue() {\n        const model = this._models.at(0);\n        if (model) {\n            return model.getMouthValue();\n        }\n        return 0.0;\n    }\n    onTap(x, y) {\n        if (LAppDefine.DebugLogEnable) {\n            LAppPal.printMessage(`[APP]tap point: {x: ${x.toFixed(2)} y: ${y.toFixed(2)}}`);\n        }\n        const model = this._models.at(0);\n        if (model.hitTest(LAppDefine.HitAreaNameHead, x, y)) {\n            if (LAppDefine.DebugLogEnable) {\n                LAppPal.printMessage(`[APP]hit area: [${LAppDefine.HitAreaNameHead}]`);\n            }\n            model.setRandomExpression();\n        }\n        else if (model.hitTest(LAppDefine.HitAreaNameBody, x, y)) {\n            if (LAppDefine.DebugLogEnable) {\n                LAppPal.printMessage(`[APP]hit area: [${LAppDefine.HitAreaNameBody}]`);\n            }\n            model.startRandomMotion(LAppDefine.MotionGroupTapBody, LAppDefine.PriorityNormal, this.finishedMotion, this.beganMotion);\n        }\n    }\n    onUpdate() {\n        const { width, height } = this._subdelegate.getCanvas();\n        const projection = new CubismMatrix44();\n        const model = this._models.at(0);\n        if (model.getModel()) {\n            if (model.getModel().getCanvasWidth() > 1.0 && width < height) {\n                model.getModelMatrix().setWidth(2.0);\n                projection.scale(1.0, width / height);\n            }\n            else {\n                projection.scale(height / width, 1.0);\n            }\n            if (this._viewMatrix != null) {\n                projection.multiplyByMatrix(this._viewMatrix);\n            }\n        }\n        model.update();\n        model.draw(projection);\n    }\n    nextScene() {\n        const no = (this._sceneIndex + 1) % LAppDefine.ModelDirSize;\n        this.changeScene(no);\n    }\n    changeScene(index) {\n        this._sceneIndex = index;\n        if (LAppDefine.DebugLogEnable) {\n            LAppPal.printMessage(`[APP]model index: ${this._sceneIndex}`);\n        }\n        const model = LAppDefine.ModelDir[index];\n        const modelPath = LAppDefine.ResourcesPath + model + '/';\n        let modelJsonName = LAppDefine.ModelDir[index];\n        modelJsonName += '.model3.json';\n        this.releaseAllModel();\n        const instance = new LAppModel();\n        instance.setSubdelegate(this._subdelegate);\n        instance.loadAssets(modelPath, modelJsonName);\n        this._models.pushBack(instance);\n    }\n    setViewMatrix(m) {\n        for (let i = 0; i < 16; i++) {\n            this._viewMatrix.getArray()[i] = m.getArray()[i];\n        }\n    }\n    addModel(sceneIndex = 0) {\n        this._sceneIndex = sceneIndex;\n        this.changeScene(this._sceneIndex);\n    }\n    constructor() {\n        this.beganMotion = (self) => {\n            LAppPal.printMessage('Motion Began:');\n            console.log(self);\n        };\n        this.finishedMotion = (self) => {\n            LAppPal.printMessage('Motion Finished:');\n            console.log(self);\n        };\n        this._subdelegate = null;\n        this._viewMatrix = new CubismMatrix44();\n        this._models = new csmVector();\n        this._sceneIndex = 0;\n    }\n    release() { }\n    initialize(subdelegate) {\n        this._subdelegate = subdelegate;\n        this.changeScene(this._sceneIndex);\n    }\n}\n","import { csmVector } from '@framework/type/csmvector';\nexport class LAppTextureManager {\n    constructor() {\n        this._textures = new csmVector();\n    }\n    release() {\n        for (let ite = this._textures.begin(); ite.notEqual(this._textures.end()); ite.preIncrement()) {\n            this._glManager.getGl().deleteTexture(ite.ptr().id);\n        }\n        this._textures = null;\n    }\n    createTextureFromPngFile(fileName, usePremultiply, callback) {\n        for (let ite = this._textures.begin(); ite.notEqual(this._textures.end()); ite.preIncrement()) {\n            if (ite.ptr().fileName == fileName &&\n                ite.ptr().usePremultply == usePremultiply) {\n                ite.ptr().img = new Image();\n                ite\n                    .ptr()\n                    .img.addEventListener('load', () => callback(ite.ptr()), {\n                    passive: true\n                });\n                ite.ptr().img.src = fileName;\n                return;\n            }\n        }\n        const img = new Image();\n        img.addEventListener('load', () => {\n            const tex = this._glManager.getGl().createTexture();\n            this._glManager\n                .getGl()\n                .bindTexture(this._glManager.getGl().TEXTURE_2D, tex);\n            this._glManager\n                .getGl()\n                .texParameteri(this._glManager.getGl().TEXTURE_2D, this._glManager.getGl().TEXTURE_MIN_FILTER, this._glManager.getGl().LINEAR_MIPMAP_LINEAR);\n            this._glManager\n                .getGl()\n                .texParameteri(this._glManager.getGl().TEXTURE_2D, this._glManager.getGl().TEXTURE_MAG_FILTER, this._glManager.getGl().LINEAR);\n            if (usePremultiply) {\n                this._glManager\n                    .getGl()\n                    .pixelStorei(this._glManager.getGl().UNPACK_PREMULTIPLY_ALPHA_WEBGL, 1);\n            }\n            this._glManager\n                .getGl()\n                .texImage2D(this._glManager.getGl().TEXTURE_2D, 0, this._glManager.getGl().RGBA, this._glManager.getGl().RGBA, this._glManager.getGl().UNSIGNED_BYTE, img);\n            this._glManager\n                .getGl()\n                .generateMipmap(this._glManager.getGl().TEXTURE_2D);\n            this._glManager\n                .getGl()\n                .bindTexture(this._glManager.getGl().TEXTURE_2D, null);\n            const textureInfo = new TextureInfo();\n            if (textureInfo != null) {\n                textureInfo.fileName = fileName;\n                textureInfo.width = img.width;\n                textureInfo.height = img.height;\n                textureInfo.id = tex;\n                textureInfo.img = img;\n                textureInfo.usePremultply = usePremultiply;\n                if (this._textures != null) {\n                    this._textures.pushBack(textureInfo);\n                }\n            }\n            callback(textureInfo);\n        }, { passive: true });\n        img.src = fileName;\n    }\n    releaseTextures() {\n        for (let i = 0; i < this._textures.getSize(); i++) {\n            this._glManager.getGl().deleteTexture(this._textures.at(i).id);\n            this._textures.set(i, null);\n        }\n        this._textures.clear();\n    }\n    releaseTextureByTexture(texture) {\n        for (let i = 0; i < this._textures.getSize(); i++) {\n            if (this._textures.at(i).id != texture) {\n                continue;\n            }\n            this._glManager.getGl().deleteTexture(this._textures.at(i).id);\n            this._textures.set(i, null);\n            this._textures.remove(i);\n            break;\n        }\n    }\n    releaseTextureByFilePath(fileName) {\n        for (let i = 0; i < this._textures.getSize(); i++) {\n            if (this._textures.at(i).fileName == fileName) {\n                this._glManager.getGl().deleteTexture(this._textures.at(i).id);\n                this._textures.set(i, null);\n                this._textures.remove(i);\n                break;\n            }\n        }\n    }\n    setGlManager(glManager) {\n        this._glManager = glManager;\n    }\n}\nexport class TextureInfo {\n    constructor() {\n        this.id = null;\n        this.width = 0;\n        this.height = 0;\n    }\n}\n","export class LAppSprite {\n    constructor(x, y, width, height, textureId) {\n        this._rect = new Rect();\n        this._rect.left = x - width * 0.5;\n        this._rect.right = x + width * 0.5;\n        this._rect.up = y + height * 0.5;\n        this._rect.down = y - height * 0.5;\n        this._texture = textureId;\n        this._vertexBuffer = null;\n        this._uvBuffer = null;\n        this._indexBuffer = null;\n        this._positionLocation = null;\n        this._uvLocation = null;\n        this._textureLocation = null;\n        this._positionArray = null;\n        this._uvArray = null;\n        this._indexArray = null;\n        this._firstDraw = true;\n    }\n    release() {\n        this._rect = null;\n        const gl = this._subdelegate.getGlManager().getGl();\n        gl.deleteTexture(this._texture);\n        this._texture = null;\n        gl.deleteBuffer(this._uvBuffer);\n        this._uvBuffer = null;\n        gl.deleteBuffer(this._vertexBuffer);\n        this._vertexBuffer = null;\n        gl.deleteBuffer(this._indexBuffer);\n        this._indexBuffer = null;\n    }\n    getTexture() {\n        return this._texture;\n    }\n    render(programId) {\n        if (this._texture == null) {\n            return;\n        }\n        const gl = this._subdelegate.getGlManager().getGl();\n        if (this._firstDraw) {\n            this._positionLocation = gl.getAttribLocation(programId, 'position');\n            gl.enableVertexAttribArray(this._positionLocation);\n            this._uvLocation = gl.getAttribLocation(programId, 'uv');\n            gl.enableVertexAttribArray(this._uvLocation);\n            this._textureLocation = gl.getUniformLocation(programId, 'texture');\n            gl.uniform1i(this._textureLocation, 0);\n            {\n                this._uvArray = new Float32Array([\n                    1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 1.0, 1.0\n                ]);\n                this._uvBuffer = gl.createBuffer();\n            }\n            {\n                const maxWidth = this._subdelegate.getCanvas().width;\n                const maxHeight = this._subdelegate.getCanvas().height;\n                this._positionArray = new Float32Array([\n                    (this._rect.right - maxWidth * 0.5) / (maxWidth * 0.5),\n                    (this._rect.up - maxHeight * 0.5) / (maxHeight * 0.5),\n                    (this._rect.left - maxWidth * 0.5) / (maxWidth * 0.5),\n                    (this._rect.up - maxHeight * 0.5) / (maxHeight * 0.5),\n                    (this._rect.left - maxWidth * 0.5) / (maxWidth * 0.5),\n                    (this._rect.down - maxHeight * 0.5) / (maxHeight * 0.5),\n                    (this._rect.right - maxWidth * 0.5) / (maxWidth * 0.5),\n                    (this._rect.down - maxHeight * 0.5) / (maxHeight * 0.5)\n                ]);\n                this._vertexBuffer = gl.createBuffer();\n            }\n            {\n                this._indexArray = new Uint16Array([0, 1, 2, 3, 2, 0]);\n                this._indexBuffer = gl.createBuffer();\n            }\n            this._firstDraw = false;\n        }\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._uvBuffer);\n        gl.bufferData(gl.ARRAY_BUFFER, this._uvArray, gl.STATIC_DRAW);\n        gl.vertexAttribPointer(this._uvLocation, 2, gl.FLOAT, false, 0, 0);\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._vertexBuffer);\n        gl.bufferData(gl.ARRAY_BUFFER, this._positionArray, gl.STATIC_DRAW);\n        gl.vertexAttribPointer(this._positionLocation, 2, gl.FLOAT, false, 0, 0);\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this._indexBuffer);\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this._indexArray, gl.DYNAMIC_DRAW);\n        gl.bindTexture(gl.TEXTURE_2D, this._texture);\n        gl.drawElements(gl.TRIANGLES, this._indexArray.length, gl.UNSIGNED_SHORT, 0);\n    }\n    isHit(pointX, pointY) {\n        const { height } = this._subdelegate.getCanvas();\n        const y = height - pointY;\n        return (pointX >= this._rect.left &&\n            pointX <= this._rect.right &&\n            y <= this._rect.up &&\n            y >= this._rect.down);\n    }\n    setSubdelegate(subdelegate) {\n        this._subdelegate = subdelegate;\n    }\n}\nexport class Rect {\n}\n","export class TouchManager {\n    constructor() {\n        this._startX = 0.0;\n        this._startY = 0.0;\n        this._lastX = 0.0;\n        this._lastY = 0.0;\n        this._lastX1 = 0.0;\n        this._lastY1 = 0.0;\n        this._lastX2 = 0.0;\n        this._lastY2 = 0.0;\n        this._lastTouchDistance = 0.0;\n        this._deltaX = 0.0;\n        this._deltaY = 0.0;\n        this._scale = 1.0;\n        this._touchSingle = false;\n        this._flipAvailable = false;\n    }\n    getCenterX() {\n        return this._lastX;\n    }\n    getCenterY() {\n        return this._lastY;\n    }\n    getDeltaX() {\n        return this._deltaX;\n    }\n    getDeltaY() {\n        return this._deltaY;\n    }\n    getStartX() {\n        return this._startX;\n    }\n    getStartY() {\n        return this._startY;\n    }\n    getScale() {\n        return this._scale;\n    }\n    getX() {\n        return this._lastX;\n    }\n    getY() {\n        return this._lastY;\n    }\n    getX1() {\n        return this._lastX1;\n    }\n    getY1() {\n        return this._lastY1;\n    }\n    getX2() {\n        return this._lastX2;\n    }\n    getY2() {\n        return this._lastY2;\n    }\n    isSingleTouch() {\n        return this._touchSingle;\n    }\n    isFlickAvailable() {\n        return this._flipAvailable;\n    }\n    disableFlick() {\n        this._flipAvailable = false;\n    }\n    touchesBegan(deviceX, deviceY) {\n        this._lastX = deviceX;\n        this._lastY = deviceY;\n        this._startX = deviceX;\n        this._startY = deviceY;\n        this._lastTouchDistance = -1.0;\n        this._flipAvailable = true;\n        this._touchSingle = true;\n    }\n    touchesMoved(deviceX, deviceY) {\n        this._lastX = deviceX;\n        this._lastY = deviceY;\n        this._lastTouchDistance = -1.0;\n        this._touchSingle = true;\n    }\n    getFlickDistance() {\n        return this.calculateDistance(this._startX, this._startY, this._lastX, this._lastY);\n    }\n    calculateDistance(x1, y1, x2, y2) {\n        return Math.sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2));\n    }\n    calculateMovingAmount(v1, v2) {\n        if (v1 > 0.0 != v2 > 0.0) {\n            return 0.0;\n        }\n        const sign = v1 > 0.0 ? 1.0 : -1.0;\n        const absoluteValue1 = Math.abs(v1);\n        const absoluteValue2 = Math.abs(v2);\n        return (sign * (absoluteValue1 < absoluteValue2 ? absoluteValue1 : absoluteValue2));\n    }\n}\n","import { CubismMatrix44 } from '@framework/math/cubismmatrix44';\nimport { CubismViewMatrix } from '@framework/math/cubismviewmatrix';\nimport * as LAppDefine from './lappdefine';\nimport { LAppPal } from './lapppal';\nimport { LAppSprite } from './lappsprite';\nimport { TouchManager } from './touchmanager';\nexport class LAppView {\n    constructor() {\n        this._programId = null;\n        this._back = null;\n        this._gear = null;\n        this._touchManager = new TouchManager();\n        this._deviceToScreen = new CubismMatrix44();\n        this._viewMatrix = new CubismViewMatrix();\n    }\n    initialize(subdelegate) {\n        this._subdelegate = subdelegate;\n        const { width, height } = subdelegate.getCanvas();\n        const ratio = width / height;\n        const left = -ratio;\n        const right = ratio;\n        const bottom = LAppDefine.ViewLogicalLeft;\n        const top = LAppDefine.ViewLogicalRight;\n        this._viewMatrix.setScreenRect(left, right, bottom, top);\n        this._viewMatrix.scale(LAppDefine.ViewScale, LAppDefine.ViewScale);\n        this._deviceToScreen.loadIdentity();\n        if (width > height) {\n            const screenW = Math.abs(right - left);\n            this._deviceToScreen.scaleRelative(screenW / width, -screenW / width);\n        }\n        else {\n            const screenH = Math.abs(top - bottom);\n            this._deviceToScreen.scaleRelative(screenH / height, -screenH / height);\n        }\n        this._deviceToScreen.translateRelative(-width * 0.5, -height * 0.5);\n        this._viewMatrix.setMaxScale(LAppDefine.ViewMaxScale);\n        this._viewMatrix.setMinScale(LAppDefine.ViewMinScale);\n        this._viewMatrix.setMaxScreenRect(LAppDefine.ViewLogicalMaxLeft, LAppDefine.ViewLogicalMaxRight, LAppDefine.ViewLogicalMaxBottom, LAppDefine.ViewLogicalMaxTop);\n    }\n    release() {\n        this._viewMatrix = null;\n        this._touchManager = null;\n        this._deviceToScreen = null;\n        this._gear.release();\n        this._gear = null;\n        this._back.release();\n        this._back = null;\n        this._subdelegate.getGlManager().getGl().deleteProgram(this._programId);\n        this._programId = null;\n    }\n    render() {\n        this._subdelegate.getGlManager().getGl().useProgram(this._programId);\n        if (this._back) {\n            this._back.render(this._programId);\n        }\n        if (this._gear) {\n            this._gear.render(this._programId);\n        }\n        this._subdelegate.getGlManager().getGl().flush();\n        const lapplive2dmanager = this._subdelegate.getLive2DManager();\n        if (lapplive2dmanager != null) {\n            lapplive2dmanager.setViewMatrix(this._viewMatrix);\n            lapplive2dmanager.onUpdate();\n        }\n    }\n    initializeSprite() {\n        const width = this._subdelegate.getCanvas().width;\n        const height = this._subdelegate.getCanvas().height;\n        const textureManager = this._subdelegate.getTextureManager();\n        const resourcesPath = LAppDefine.ResourcesPath;\n        let imageName = '';\n        imageName = LAppDefine.BackImageName;\n        const initBackGroundTexture = (textureInfo) => {\n            const x = width * 0.5;\n            const y = height * 0.5;\n            const fwidth = textureInfo.width * 2.0;\n            const fheight = height * 0.95;\n            this._back = new LAppSprite(x, y, fwidth, fheight, textureInfo.id);\n            this._back.setSubdelegate(this._subdelegate);\n        };\n        textureManager.createTextureFromPngFile(resourcesPath + imageName, false, initBackGroundTexture);\n        imageName = LAppDefine.GearImageName;\n        const initGearTexture = (textureInfo) => {\n            const x = width - textureInfo.width * 0.5;\n            const y = height - textureInfo.height * 0.5;\n            const fwidth = textureInfo.width;\n            const fheight = textureInfo.height;\n            this._gear = new LAppSprite(x, y, fwidth, fheight, textureInfo.id);\n            this._gear.setSubdelegate(this._subdelegate);\n        };\n        textureManager.createTextureFromPngFile(resourcesPath + imageName, false, initGearTexture);\n        if (this._programId == null) {\n            this._programId = this._subdelegate.createShader();\n        }\n    }\n    onTouchesBegan(pointX, pointY) {\n        this._touchManager.touchesBegan(pointX * window.devicePixelRatio, pointY * window.devicePixelRatio);\n    }\n    onTouchesMoved(pointX, pointY) {\n        const posX = pointX * window.devicePixelRatio;\n        const posY = pointY * window.devicePixelRatio;\n        const lapplive2dmanager = this._subdelegate.getLive2DManager();\n        const viewX = this.transformViewX(this._touchManager.getX());\n        const viewY = this.transformViewY(this._touchManager.getY());\n        this._touchManager.touchesMoved(posX, posY);\n        lapplive2dmanager.onDrag(viewX, viewY);\n    }\n    onTouchesEnded(pointX, pointY) {\n        const posX = pointX * window.devicePixelRatio;\n        const posY = pointY * window.devicePixelRatio;\n        const lapplive2dmanager = this._subdelegate.getLive2DManager();\n        lapplive2dmanager.onDrag(0.0, 0.0);\n        const x = this.transformViewX(posX);\n        const y = this.transformViewY(posY);\n        if (LAppDefine.DebugTouchLogEnable) {\n            LAppPal.printMessage(`[APP]touchesEnded x: ${x} y: ${y}`);\n        }\n        lapplive2dmanager.onTap(x, y);\n        if (this._gear.isHit(posX, posY)) {\n            lapplive2dmanager.nextScene();\n        }\n    }\n    transformViewX(deviceX) {\n        const screenX = this._deviceToScreen.transformX(deviceX);\n        return this._viewMatrix.invertTransformX(screenX);\n    }\n    transformViewY(deviceY) {\n        const screenY = this._deviceToScreen.transformY(deviceY);\n        return this._viewMatrix.invertTransformY(screenY);\n    }\n    transformScreenX(deviceX) {\n        return this._deviceToScreen.transformX(deviceX);\n    }\n    transformScreenY(deviceY) {\n        return this._deviceToScreen.transformY(deviceY);\n    }\n}\n","import * as LAppDefine from './lappdefine';\nimport { LAppGlManager } from './lappglmanager';\nimport { LAppLive2DManager } from './lapplive2dmanager';\nimport { LAppPal } from './lapppal';\nimport { LAppTextureManager } from './lapptexturemanager';\nimport { LAppView } from './lappview';\nexport class LAppSubdelegate {\n    constructor() {\n        this._canvas = null;\n        this._glManager = new LAppGlManager();\n        this._textureManager = new LAppTextureManager();\n        this._live2dManager = new LAppLive2DManager();\n        this._view = new LAppView();\n        this._frameBuffer = null;\n        this._captured = false;\n    }\n    release() {\n        this._resizeObserver.unobserve(this._canvas);\n        this._resizeObserver.disconnect();\n        this._resizeObserver = null;\n        this._live2dManager.release();\n        this._live2dManager = null;\n        this._view.release();\n        this._view = null;\n        this._textureManager.release();\n        this._textureManager = null;\n        this._glManager.release();\n        this._glManager = null;\n    }\n    initialize(canvas) {\n        if (!this._glManager.initialize(canvas)) {\n            return false;\n        }\n        this._canvas = canvas;\n        if (LAppDefine.CanvasSize === 'auto') {\n            this.resizeCanvas();\n        }\n        else {\n            canvas.width = LAppDefine.CanvasSize.width;\n            canvas.height = LAppDefine.CanvasSize.height;\n        }\n        this._textureManager.setGlManager(this._glManager);\n        const gl = this._glManager.getGl();\n        if (!this._frameBuffer) {\n            this._frameBuffer = gl.getParameter(gl.FRAMEBUFFER_BINDING);\n        }\n        gl.enable(gl.BLEND);\n        gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n        this._view.initialize(this);\n        this._view.initializeSprite();\n        this._live2dManager.initialize(this);\n        this._resizeObserver = new ResizeObserver((entries, observer) => this.resizeObserverCallback.call(this, entries, observer));\n        this._resizeObserver.observe(this._canvas);\n        return true;\n    }\n    onResize() {\n        this.resizeCanvas();\n        this._view.initialize(this);\n        this._view.initializeSprite();\n    }\n    resizeObserverCallback(entries, observer) {\n        if (LAppDefine.CanvasSize === 'auto') {\n            this._needResize = true;\n        }\n    }\n    update() {\n        if (this._glManager.getGl().isContextLost()) {\n            return;\n        }\n        if (this._needResize) {\n            this.onResize();\n            this._needResize = false;\n        }\n        const gl = this._glManager.getGl();\n        gl.clearColor(0.0, 0.0, 0.0, 1.0);\n        gl.enable(gl.DEPTH_TEST);\n        gl.depthFunc(gl.LEQUAL);\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n        gl.clearDepth(1.0);\n        gl.enable(gl.BLEND);\n        gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n        this._view.render();\n    }\n    createShader() {\n        const gl = this._glManager.getGl();\n        const vertexShaderId = gl.createShader(gl.VERTEX_SHADER);\n        if (vertexShaderId == null) {\n            LAppPal.printMessage('failed to create vertexShader');\n            return null;\n        }\n        const vertexShader = 'precision mediump float;' +\n            'attribute vec3 position;' +\n            'attribute vec2 uv;' +\n            'varying vec2 vuv;' +\n            'void main(void)' +\n            '{' +\n            '   gl_Position = vec4(position, 1.0);' +\n            '   vuv = uv;' +\n            '}';\n        gl.shaderSource(vertexShaderId, vertexShader);\n        gl.compileShader(vertexShaderId);\n        const fragmentShaderId = gl.createShader(gl.FRAGMENT_SHADER);\n        if (fragmentShaderId == null) {\n            LAppPal.printMessage('failed to create fragmentShader');\n            return null;\n        }\n        const fragmentShader = 'precision mediump float;' +\n            'varying vec2 vuv;' +\n            'uniform sampler2D texture;' +\n            'void main(void)' +\n            '{' +\n            '   gl_FragColor = texture2D(texture, vuv);' +\n            '}';\n        gl.shaderSource(fragmentShaderId, fragmentShader);\n        gl.compileShader(fragmentShaderId);\n        const programId = gl.createProgram();\n        gl.attachShader(programId, vertexShaderId);\n        gl.attachShader(programId, fragmentShaderId);\n        gl.deleteShader(vertexShaderId);\n        gl.deleteShader(fragmentShaderId);\n        gl.linkProgram(programId);\n        gl.useProgram(programId);\n        return programId;\n    }\n    getTextureManager() {\n        return this._textureManager;\n    }\n    getFrameBuffer() {\n        return this._frameBuffer;\n    }\n    getCanvas() {\n        return this._canvas;\n    }\n    getGlManager() {\n        return this._glManager;\n    }\n    getLive2DManager() {\n        return this._live2dManager;\n    }\n    resizeCanvas() {\n        this._canvas.width = this._canvas.clientWidth * window.devicePixelRatio;\n        this._canvas.height = this._canvas.clientHeight * window.devicePixelRatio;\n        const gl = this._glManager.getGl();\n        gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n    }\n    onPointBegan(pageX, pageY) {\n        if (!this._view) {\n            LAppPal.printMessage('view notfound');\n            return;\n        }\n        this._captured = true;\n        const localX = pageX - this._canvas.offsetLeft;\n        const localY = pageY - this._canvas.offsetTop;\n        this._view.onTouchesBegan(localX, localY);\n    }\n    onPointMoved(pageX, pageY) {\n        if (!this._captured) {\n            return;\n        }\n        const localX = pageX - this._canvas.offsetLeft;\n        const localY = pageY - this._canvas.offsetTop;\n        this._view.onTouchesMoved(localX, localY);\n    }\n    onPointEnded(pageX, pageY) {\n        this._captured = false;\n        if (!this._view) {\n            LAppPal.printMessage('view notfound');\n            return;\n        }\n        const localX = pageX - this._canvas.offsetLeft;\n        const localY = pageY - this._canvas.offsetTop;\n        this._view.onTouchesEnded(localX, localY);\n    }\n    onTouchCancel(pageX, pageY) {\n        this._captured = false;\n        if (!this._view) {\n            LAppPal.printMessage('view notfound');\n            return;\n        }\n        const localX = pageX - this._canvas.offsetLeft;\n        const localY = pageY - this._canvas.offsetTop;\n        this._view.onTouchesEnded(localX, localY);\n    }\n    isContextLost() {\n        return this._glManager.getGl().isContextLost();\n    }\n}\n","import { csmVector } from '@framework/type/csmvector';\nimport { CubismFramework, Option } from '@framework/live2dcubismframework';\nimport * as LAppDefine from './lappdefine';\nimport { LAppPal } from './lapppal';\nimport { LAppSubdelegate } from './lappsubdelegate';\nimport { CubismLogError } from '@framework/utils/cubismdebug';\nexport let s_instance = null;\nexport class LAppDelegate {\n    static getInstance() {\n        if (s_instance == null) {\n            s_instance = new LAppDelegate();\n        }\n        return s_instance;\n    }\n    static releaseInstance() {\n        if (s_instance != null) {\n            s_instance.release();\n        }\n        s_instance = null;\n    }\n    onPointerBegan(e) {\n        for (let ite = this._subdelegates.begin(); ite.notEqual(this._subdelegates.end()); ite.preIncrement()) {\n            ite.ptr().onPointBegan(e.pageX, e.pageY);\n        }\n    }\n    onPointerMoved(e) {\n        for (let ite = this._subdelegates.begin(); ite.notEqual(this._subdelegates.end()); ite.preIncrement()) {\n            ite.ptr().onPointMoved(e.pageX, e.pageY);\n        }\n    }\n    onPointerEnded(e) {\n        for (let ite = this._subdelegates.begin(); ite.notEqual(this._subdelegates.end()); ite.preIncrement()) {\n            ite.ptr().onPointEnded(e.pageX, e.pageY);\n        }\n    }\n    onPointerCancel(e) {\n        for (let ite = this._subdelegates.begin(); ite.notEqual(this._subdelegates.end()); ite.preIncrement()) {\n            ite.ptr().onTouchCancel(e.pageX, e.pageY);\n        }\n    }\n    onResize() {\n        for (let i = 0; i < this._subdelegates.getSize(); i++) {\n            this._subdelegates.at(i).onResize();\n        }\n    }\n    run() {\n        const loop = () => {\n            if (s_instance == null) {\n                return;\n            }\n            LAppPal.updateTime();\n            for (let i = 0; i < this._subdelegates.getSize(); i++) {\n                this._subdelegates.at(i).update();\n            }\n            requestAnimationFrame(loop);\n        };\n        loop();\n    }\n    release() {\n        this.releaseEventListener();\n        this.releaseSubdelegates();\n        CubismFramework.dispose();\n        this._cubismOption = null;\n    }\n    releaseEventListener() {\n        document.removeEventListener('pointerup', this.pointBeganEventListener);\n        this.pointBeganEventListener = null;\n        document.removeEventListener('pointermove', this.pointMovedEventListener);\n        this.pointMovedEventListener = null;\n        document.removeEventListener('pointerdown', this.pointEndedEventListener);\n        this.pointEndedEventListener = null;\n        document.removeEventListener('pointerdown', this.pointCancelEventListener);\n        this.pointCancelEventListener = null;\n    }\n    releaseSubdelegates() {\n        for (let ite = this._subdelegates.begin(); ite.notEqual(this._subdelegates.end()); ite.preIncrement()) {\n            ite.ptr().release();\n        }\n        this._subdelegates.clear();\n        this._subdelegates = null;\n    }\n    initialize() {\n        this.initializeCubism();\n        this.initializeSubdelegates();\n        this.initializeEventListener();\n        return true;\n    }\n    initializeEventListener() {\n        this.pointBeganEventListener = this.onPointerBegan.bind(this);\n        this.pointMovedEventListener = this.onPointerMoved.bind(this);\n        this.pointEndedEventListener = this.onPointerEnded.bind(this);\n        this.pointCancelEventListener = this.onPointerCancel.bind(this);\n        document.addEventListener('pointerdown', this.pointBeganEventListener, {\n            passive: true\n        });\n        document.addEventListener('pointermove', this.pointMovedEventListener, {\n            passive: true\n        });\n        document.addEventListener('pointerup', this.pointEndedEventListener, {\n            passive: true\n        });\n        document.addEventListener('pointercancel', this.pointCancelEventListener, {\n            passive: true\n        });\n    }\n    initializeCubism() {\n        LAppPal.updateTime();\n        this._cubismOption.logFunction = LAppPal.printMessage;\n        this._cubismOption.loggingLevel = LAppDefine.CubismLoggingLevel;\n        CubismFramework.startUp(this._cubismOption);\n        CubismFramework.initialize();\n    }\n    initializeSubdelegates() {\n        let width = 100;\n        let height = 100;\n        if (LAppDefine.CanvasNum > 3) {\n            const widthunit = Math.ceil(Math.sqrt(LAppDefine.CanvasNum));\n            const heightUnit = Math.ceil(LAppDefine.CanvasNum / widthunit);\n            width = 100.0 / widthunit;\n            height = 100.0 / heightUnit;\n        }\n        else {\n            width = 100.0 / LAppDefine.CanvasNum;\n        }\n        this._canvases.prepareCapacity(LAppDefine.CanvasNum);\n        this._subdelegates.prepareCapacity(LAppDefine.CanvasNum);\n        for (let i = 0; i < LAppDefine.CanvasNum; i++) {\n            const canvas = document.createElement('canvas');\n            this._canvases.pushBack(canvas);\n            canvas.style.width = `${width}vw`;\n            canvas.style.height = `${height}vh`;\n            document.body.appendChild(canvas);\n        }\n        for (let i = 0; i < this._canvases.getSize(); i++) {\n            const subdelegate = new LAppSubdelegate();\n            subdelegate.initialize(this._canvases.at(i));\n            this._subdelegates.pushBack(subdelegate);\n        }\n        for (let i = 0; i < LAppDefine.CanvasNum; i++) {\n            if (this._subdelegates.at(i).isContextLost()) {\n                CubismLogError(`The context for Canvas at index ${i} was lost, possibly because the acquisition limit for WebGLRenderingContext was reached.`);\n            }\n        }\n    }\n    constructor() {\n        this._cubismOption = new Option();\n        this._subdelegates = new csmVector();\n        this._canvases = new csmVector();\n    }\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as LAppDefine from '@demo/lappdefine.js';\nimport { LAppDelegate } from '@demo/lappdelegate.js';\nimport { LAppModel } from '@demo/lappmodel.js';\nimport { LAppPal } from '@demo/lapppal';\nimport { LAppSubdelegate } from '@demo/lappsubdelegate.js';\nimport { CubismFramework, LogLevel } from '@framework/live2dcubismframework';\nimport { csmVector } from '@framework/type/csmvector';\nimport logger from '../logger.js';\nLAppPal.printMessage = () => { };\nclass AppSubdelegate extends LAppSubdelegate {\n    initialize(canvas) {\n        if (!this._glManager.initialize(canvas)) {\n            return false;\n        }\n        this._canvas = canvas;\n        if (LAppDefine.CanvasSize === 'auto') {\n            this.resizeCanvas();\n        }\n        else {\n            canvas.width = LAppDefine.CanvasSize.width;\n            canvas.height = LAppDefine.CanvasSize.height;\n        }\n        this._textureManager.setGlManager(this._glManager);\n        const gl = this._glManager.getGl();\n        if (!this._frameBuffer) {\n            this._frameBuffer = gl.getParameter(gl.FRAMEBUFFER_BINDING);\n        }\n        gl.enable(gl.BLEND);\n        gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n        this._view.initialize(this);\n        this._view._gear = {\n            render: () => { },\n            isHit: () => { },\n            release: () => { },\n        };\n        this._view._back = {\n            render: () => { },\n            release: () => { },\n        };\n        this._live2dManager._subdelegate = this;\n        this._resizeObserver = new window.ResizeObserver((entries, observer) => this.resizeObserverCallback.call(this, entries, observer));\n        this._resizeObserver.observe(this._canvas);\n        return true;\n    }\n    onResize() {\n        this.resizeCanvas();\n        this._view.initialize(this);\n    }\n    update() {\n        if (this._glManager.getGl().isContextLost()) {\n            return;\n        }\n        if (this._needResize) {\n            this.onResize();\n            this._needResize = false;\n        }\n        const gl = this._glManager.getGl();\n        gl.clearColor(0.0, 0.0, 0.0, 0.0);\n        gl.enable(gl.DEPTH_TEST);\n        gl.depthFunc(gl.LEQUAL);\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n        gl.clearDepth(1.0);\n        gl.enable(gl.BLEND);\n        gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n        this._view.render();\n    }\n}\nexport class AppDelegate extends LAppDelegate {\n    constructor() {\n        super();\n        this._cubismOption = {};\n        this._subdelegates = new csmVector();\n        this._drawFrameId = null;\n        this.mouseMoveEventListener = null;\n        this.mouseEndedEventListener = null;\n        this.tapEventListener = null;\n    }\n    initialize() {\n        this.initializeCubism();\n        this.initializeSubdelegates();\n        this.initializeEventListener();\n        return true;\n    }\n    initializeCubism() {\n        LAppPal.updateTime();\n        this._cubismOption.logFunction = LAppPal.printMessage;\n        this._cubismOption.loggingLevel = LogLevel.LogLevel_Verbose;\n        CubismFramework.startUp(this._cubismOption);\n        CubismFramework.initialize();\n    }\n    initializeSubdelegates() {\n        let canvas = document.getElementById('live2d');\n        if (!canvas) {\n            canvas = document.createElement('canvas');\n            canvas.id = 'live2d';\n            canvas.width = 800;\n            canvas.height = 800;\n            document.body.appendChild(canvas);\n        }\n        const subdelegate = new AppSubdelegate();\n        if (subdelegate.initialize(canvas)) {\n            this._subdelegates.pushBack(subdelegate);\n            logger.info('Subdelegate initialized successfully');\n        }\n        else {\n            logger.error('Failed to initialize subdelegate');\n        }\n    }\n    initializeEventListener() {\n        this.mouseMoveEventListener = (e) => this.onMouseMove(e);\n        this.mouseEndedEventListener = (e) => this.onMouseEnd(e);\n        this.tapEventListener = (e) => this.onTap(e);\n        document.addEventListener('mousemove', this.mouseMoveEventListener);\n        document.addEventListener('mouseup', this.mouseEndedEventListener);\n        document.addEventListener('click', this.tapEventListener);\n        document.addEventListener('touchmove', this.mouseMoveEventListener);\n        document.addEventListener('touchend', this.mouseEndedEventListener);\n        document.addEventListener('touchstart', this.tapEventListener);\n    }\n    run() {\n        const loop = () => {\n            LAppPal.updateTime();\n            for (let i = 0; i < this._subdelegates.getSize(); i++) {\n                this._subdelegates.at(i).update();\n            }\n            this._drawFrameId = window.requestAnimationFrame(loop);\n        };\n        loop();\n    }\n    stop() {\n        if (this._drawFrameId) {\n            window.cancelAnimationFrame(this._drawFrameId);\n            this._drawFrameId = null;\n        }\n    }\n    release() {\n        this.stop();\n        this.releaseEventListener();\n        this._subdelegates.clear();\n        this._cubismOption = null;\n    }\n    transformOffset(e) {\n        const subdelegate = this._subdelegates.at(0);\n        const rect = subdelegate.getCanvas().getBoundingClientRect();\n        const localX = e.pageX - rect.left;\n        const localY = e.pageY - rect.top;\n        const posX = localX * window.devicePixelRatio;\n        const posY = localY * window.devicePixelRatio;\n        const x = subdelegate._view.transformViewX(posX);\n        const y = subdelegate._view.transformViewY(posY);\n        return {\n            x,\n            y,\n        };\n    }\n    onMouseMove(e) {\n        const lapplive2dmanager = this._subdelegates.at(0).getLive2DManager();\n        const { x, y } = this.transformOffset(e);\n        const model = lapplive2dmanager._models.at(0);\n        lapplive2dmanager.onDrag(x, y);\n        lapplive2dmanager.onTap(x, y);\n        if (model.hitTest(LAppDefine.HitAreaNameBody, x, y)) {\n            window.dispatchEvent(new Event('live2d:hoverbody'));\n        }\n    }\n    onMouseEnd(e) {\n        const lapplive2dmanager = this._subdelegates.at(0).getLive2DManager();\n        const { x, y } = this.transformOffset(e);\n        lapplive2dmanager.onDrag(0.0, 0.0);\n        lapplive2dmanager.onTap(x, y);\n    }\n    onTap(e) {\n        const lapplive2dmanager = this._subdelegates.at(0).getLive2DManager();\n        const { x, y } = this.transformOffset(e);\n        const model = lapplive2dmanager._models.at(0);\n        if (model.hitTest(LAppDefine.HitAreaNameBody, x, y)) {\n            window.dispatchEvent(new Event('live2d:tapbody'));\n        }\n    }\n    initializeEventListener() {\n        this.mouseMoveEventListener = this.onMouseMove.bind(this);\n        this.mouseEndedEventListener = this.onMouseEnd.bind(this);\n        this.tapEventListener = this.onTap.bind(this);\n        document.addEventListener('mousemove', this.mouseMoveEventListener, {\n            passive: true,\n        });\n        document.addEventListener('mouseout', this.mouseEndedEventListener, {\n            passive: true,\n        });\n        document.addEventListener('pointerdown', this.tapEventListener, {\n            passive: true,\n        });\n    }\n    releaseEventListener() {\n        document.removeEventListener('mousemove', this.mouseMoveEventListener, {\n            passive: true,\n        });\n        this.mouseMoveEventListener = null;\n        document.removeEventListener('mouseout', this.mouseEndedEventListener, {\n            passive: true,\n        });\n        this.mouseEndedEventListener = null;\n        document.removeEventListener('pointerdown', this.tapEventListener, {\n            passive: true,\n        });\n    }\n    initializeSubdelegates() {\n        this._canvases.prepareCapacity(LAppDefine.CanvasNum);\n        this._subdelegates.prepareCapacity(LAppDefine.CanvasNum);\n        const canvas = document.getElementById('live2d');\n        this._canvases.pushBack(canvas);\n        canvas.style.width = canvas.width;\n        canvas.style.height = canvas.height;\n        for (let i = 0; i < this._canvases.getSize(); i++) {\n            const subdelegate = new AppSubdelegate();\n            const result = subdelegate.initialize(this._canvases.at(i));\n            if (!result) {\n                logger.error('Failed to initialize AppSubdelegate');\n                return;\n            }\n            this._subdelegates.pushBack(subdelegate);\n        }\n        for (let i = 0; i < LAppDefine.CanvasNum; i++) {\n            if (this._subdelegates.at(i).isContextLost()) {\n                logger.error(`The context for Canvas at index ${i} was lost, possibly because the acquisition limit for WebGLRenderingContext was reached.`);\n            }\n        }\n    }\n    changeModel(modelSettingPath) {\n        const segments = modelSettingPath.split('/');\n        const modelJsonName = segments.pop();\n        const modelPath = segments.join('/') + '/';\n        const live2dManager = this._subdelegates.at(0).getLive2DManager();\n        live2dManager.releaseAllModel();\n        const instance = new LAppModel();\n        instance.setSubdelegate(live2dManager._subdelegate);\n        instance.loadAssets(modelPath, modelJsonName);\n        live2dManager._models.pushBack(instance);\n    }\n    get subdelegates() {\n        return this._subdelegates;\n    }\n}\nclass EnhancedLAppModel extends LAppModel {\n    constructor() {\n        super();\n        this._autoLoadingComplete = false;\n        this._expressionLoadCount = 0;\n        this._motionLoadCount = 0;\n        this._totalExpressions = 0;\n        this._totalMotions = 0;\n    }\n    loadAssets(dir, fileName) {\n        console.log('🚀 EnhancedLAppModel: Starting enhanced auto-loading...');\n        this._modelHomeDir = dir;\n        fetch(`${this._modelHomeDir}${fileName}`)\n            .then((response) => response.arrayBuffer())\n            .then((arrayBuffer) => {\n            const setting = new window.Live2DCubismFramework.CubismModelSettingJson(arrayBuffer, arrayBuffer.byteLength);\n            this.setupModelWithAutoLoading(setting);\n        })\n            .catch((error) => {\n            console.error('❌ Failed to load model setting:', error);\n        });\n    }\n    setupModelWithAutoLoading(setting) {\n        return __awaiter(this, void 0, void 0, function* () {\n            console.log('📋 Setting up model with auto-loading...');\n            this._modelSetting = setting;\n            yield this.loadModelData();\n            yield this.autoLoadAllExpressions();\n            yield this.autoLoadAllMotions();\n            yield this.loadPhysicsAndOthers();\n            yield this.completeSetup();\n            this.createSimplifiedAPI();\n            console.log('✅ Enhanced auto-loading complete!');\n            this._autoLoadingComplete = true;\n        });\n    }\n    loadModelData() {\n        return __awaiter(this, void 0, void 0, function* () {\n            console.log('📦 Loading model data...');\n            const modelFileName = this._modelSetting.getModelFileName();\n            try {\n                const response = yield fetch(`${this._modelHomeDir}${modelFileName}`);\n                const arrayBuffer = yield response.arrayBuffer();\n                this.loadModel(arrayBuffer, arrayBuffer.byteLength, false);\n                console.log('✅ Model data loaded successfully');\n            }\n            catch (error) {\n                console.error('❌ Failed to load model data:', error);\n            }\n        });\n    }\n    autoLoadAllExpressions() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const expressionCount = this._modelSetting.getExpressionCount();\n            console.log(`🎭 Auto-loading ${expressionCount} expressions...`);\n            if (expressionCount === 0) {\n                console.log('ℹ️ No expressions to load');\n                return;\n            }\n            this._totalExpressions = expressionCount;\n            this._expressionLoadCount = 0;\n            const loadPromises = [];\n            for (let i = 0; i < expressionCount; i++) {\n                const expressionName = this._modelSetting.getExpressionName(i);\n                const expressionFileName = this._modelSetting.getExpressionFileName(i);\n                console.log(`📥 Loading expression ${i + 1}/${expressionCount}: ${expressionName}`);\n                const loadPromise = this.loadSingleExpression(expressionName, expressionFileName);\n                loadPromises.push(loadPromise);\n            }\n            yield Promise.all(loadPromises);\n            console.log(`✅ All ${expressionCount} expressions loaded successfully!`);\n        });\n    }\n    loadSingleExpression(expressionName, expressionFileName) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const response = yield fetch(`${this._modelHomeDir}${expressionFileName}`);\n                if (!response.ok) {\n                    console.warn(`⚠️ Expression file not found: ${expressionFileName}`);\n                    return;\n                }\n                const arrayBuffer = yield response.arrayBuffer();\n                const motion = this.loadExpression(arrayBuffer, arrayBuffer.byteLength, expressionName);\n                if (motion) {\n                    if (this._expressions.getValue(expressionName) != null) {\n                        window.Live2DCubismFramework.ACubismMotion.delete(this._expressions.getValue(expressionName));\n                    }\n                    this._expressions.setValue(expressionName, motion);\n                    this._expressionLoadCount++;\n                    console.log(`✅ Expression loaded: ${expressionName}`);\n                }\n            }\n            catch (error) {\n                console.error(`❌ Failed to load expression ${expressionName}:`, error);\n            }\n        });\n    }\n    autoLoadAllMotions() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const motionGroupCount = this._modelSetting.getMotionGroupCount();\n            console.log(`🎬 Auto-loading motions from ${motionGroupCount} groups...`);\n            if (motionGroupCount === 0) {\n                console.log('ℹ️ No motion groups to load');\n                return;\n            }\n            this._totalMotions = 0;\n            for (let i = 0; i < motionGroupCount; i++) {\n                const group = this._modelSetting.getMotionGroupName(i);\n                this._totalMotions += this._modelSetting.getMotionCount(group);\n            }\n            console.log(`📊 Total motions to load: ${this._totalMotions}`);\n            this._motionLoadCount = 0;\n            const loadPromises = [];\n            for (let i = 0; i < motionGroupCount; i++) {\n                const group = this._modelSetting.getMotionGroupName(i);\n                const groupPromise = this.autoLoadMotionGroup(group);\n                loadPromises.push(groupPromise);\n            }\n            yield Promise.all(loadPromises);\n            console.log(`✅ All ${this._totalMotions} motions loaded successfully!`);\n        });\n    }\n    autoLoadMotionGroup(group) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const motionCount = this._modelSetting.getMotionCount(group);\n            console.log(`📥 Loading motion group \"${group}\" (${motionCount} motions)...`);\n            const loadPromises = [];\n            for (let i = 0; i < motionCount; i++) {\n                const motionFileName = this._modelSetting.getMotionFileName(group, i);\n                const motionKey = `${group}_${i}`;\n                const loadPromise = this.loadSingleMotion(group, i, motionKey, motionFileName);\n                loadPromises.push(loadPromise);\n            }\n            yield Promise.all(loadPromises);\n            console.log(`✅ Motion group \"${group}\" loaded successfully!`);\n        });\n    }\n    loadSingleMotion(group, index, motionKey, motionFileName) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const response = yield fetch(`${this._modelHomeDir}${motionFileName}`);\n                if (!response.ok) {\n                    console.warn(`⚠️ Motion file not found: ${motionFileName}`);\n                    return;\n                }\n                const arrayBuffer = yield response.arrayBuffer();\n                const motion = this.loadMotion(arrayBuffer, arrayBuffer.byteLength, motionKey, null, null, this._modelSetting, group, index, true);\n                if (motion) {\n                    if (this._eyeBlinkIds && this._lipSyncIds) {\n                        motion.setEffectIds(this._eyeBlinkIds, this._lipSyncIds);\n                    }\n                    if (this._motions.getValue(motionKey) != null) {\n                        window.Live2DCubismFramework.ACubismMotion.delete(this._motions.getValue(motionKey));\n                    }\n                    this._motions.setValue(motionKey, motion);\n                    this._motionLoadCount++;\n                    console.log(`✅ Motion loaded: ${motionKey} (${motionFileName})`);\n                }\n            }\n            catch (error) {\n                console.error(`❌ Failed to load motion ${motionKey}:`, error);\n            }\n        });\n    }\n    loadPhysicsAndOthers() {\n        return __awaiter(this, void 0, void 0, function* () {\n            console.log('⚙️ Loading physics and other components...');\n            if (this._modelSetting.getPhysicsFileName() != null) {\n                const physicsFileName = this._modelSetting.getPhysicsFileName();\n                try {\n                    const response = yield fetch(`${this._modelHomeDir}${physicsFileName}`);\n                    const arrayBuffer = yield response.arrayBuffer();\n                    this.loadPhysics(arrayBuffer, arrayBuffer.byteLength);\n                    console.log('✅ Physics loaded successfully');\n                }\n                catch (error) {\n                    console.error('❌ Failed to load physics:', error);\n                }\n            }\n            if (this._modelSetting.getPoseFileName() != null) {\n                console.log('⚠️ Skipping pose loading to avoid server errors');\n            }\n            if (this._modelSetting.getEyeBlinkParameterCount() > 0) {\n                this._eyeBlinkIds = new window.Live2DCubismFramework.csmVector();\n                for (let i = 0; i < this._modelSetting.getEyeBlinkParameterCount(); i++) {\n                    this._eyeBlinkIds.pushBack(this._modelSetting.getEyeBlinkParameterId(i));\n                }\n                this._eyeBlink = window.Live2DCubismFramework.CubismEyeBlink.create(this._modelSetting);\n                console.log('✅ Eye blink setup complete');\n            }\n            if (this._modelSetting.getLipSyncParameterCount() > 0) {\n                this._lipSyncIds = new window.Live2DCubismFramework.csmVector();\n                for (let i = 0; i < this._modelSetting.getLipSyncParameterCount(); i++) {\n                    this._lipSyncIds.pushBack(this._modelSetting.getLipSyncParameterId(i));\n                }\n                console.log('✅ Lip sync setup complete');\n            }\n        });\n    }\n    completeSetup() {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _b, _c;\n            console.log('🎨 Setting up textures and completing initialization...');\n            try {\n                this.createRenderer();\n                this._state = ((_b = window.Live2DCubismFramework.LoadStep) === null || _b === void 0 ? void 0 : _b.LoadTexture) || 6;\n                this._textureCount = 0;\n                this.setupTextures();\n                console.log('✅ Texture loading initiated using official method');\n            }\n            catch (error) {\n                console.error('❌ Failed to setup textures:', error);\n                this._state = ((_c = window.Live2DCubismFramework.LoadStep) === null || _c === void 0 ? void 0 : _c.CompleteSetup) || 7;\n            }\n        });\n    }\n    createSimplifiedAPI() {\n        console.log('🔧 Creating simplified API...');\n        window.setExpression = (name) => {\n            console.log(`🎭 Setting expression: ${name}`);\n            return this.setExpression(name);\n        };\n        window.startMotion = (group, index, priority = 3) => {\n            const motionKey = `${group}_${index}`;\n            console.log(`🎬 Starting motion: ${motionKey}`);\n            return this.startMotion(group, index, priority);\n        };\n        window.setRandomExpression = () => {\n            console.log('🎲 Setting random expression');\n            return this.setRandomExpression();\n        };\n        window.startRandomMotion = (group, priority = 3) => {\n            console.log(`🎲 Starting random motion in group: ${group}`);\n            return this.startRandomMotion(group, priority);\n        };\n        window.setMouthTarget = (value) => {\n            console.log(`👄 Setting mouth target: ${value}`);\n            const lapplive2dmanager = this._subdelegates.at(0).getLive2DManager();\n            return lapplive2dmanager.setMouthTarget(value);\n        };\n        window.setMouthValueImmediate = (value) => {\n            console.log(`👄 Setting mouth value immediate: ${value}`);\n            const lapplive2dmanager = this._subdelegates.at(0).getLive2DManager();\n            return lapplive2dmanager.setMouthValueImmediate(value);\n        };\n        window.getMouthValue = () => {\n            const lapplive2dmanager = this._subdelegates.at(0).getLive2DManager();\n            const value = lapplive2dmanager.getMouthValue();\n            console.log(`👄 Current mouth value: ${value}`);\n            return value;\n        };\n        window.checkAutoLoadStatus = () => {\n            console.log('📊 Auto-load Status:');\n            console.log(`  - Expressions: ${this._expressionLoadCount}/${this._totalExpressions}`);\n            console.log(`  - Motions: ${this._motionLoadCount}/${this._totalMotions}`);\n            console.log(`  - Complete: ${this._autoLoadingComplete}`);\n            console.log('  - Available expressions:', this.getAvailableExpressions());\n            console.log('  - Available motions:', this.getAvailableMotions());\n        };\n        console.log('✅ Simplified API created successfully!');\n    }\n    getAvailableExpressions() {\n        const expressions = [];\n        for (let i = 0; i < this._expressions.getSize(); i++) {\n            expressions.push(this._expressions._keyValues[i].first);\n        }\n        return expressions;\n    }\n    getAvailableMotions() {\n        const motions = [];\n        for (let i = 0; i < this._motions.getSize(); i++) {\n            motions.push(this._motions._keyValues[i].first);\n        }\n        return motions;\n    }\n}\n"],"names":["csmVector","constructor","initialCapacity","this","_ptr","_capacity","_size","Array","at","index","set","value","get","offset","ret","i","push","pushBack","prepareCapacity","DefaultSize","clear","length","getSize","assign","newSize","resize","updateSize","callPlacementNew","JSON","parse","stringify","sub","splice","insert","position","begin","end","dstSi","_index","srcSi","srcEi","addCount","addSize","_vector","remove","erase","ite","iterator","getOffset","newVector","iterator$1","v","undefined","preIncrement","preDecrement","increment","decrement","ptr","substitution","notEqual","Live2DCubismFramework","CubismBlendMode","$.csmVector","$.iterator","csmString","append","c","s","substr","expansion","getBytes","encodeURIComponent","replace","getLength","isLess","isGreat","isEqual","isEmpty","$.csmString","CubismId","createIdInternal","id","getString","_id","isNotEqual","$.CubismId","CubismIdManager","_ids","release","registerIds","ids","registerId","result","findId","getId","isExist","$.CubismIdManager","CubismMatrix44","_tr","Float32Array","loadIdentity","multiply","a","b","dst","j","k","setMatrix","tr","getArray","getScaleX","getScaleY","getTranslateX","getTranslateY","transformX","src","transformY","invertTransformX","invertTransformY","translateRelative","x","y","tr1","translate","translateX","translateY","scaleRelative","scale","multiplyByMatrix","m","clone","cloneMatrix","$.CubismMatrix44","csmRect","w","h","width","height","getCenterX","getCenterY","getRight","getBottom","setRect","r","expand","$.csmRect","CubismRenderer","create","renderer","initialize","model","_model","drawModel","getModel","saveProfile","doDrawModel","restoreProfile","setMvpMatrix","matrix44","_mvpMatrix4x4","getMvpMatrix","setModelColor","red","green","blue","alpha","_modelColor","g","getModelColor","getModelColorWithOpacity","opacity","modelColorRGBA","isPremultipliedAlpha","setIsPremultipliedAlpha","enable","_isPremultipliedAlpha","setIsCulling","culling","_isCulling","isCulling","setAnisotropy","n","_anisotropy","getAnisotropy","useHighPrecisionMask","high","_useHighPrecisionMask","isUsingHighPrecisionMask","CubismTextureColor","CubismClippingContext","clippingDrawableIndices","clipCount","_clippingIdList","_clippingIdCount","_allClippedDrawRect","_layoutBounds","_clippedDrawableIndexList","_matrixForMask","_matrixForDraw","_bufferIndex","addClippedDrawable","drawableIndex","$.CubismBlendMode","$.CubismRenderer","$.CubismTextureColor","CubismLogPrintIn","level","fmt","args","CubismDebug","print","CubismLogPrint","CSM_ASSERT","expr","console","assert","CubismLogDebug","CubismLogInfo","CubismLogWarning","CubismLogError","LogLevel","LogLevel_Debug","LogLevel_Info","LogLevel_Warning","LogLevel_Error","logLevel","format","CubismFramework","getLoggingLevel","logPrint","coreLogFunction","dumpBytes","data","$.CubismDebug","csmPair","key","first","second","csmMap","size","_keyValues","_dummyValue","appendKey","findIndex","getValue","found","setValue","fitToSize","dumpAsInt","idx","_map","iteold","$.csmMap","$.csmPair","CubismJsonExtension","parseJsonObject","obj","map","Object","keys","forEach","convValue","Boolean","put","JsonBoolean","String","JsonString","Number","JsonFloat","parseJsonArray","JsonMap","JsonNullvalue","arr","JsonArray","add","CSM_JSON_ERROR_TYPE_MISMATCH","Value$2","Value","getRawString","defaultValue","indent","toInt","toFloat","toBoolean","getVector","getMap","getValueByIndex","errorValue","setErrorNotForClientCall","getValueByString","nullValue","getKeys","dummyKeys","isError","isNull","isBool","isFloat","isString","isArray","isMap","equals","isStatic","errorStr","JsonError","staticInitializeNotForClientCall","trueValue","falseValue","staticReleaseNotForClientCall","CubismJson","buffer","_parseCallback","_error","_lineCount","_root","parseBytes","json","delete","instance","getRoot","arrayBufferToString","uint8Array","Uint8Array","str","len","pad","toString","decodeURIComponent","parseCallback","endPos","decodeBuffer","parseValue","strbuf","getParseError","checkEndOfFile","outEndPos","f","o","afterString","strtod","slice","indexOf","parseString","parseArray","parseObject","string","c2","bufStart","localRetEndPos2","ok","FOR_LOOP","FOR_LOOP2","FOR_LOOP3","localRetEndpos2","super","_value","parseFloat","_stringBuffer","parseInt","Math","round","_boolValue","_isStatic","_array","stringBuffer","iter","_keys","endPtr","testC","test","substring","number","isNaN","d","NaN","$.CubismJson","$.JsonArray","$.JsonBoolean","$.JsonError","$.JsonFloat","$.JsonMap","$.JsonNullvalue","$.JsonString","$.Value","s_isStarted","s_isInitialized","s_option","s_cubismIdManager","Constant","freeze","vertexOffset","vertexStep","csmDelete","address","startUp","option","Live2DCubismCore","Logging","csmSetLogFunction","logFunction","version","Version","csmGetVersion","minor","patch","versionNumber","cleanUp","memorySize","Memory","initializeAmountOfMemory","dispose","staticRelease","isStarted","isInitialized","message","csmGetLogFunction","loggingLevel","LogLevel_Off","getIdManager","Option","$.Constant","$.csmDelete","$.CubismFramework","ResourcesPath","ModelDir","ModelDirSize","HitAreaNameHead","HitAreaNameBody","CubismLoggingLevel","LogLevel_Verbose","LAppPal","loadFileAsBytes","filePath","callback","fetch","then","response","arrayBuffer","byteLength","getDeltaTime","deltaTime","updateTime","currentFrame","Date","now","lastFrame","printMessage","log","lastUpdate","LAppGlManager","_gl","canvas","getContext","alert","getGl","CubismDefaultParameterId","HitAreaPrefix","HitAreaHead","HitAreaBody","PartsIdCore","PartsArmPrefix","PartsArmLPrefix","PartsArmRPrefix","ParamAngleX","ParamAngleY","ParamAngleZ","ParamEyeLOpen","ParamEyeLSmile","ParamEyeROpen","ParamEyeRSmile","ParamEyeBallX","ParamEyeBallY","ParamEyeBallForm","ParamBrowLY","ParamBrowRY","ParamBrowLX","ParamBrowRX","ParamBrowLAngle","ParamBrowRAngle","ParamBrowLForm","ParamBrowRForm","ParamMouthForm","ParamMouthOpenY","ParamCheek","ParamBodyAngleX","ParamBodyAngleY","ParamBodyAngleZ","ParamBreath","ParamArmLA","ParamArmRA","ParamArmLB","ParamArmRB","ParamHandL","ParamHandR","ParamHairFront","ParamHairSide","ParamHairBack","ParamHairFluffy","ParamShoulderY","ParamBustX","ParamBustY","ParamBaseX","ParamBaseY","ParamNONE","FrequestNode","EyeState","$.CubismDefaultParameterId","ICubismModelSetting","$.ICubismModelSetting","CubismModelSettingJson","fileReferences","groups","layout","hitAreas","moc","textures","physics","pose","expressions","motions","userData","name","target","idle","tapBody","pinchIn","pinchOut","shake","flickHead","parameter","soundPath","fadeInTime","fadeOutTime","centerX","centerY","lipSync","eyeBlink","initParameter","initPartsVisible","val","_json","getJson","_jsonValue","getModelFileName","isExistModelFile","FrequestNode_Moc","getTextureCount","isExistTextureFiles","FrequestNode_Textures","getTextureDirectory","pathArray","split","arrayLength","textureDirectoryStr","getTextureFileName","getHitAreasCount","isExistHitAreas","FrequestNode_HitAreas","getHitAreaId","getHitAreaName","getPhysicsFileName","isExistPhysicsFile","FrequestNode_Physics","getPoseFileName","isExistPoseFile","FrequestNode_Pose","getExpressionCount","isExistExpressionFile","FrequestNode_Expressions","getExpressionName","getExpressionFileName","getMotionGroupCount","isExistMotionGroups","FrequestNode_Motions","getMotionGroupName","getMotionCount","groupName","isExistMotionGroupName","getMotionFileName","getMotionSoundFileName","isExistMotionSoundFile","getMotionFadeInTimeValue","isExistMotionFadeIn","getMotionFadeOutTimeValue","isExistMotionFadeOut","getUserDataFile","isExistUserDataFile","getLayoutMap","outLayoutMap","getEyeBlinkParameterCount","isExistEyeBlinkParameters","num","FrequestNode_Groups","refI","getEyeBlinkParameterId","getLipSyncParameterCount","isExistLipSyncParameters","getLipSyncParameterId","node","$.CubismModelSettingJson","$.FrequestNode","CubismBreath","setParameters","breathParameters","_breathParameters","getParameters","updateParameters","deltaTimeSeconds","_currentTime","t","PI","addParameterValueById","parameterId","peak","sin","cycle","weight","BreathParameterData","$.BreathParameterData","$.CubismBreath","CubismEyeBlink","modelSetting","setBlinkingInterval","blinkingInterval","_blinkingIntervalSeconds","setBlinkingSetting","closing","closed","opening","_closingSeconds","_closedSeconds","_openingSeconds","setParameterIds","parameterIds","_parameterIds","getParameterIds","parameterValue","_userTimeSeconds","_blinkingState","EyeState_Closing","_stateStartTimeSeconds","EyeState_Closed","EyeState_Opening","EyeState_Interval","_nextBlinkingTime","determinNextBlinkingTiming","EyeState_First","CloseIfZero","setParameterValueById","random","$.CubismEyeBlink","$.EyeState","FadeIn","Link","CubismPose","pose3json","root","_fadeTimeSeconds","poseListInfo","poseCount","poseIndex","idListInfo","idCount","groupCount","groupIndex","partInfo","partData","PartData","partId","linkListInfo","linkCount","linkIndex","linkPart","linkId","link","_partGroups","_partGroupCounts","_lastModel","reset","beginIndex","partGroupCount","doFade","copyPartOpacities","partsIndex","partIndex","paramIndex","parameterIndex","setPartOpacityByIndex","setParameterValueByIndex","getPartOpacityByIndex","linkPartIndex","visiblePartIndex","newOpacity","phi","getParameterValueByIndex","a1","assignment","getParameterIndex","getPartIndex","clonePartData","$.CubismPose","$.PartData","CubismModelMatrix","_width","_height","setHeight","setWidth","scaleX","scaleY","setPosition","setCenterPosition","top","setY","bottom","left","setX","right","setupFromLayout","$.CubismModelMatrix","CubismVector2","vector2","substract","multiplyByScaler","scalar","division","divisionByScalar","sqrt","getDistanceWith","dot","normalize","pow","rhs","$.CubismVector2","CubismMath","range","min","max","cos","abs","cbrt","cx","isNegativeNumber","Infinity","exp","getEasingSine","clamp","degreesToRadian","degrees","radianToDegrees","radian","directionToRadian","from","to","atan2","directionToDegrees","degree","radianToDirection","totalAngle","quadraticEquation","Epsilon","cardanoAlgorithmForBezier","ba","ca","p","p3","q","q2","discriminant","center","threshold","mp3","mp33","cosphi","acos","t1","root1","root2","root3","u1","sd","mod","dividend","divisor","isFinite","warn","absDividend","absDivisor","floor","sign","$.CubismMath","FrameRate","CubismTargetPoint","_faceTargetX","_faceTargetY","_faceX","_faceY","_faceVX","_faceVY","_lastTimeSeconds","update","maxV","deltaTimeWeight","maxA","timeToMaxSpeed","dx","dy","vy","ax","ay","curV","getX","getY","CubismMouthTargetPoint","_mouthTargetValue","_mouthValue","_mouthVelocity","diff","acceleration","distanceToTarget","maxVForDistance","getMouthValue","setMouthTarget","setMouthValueImmediate","$.CubismTargetPoint","$.CubismMouthTargetPoint","ACubismMotion","motion","setBeganMotionHandler","onBeganMotionHandler","_onBeganMotion","getBeganMotionHandler","setFinishedMotionHandler","onFinishedMotionHandler","_onFinishedMotion","getFinishedMotionHandler","_fadeInSeconds","_fadeOutSeconds","_weight","_offsetSeconds","_isLoop","_isLoopFadeIn","_previousLoopState","_firedEventValues","motionQueueEntry","userTimeSeconds","isAvailable","isFinished","setupMotionQueueEntry","fadeWeight","updateFadeWeight","doUpdateParameters","getEndTime","setIsFinished","setIsStarted","setStartTime","setFadeInStartTime","adjustEndTime","_motion","getFadeInStartTime","setState","setFadeInTime","fadeInSeconds","setFadeOutTime","fadeOutSeconds","getFadeOutTime","getFadeInTime","setWeight","getWeight","getDuration","getLoopDuration","setOffsetTime","offsetSeconds","setLoop","loop","getLoop","setLoopFadeIn","loopFadeIn","getLoopFadeIn","getFiredEvent","beforeCheckTimeSeconds","motionTimeSeconds","isExistModelOpacity","getModelOpacityIndex","getModelOpacityId","getModelOpacityValue","duration","endTime","getStartTime","setEndTime","$.ACubismMotion","ExpressionKeyParameters","ExpressionKeyBlend","CubismExpressionMotion","expression","_parameters","blendType","ExpressionBlendType","Additive","Multiply","multiplyParameterValueById","Overwrite","calculateExpressionParameters","expressionParameterValues","expressionIndex","_fadeWeight","expressionParameterValue","currentParameterValue","overwriteValue","getParameterValueById","expressionParameters","getExpressionParameters","additiveValue","DefaultAdditiveValue","multiplyValue","DefaultMultiplyValue","calculateValue","newAdditiveValue","newMultiplyValue","newOverwriteValue","getFadeWeight","parameterCount","param","item","ExpressionParameter","source","destination","$.CubismExpressionMotion","$.ExpressionBlendType","$.ExpressionParameter","CubismMotionQueueEntry","_autoDelete","_available","_finished","_started","_startTimeSeconds","_fadeInStartTimeSeconds","_endTimeSeconds","_stateTimeSeconds","_stateWeight","_lastEventCheckSeconds","_motionQueueEntryHandle","_isTriggeredFadeOut","setFadeOut","startFadeOut","newEndTimeSeconds","startTime","setIsAvailable","timeSeconds","getStateTime","getStateWeight","getLastCheckEventSeconds","setLastCheckEventSeconds","checkSeconds","isTriggeredFadeOut","getFadeOutSeconds","getCubismMotion","$.CubismMotionQueueEntry","CubismMotionQueueManager","_eventCallBack","_eventCustomData","_motions","startMotion","autoDelete","InvalidMotionQueueEntryHandleValue","isFinishedByHandle","motionQueueEntryNumber","stopAllMotions","getCubismMotionQueueEntries","getCubismMotionQueueEntry","setEventCallback","customData","doUpdateMotion","updated","firedList","CubismMotionCurveTarget","CubismMotionSegmentType","$.CubismMotionQueueManager","$.InvalidMotionQueueEntryHandleValue","ExpressionParameterValue","CubismExpressionMotionManager","_currentPriority","_reservePriority","_expressionParameterValues","_fadeWeights","getCurrentPriority","getReservePriority","setFadeWeight","expressionFadeWeight","setReservePriority","priority","startMotionPriority","updateMotion","expressionWeight","difference","expressionMotion","$.CubismExpressionMotionManager","CubismMotionPoint","time","CubismMotionSegment","evaluate","basePointIndex","segmentType","CubismMotionCurve","type","CubismMotionCurveTarget_Model","segmentCount","baseSegmentIndex","CubismMotionEvent","fireTime","CubismMotionData","curveCount","eventCount","fps","curves","segments","points","events","$.CubismMotionCurve","$.CubismMotionCurveTarget","$.CubismMotionData","$.CubismMotionEvent","$.CubismMotionPoint","$.CubismMotionSegment","$.CubismMotionSegmentType","Meta","Curves","FadeInTime","FadeOutTime","Segments","UserData","CubismMotionJson","getMotionDuration","isMotionLoop","hasConsistency","actualCurveListSize","actualTotalSegmentCount","actualTotalPointCount","curvePosition","segmentPosition","getMotionCurveSegmentCount","getMotionCurveSegment","CubismMotionSegmentType_Linear","CubismMotionSegmentType_Bezier","CubismMotionSegmentType_Stepped","CubismMotionSegmentType_InverseStepped","getMotionCurveCount","getMotionTotalSegmentCount","getMotionTotalPointCount","getEvaluationOptionFlag","flagType","EvaluationOptionFlag","EvaluationOptionFlag_AreBeziersRistricted","getMotionFps","isExistMotionFadeInTime","isExistMotionFadeOutTime","getMotionFadeInTime","getMotionFadeOutTime","getMotionCurveTarget","curveIndex","getMotionCurveId","isExistMotionCurveFadeInTime","isExistMotionCurveFadeOutTime","getMotionCurveFadeInTime","getMotionCurveFadeOutTime","segmentIndex","getEventCount","getTotalEventValueSize","getEventTime","userDataIndex","getEventValue","$.CubismMotionJson","IdNameOpacity","lerpPoints","linearEvaluate","bezierEvaluate","p01","p12","p23","p012","p123","bezierEvaluateCardanoInterpretation","x1","x2","cx1","cx2","steppedEvaluate","inverseSteppedEvaluate","evaluateCurve","motionData","isCorrection","curve","totalSegmentCount","pointPosition","endIndex","motionPoint","correctEndPoint","segment","MotionBehavior","CubismPhysicsTargetType","CubismPhysicsSource","CubismMotion","shouldCheckMotionConsistency","_motionData","_sourceFrameRate","_loopDurationSeconds","_modelCurveIdEyeBlink","_modelCurveIdLipSync","_modelCurveIdOpacity","_motionBehavior","MotionBehavior_V2","timeOffsetSeconds","lipSyncValue","MAX_VALUE","eyeBlinkValue","maxTargetSize","lipSyncFlags","eyeBlinkFlags","_eyeBlinkParameterIds","_lipSyncParameterIds","tmpFadeIn","tmpFadeOut","_modelOpacity","setModelOapcity","CubismMotionCurveTarget_Parameter","sourceValue","isRepeat","getParameterRepeatValue","fin","fout","CubismMotionCurveTarget_PartOpacity","updateForNextLoop","_lastWeight","setIsLoop","isLoop","setIsLoopFadeIn","isLoopFadeIn","setMotionBehavior","motionBehavior","getMotionBehavior","setParameterFadeInTime","setParameterFadeOutTime","getParameterFadeInTime","getParameterFadeOutTime","setEffectIds","eyeBlinkParameterIds","lipSyncParameterIds","_debugMode","MotionBehavior_V1","motionJson","areBeziersRestructed","totalPointCount","userdatacount","u","localeCompare","setDebugMode","debugMode","$.CubismMotion","CubismMotionManager","reserveMotion","$.CubismMotionManager","PhysicsJsonEffectiveForces","gravity","wind","CubismPhysicsParameter","CubismPhysicsNormalization","CubismPhysicsParticle","initialPosition","lastPosition","lastGravity","force","velocity","CubismPhysicsSubRig","normalizationPosition","normalizationAngle","CubismPhysicsInput","CubismPhysicsOutput","translationScale","CubismPhysicsRig","settings","inputs","outputs","particles","$.CubismPhysicsInput","$.CubismPhysicsNormalization","$.CubismPhysicsOutput","$.CubismPhysicsParameter","$.CubismPhysicsParticle","$.CubismPhysicsRig","$.CubismPhysicsSource","$.CubismPhysicsSubRig","$.CubismPhysicsTargetType","$.PhysicsJsonEffectiveForces","Position","Angle","Type","EffectiveForces","Gravity","Wind","PhysicsSettings","Normalization","Minimum","Maximum","Default","Reflect","Weight","Input","Output","Vertices","CubismPhysicsJson","getGravity","getWind","getFps","getSubRigCount","getTotalInputCount","getTotalOutputCount","getVertexCount","getNormalizationPositionMinimumValue","physicsSettingIndex","getNormalizationPositionMaximumValue","getNormalizationPositionDefaultValue","getNormalizationAngleMinimumValue","getNormalizationAngleMaximumValue","getNormalizationAngleDefaultValue","getInputCount","getInputWeight","inputIndex","getInputReflect","getInputType","getInputSourceId","getOutputCount","getOutputVertexIndex","outputIndex","getOutputAngleScale","getOutputWeight","getOutputDestinationId","getOutputType","getOutputReflect","getParticleCount","getParticleMobility","vertexIndex","getParticleDelay","getParticleAcceleration","getParticleRadius","getParticlePosition","$.CubismPhysicsJson","PhysicsTypeTagAngle","CubismPhysics","_physicsRig","physicsJson","subRigCount","_currentRigOutputs","_previousRigOutputs","particleIndex","minimum","maximum","defalut","inputCount","baseInputIndex","sourceParameterIndex","reflect","CubismPhysicsSource_X","getNormalizedParameterValue","getInputTranslationXFromNormalizedParameterValue","CubismPhysicsSource_Y","getInputTranslationYFromNormalizedParamterValue","CubismPhysicsSource_Angle","getInputAngleFromNormalizedParameterValue","targetType","CubismPhysicsTargetType_Parameter","outputCount","baseOutputIndex","currentRigOutput","PhysicsOutput","previousRigOutput","destinationParameterIndex","angleScale","getOutputTranslationX","getScale","getOutputScaleTranslationX","getOutputTranslationY","getOutputScaleTranslationY","getOutputAngle","getOutputScaleAngle","particleCount","baseParticleIndex","mobility","delay","radius","stabilization","_b","_c","_d","_f","radAngle","outputValue","totalTranslation","currentSetting","currentInputs","currentOutputs","currentParticles","parameterValues","parameters","values","parameterMaximumValues","maximumValues","parameterMinimumValues","minimumValues","parameterDefaultValues","defaultValues","_parameterCaches","getParameterCount","_parameterInputCaches","settingIndex","angle","updateParticlesForStabilization","_options","translation","outParameterCaches","prototype","subarray","updateOutputParameterValue","outParamIndex","physicsDeltaTime","_currentRemainTime","inputWeight","updateParticles","interpolate","outParameterValues","setOptions","options","getOption","Options","strand","targetTranslation","targetAngle","parameterMinimumValue","parameterMaximumValue","parameterDefaultValue","isInverted","normalizeParameterValue","normalizaitionPosition","parentGravity","getDefaultValue","maxValue","minValue","getRangeValue","strandCount","windDirection","thresholdValue","airResistance","direction","newDirection","totalRadian","currentGravity","parameterValueMinimum","parameterValueMaximum","output","valueBelowMinimum","valueExceededMaximum","parameterMinimum","parameterMaximum","parameterDefault","normalizedMinimum","normalizedMaximum","normalizedDefault","minNormValue","maxNormValue","middleNormValue","middleValue","paramValue","pLength","$.CubismPhysics","$.Options","CubismClippingManager","clippingContextFactory","_renderTextureCount","_clippingMaskBufferSize","_clippingContextListForMask","_clippingContextListForDraw","_channelColors","_tmpBoundsOnModel","_tmpMatrix","_tmpMatrixForMask","_tmpMatrixForDraw","_clippingContexttConstructor","tmp","_clearedFrameBufferFlags","renderTextureCount","getDrawableCount","getDrawableMaskCounts","clippingContext","findSameClip","getDrawableMasks","drawableMasks","drawableMaskCounts","count","sameCount","clipId","setupMatrixForHighPrecision","isRightHanded","usingClipCount","clipIndex","cc","calcClippedDrawTotalBounds","_isUsing","setupLayoutBounds","clipContext","allClippedDrawRect","layoutBoundsOnTex01","margin","ppu","getPixelsPerUnit","maskPixelSize","getClippingManager","getClippingMaskBufferSize","physicalMaskWidth","physicalMaskHeight","createMatrixForMask","useClippingMaskMaxCount","_layoutChannelIndex","layoutCountMaxValue","countPerSheetDiv","reduceLayoutTextureCount","ceil","divCount","modCount","curClipIndex","renderTextureIndex","channelIndex","layoutCount","xpos","ypos","clippedDrawTotalMinX","clippedDrawTotalMinY","clippedDrawTotalMaxX","MIN_VALUE","clippedDrawTotalMaxY","clippedDrawCount","clippedDrawableIndex","drawableVertexCount","getDrawableVertexCount","drawableVertexes","getDrawableVertices","minX","minY","maxX","maxY","pi","getClippingContextListForDraw","getRenderTextureCount","getChannelFlagAsColor","channelNo","setClippingMaskBufferSize","s_instance","CubismShader_WebGL","_shaderSets","releaseShaderProgram","setupShaderProgramForDraw","srcColor","dstColor","srcAlpha","dstAlpha","generateShaders","masked","getClippingContextBufferForDraw","invertedMask","getDrawableInvertedMaskBit","shaderSet","getDrawableBlendMode","CubismBlendMode_Normal","ShaderNames","ShaderNames_NormalPremultipliedAlpha","gl","ONE","ONE_MINUS_SRC_ALPHA","CubismBlendMode_Additive","ShaderNames_AddPremultipliedAlpha","ZERO","CubismBlendMode_Multiplicative","ShaderNames_MultPremultipliedAlpha","DST_COLOR","useProgram","shaderProgram","_bufferData","vertex","createBuffer","bindBuffer","ARRAY_BUFFER","vertexArray","bufferData","DYNAMIC_DRAW","enableVertexAttribArray","attributePositionLocation","vertexAttribPointer","FLOAT","uv","uvArray","getDrawableVertexUvs","attributeTexCoordLocation","activeTexture","TEXTURE1","tex","getColorBuffer","bindTexture","TEXTURE_2D","uniform1i","samplerTexture1Location","uniformMatrix4fv","uniformClipMatrixLocation","colorChannel","uniform4f","uniformChannelFlagLocation","textureNo","getDrawableTextureIndex","textureId","getBindedTextures","TEXTURE0","samplerTexture0Location","matrix4x4","uniformMatrixLocation","baseColor","getDrawableOpacity","multiplyColor","getMultiplyColor","screenColor","getScreenColor","uniformBaseColorLocation","uniformMultiplyColorLocation","uniformScreenColorLocation","indexArray","getDrawableVertexIndices","ELEMENT_ARRAY_BUFFER","blendFuncSeparate","setupShaderProgramForMask","ShaderNames_SetupMask","getClippingContextBufferForMask","rect","ONE_MINUS_SRC_COLOR","deleteProgram","CubismShaderSet","loadShaderProgram","vertexShaderSrcSetupMask","fragmentShaderSrcsetupMask","vertexShaderSrc","fragmentShaderSrcPremultipliedAlpha","vertexShaderSrcMasked","fragmentShaderSrcMaskPremultipliedAlpha","fragmentShaderSrcMaskInvertedPremultipliedAlpha","getAttribLocation","getUniformLocation","vertexShaderSource","fragmentShaderSource","createProgram","vertShader","compileShaderSource","VERTEX_SHADER","fragShader","FRAGMENT_SHADER","attachShader","linkProgram","getProgramParameter","LINK_STATUS","deleteShader","shaderType","shaderSource","shader","createShader","compileShader","getShaderInfoLog","getShaderParameter","COMPILE_STATUS","setGl","CubismShaderManager_WebGL","getInstance","deleteInstance","_shaderMap","getShader","setGlContext","s_viewport","s_fbo","$.CubismShaderSet","$.CubismShader_WebGL","$.CubismShaderManager_WebGL","$.ShaderNames","CubismClippingManager_WebGL","getMaskRenderTexture","_maskTexture","frameNo","_currentFrameNo","_maskRenderTextures","_maskColorBuffers","createTexture","texImage2D","RGBA","UNSIGNED_BYTE","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","LINEAR","TEXTURE_MAG_FILTER","createFramebuffer","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","COLOR_ATTACHMENT0","CubismRenderTextureResource","setGL","CubismClippingContext_WebGL","setupClippingContext","viewport","_currentMaskRenderTexture","preDraw","allClipedDrawRect","clipContextRenderTexture","clipDrawCount","clipDrawIndex","getDrawableDynamicFlagVertexPositionsDidChange","getDrawableCulling","clearColor","COLOR_BUFFER_BIT","setClippingContextBufferForMask","drawMeshWebGL","getClippingMaskCount","texture","manager","_owner","CubismRendererProfile_WebGL","setGlEnable","enabled","disable","setGlEnableVertexAttribArray","disableVertexAttribArray","save","_lastArrayBufferBinding","getParameter","ARRAY_BUFFER_BINDING","_lastElementArrayBufferBinding","ELEMENT_ARRAY_BUFFER_BINDING","_lastProgram","CURRENT_PROGRAM","_lastActiveTexture","ACTIVE_TEXTURE","_lastTexture1Binding2D","TEXTURE_BINDING_2D","_lastTexture0Binding2D","_lastVertexAttribArrayEnabled","getVertexAttrib","VERTEX_ATTRIB_ARRAY_ENABLED","_lastScissorTest","isEnabled","SCISSOR_TEST","_lastStencilTest","STENCIL_TEST","_lastDepthTest","DEPTH_TEST","_lastCullFace","CULL_FACE","_lastBlend","BLEND","_lastFrontFace","FRONT_FACE","_lastColorMask","COLOR_WRITEMASK","_lastBlending","BLEND_SRC_RGB","BLEND_DST_RGB","BLEND_SRC_ALPHA","BLEND_DST_ALPHA","_lastFBO","FRAMEBUFFER_BINDING","_lastViewport","VIEWPORT","restore","frontFace","colorMask","CubismRenderer_WebGL","maskBufferCount","isUsingMasking","_clippingManager","_sortedDrawableIndexList","modelTextureNo","glTexture","_textures","_clippingContextBufferForMask","_clippingContextBufferForDraw","_rendererProfile","firstDraw","WebGLBuffer","deleteBuffer","drawableCount","renderOrder","getDrawableRenderOrders","order","getDrawableDynamicFlagIsVisible","setClippingContextBufferForDraw","CCW","isGeneratingMask","indexCount","getDrawableVertexIndexCount","drawElements","TRIANGLES","UNSIGNED_SHORT","doStaticRelease","setRenderState","fbo","CW","_extension","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","clip","getExtension","$.CubismClippingContext_WebGL","$.CubismClippingManager_WebGL","$.CubismRenderTextureResource","$.CubismRenderer_WebGL","ParameterRepeatData","isOverridden","isParameterRepeated","DrawableColorData","color","isOverwritten","PartColorData","DrawableCullingData","CubismModel","drawables","resetDynamicFlags","canvasinfo","PixelsPerUnit","getCanvasWidth","CanvasWidth","getCanvasHeight","CanvasHeight","saveParameters","savedParameterCount","_savedParameters","_parameterValues","getOverrideFlagForModelMultiplyColors","getOverrideFlagForDrawableMultiplyColors","_userMultiplyColors","getDrawableMultiplyColor","getOverrideFlagForModelScreenColors","getOverrideFlagForDrawableScreenColors","_userScreenColors","getDrawableScreenColor","setMultiplyColorByTextureColor","setMultiplyColorByRGBA","setScreenColorByTextureColor","setScreenColorByRGBA","getPartMultiplyColor","_userPartMultiplyColors","getPartScreenColor","_userPartScreenColors","setPartColor","partColors","drawableColors","_partChildDrawables","setPartMultiplyColorByTextureColor","setPartMultiplyColorByRGBA","setPartScreenColorByTextureColor","setPartScreenColorByRGBA","getOverrideFlagForModelParameterRepeat","_isOverriddenParameterRepeat","setOverrideFlagForModelParameterRepeat","getOverrideFlagForParameterRepeat","_userParameterRepeatDataList","setOverrideFlagForParameterRepeat","getRepeatFlagForParameterRepeat","setRepeatFlagForParameterRepeat","getOverwriteFlagForModelMultiplyColors","_isOverriddenModelMultiplyColors","getOverwriteFlagForModelScreenColors","_isOverriddenModelScreenColors","setOverwriteFlagForModelMultiplyColors","setOverrideFlagForModelMultiplyColors","setOverwriteFlagForModelScreenColors","setOverrideFlagForModelScreenColors","getOverwriteFlagForDrawableMultiplyColors","drawableindex","getOverwriteFlagForDrawableScreenColors","setOverwriteFlagForDrawableMultiplyColors","setOverrideFlagForDrawableMultiplyColors","setOverwriteFlagForDrawableScreenColors","setOverrideFlagForDrawableScreenColors","getOverwriteColorForPartMultiplyColors","getOverrideColorForPartMultiplyColors","getOverwriteColorForPartScreenColors","getOverrideColorForPartScreenColors","setOverwriteColorForPartColors","setOverrideColorForPartColors","setOverwriteColorForPartMultiplyColors","setOverrideColorForPartMultiplyColors","setOverwriteColorForPartScreenColors","setOverrideColorForPartScreenColors","getOverrideFlagForModelCullings","getOverrideFlagForDrawableCullings","_userCullings","constantFlags","Utils","hasIsDoubleSidedBit","setDrawableCulling","getOverwriteFlagForModelCullings","_isOverriddenCullings","setOverwriteFlagForModelCullings","isOverriddenCullings","setOverrideFlagForModelCullings","getOverwriteFlagForDrawableCullings","setOverwriteFlagForDrawableCullings","setOverrideFlagForDrawableCullings","getModelOapcity","partCount","parts","_partIds","_notExistPartId","_notExistPartOpacities","getPartId","getPartCount","getPartParentPartIndices","parentIndices","_partOpacities","setPartOpacityById","getPartOpacityById","_notExistParameterId","_notExistParameterValues","getParameterType","types","getParameterMaximumValue","getParameterMinimumValue","getParameterDefaultValue","getParameterId","getParameterClampValue","addParameterValueByIndex","repeats","valueSize","overValue","getParameterRepeats","multiplyParameterValueByIndex","getDrawableIndex","drawableId","_drawableIds","getDrawableId","renderOrders","getDrawableTextureIndices","textureIndices","dynamicFlags","hasVertexPositionsDidChangeBit","indexCounts","vertexCounts","getDrawableVertexPositions","indices","vertexPositions","vertexUvs","opacities","multiplyColors","screenColors","getDrawableParentPartIndex","parentPartIndices","hasBlendAdditiveBit","hasBlendMultiplicativeBit","hasIsInvertedMaskBit","masks","maskCounts","hasIsVisibleBit","getDrawableDynamicFlagVisibilityDidChange","hasVisibilityDidChangeBit","getDrawableDynamicFlagOpacityDidChange","hasOpacityDidChangeBit","getDrawableDynamicFlagRenderOrderDidChange","hasRenderOrderDidChangeBit","getDrawableDynamicFlagBlendColorDidChange","hasBlendColorDidChangeBit","loadParameters","_parameterMaximumValues","_parameterMinimumValues","partIds","drawableIds","userCulling","userMultiplyColor","userScreenColor","parentIndex","$.CubismModel","CubismMoc","mocBytes","shouldCheckMocConsistency","cubismMoc","hasMocConsistency","Moc","fromArrayBuffer","_mocVersion","csmGetMocVersion","_moc","_release","createModel","cubismModel","Model","fromMoc","_modelCount","deleteModel","getLatestMocVersion","csmGetLatestMocVersion","getMocVersion","$.CubismMoc","CubismModelUserDataJson","getUserDataCount","getTotalUserDataSize","getUserDataTargetType","getUserDataId","getUserDataValue","$.CubismModelUserDataJson","CubismModelUserDataNode","CubismModelUserData","parseUserData","modelUserData","getArtMeshUserDatas","_artMeshUserDataNode","typeOfArtMesh","nodeCount","addNode","targetId","_userDataNodes","$.CubismModelUserData","$.CubismModelUserDataNode","CubismUserModel","_initialized","setInitialized","isUpdating","_updating","setUpdating","setDragging","_dragManager","_mouthManager","setAcceleration","z","_accelerationX","_accelerationY","_accelerationZ","getModelMatrix","_modelMatrix","setOpacity","_opacity","getOpacity","loadModel","loadMotion","group","loadExpression","loadPose","_pose","loadUserData","_modelUserData","loadPhysics","_physics","isHit","pointX","pointY","drawIndex","vertices","tx","ty","getRenderer","_renderer","createRenderer","deleteRenderer","motionEventFired","eventValue","cubismDefaultMotionEventCallback","caller","_motionManager","_expressionManager","_eyeBlink","_breath","_lipsync","_lastLipSyncValue","_dragX","_dragY","_mocConsistency","$.CubismUserModel","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","done","apply","LAppWavFileHandler","releaseInstance","goalOffset","rms","_pcmData","_sampleOffset","_wavFileInfo","_samplesPerChannel","_lastRms","_samplingRate","channelCount","_numberOfChannels","sampleCount","pcm","start","loadWavFile","getRms","resolveValue","releasePcmData","asyncFileLoad","responce","_byteReader","_fileByte","_fileDataView","DataView","_fileSize","_readOffset","_fileName","getCheckSignature","Error","get32LittleEndian","fmtChunkSize","get16LittleEndian","_bitsPerSample","dataChunkSize","getPcmSample","pcm32","get8","get24LittleEndian","getPcmDataChannel","usechannel","getWavSamplingRate","loadFiletoBytes","WavFileInfo","ByteReader","getUint8","reference","getSignature","referenceString","TextEncoder","encode","signatureOffset","LoadStep","LAppModel","loadAssets","dir","fileName","_modelHomeDir","setting","_state","LoadModel","setupModel","catch","error","_modelSetting","modelFileName","status","ArrayBuffer","LoadExpression","loadCubismExpression","WaitLoadModel","expressionName","expressionFileName","_expressions","_expressionCount","LoadPhysics","loadCubismPhysics","WaitLoadExpression","physicsFileName","LoadPose","loadCubismPose","WaitLoadPhysics","poseFileName","SetupEyeBlink","setupEyeBlink","WaitLoadPose","SetupBreath","setupBreath","_idParamAngleX","_idParamAngleY","_idParamAngleZ","_idParamBodyAngleX","LoadUserData","userDataFile","SetupEyeBlinkIds","setupEyeBlinkIds","WaitLoadUserData","eyeBlinkIdCount","_eyeBlinkIds","SetupLipSyncIds","setupLipSyncIds","lipSyncIdCount","_lipSyncIds","SetupLayout","setupLayout","LoadMotion","loadCubismMotion","WaitLoadMotion","_allMotionCount","_motionCount","motionGroupCount","preLoadMotionGroup","LoadTexture","setupTextures","_subdelegate","getGlManager","usePremultiply","textureCount","modelTextureNumber","texturePath","onLoad","textureInfo","_textureCount","CompleteSetup","getTextureManager","createTextureFromPngFile","WaitLoadTexture","reloadRenderer","motionUpdated","startRandomMotion","_idParamEyeBallX","_idParamEyeBallY","mouthValue","_idParamMouthOpenY","_wavFileHandler","no","motionFileName","_motionConsistency","voice","path","setExpression","expressionId","setRandomExpression","hitTest","hitArenaName","drawId","tmpMotion","releaseMotions","releaseExpressions","doDraw","getCanvas","getFrameBuffer","draw","matrix","hasMocConsistencyFromFile","_consistency","setSubdelegate","subdelegate","_hitArea","_userArea","LoadAssets","LAppLive2DManager","releaseAllModel","_models","onDrag","onTap","toFixed","LAppDefine.HitAreaNameHead","LAppDefine.HitAreaNameBody","finishedMotion","beganMotion","onUpdate","projection","_viewMatrix","nextScene","_sceneIndex","LAppDefine.ModelDirSize","changeScene","modelPath","LAppDefine.ResourcesPath","LAppDefine.ModelDir","modelJsonName","setViewMatrix","addModel","sceneIndex","self","LAppTextureManager","_glManager","deleteTexture","usePremultply","img","Image","addEventListener","passive","LINEAR_MIPMAP_LINEAR","pixelStorei","UNPACK_PREMULTIPLY_ALPHA_WEBGL","generateMipmap","TextureInfo","releaseTextures","releaseTextureByTexture","releaseTextureByFilePath","setGlManager","glManager","CubismViewMatrix","_screenLeft","_screenRight","_screenTop","_screenBottom","_maxLeft","_maxRight","_maxTop","_maxBottom","_maxScale","_minScale","adjustTranslate","adjustScale","cy","maxScale","getMaxScale","minScale","getMinScale","targetScale","tr2","tr3","setScreenRect","setMaxScreenRect","setMaxScale","setMinScale","isMaxScale","isMinScale","getScreenLeft","getScreenRight","getScreenBottom","getScreenTop","getMaxLeft","getMaxRight","getMaxBottom","getMaxTop","$.CubismViewMatrix","LAppSprite","_rect","Rect","up","down","_texture","_vertexBuffer","_uvBuffer","_indexBuffer","_positionLocation","_uvLocation","_textureLocation","_positionArray","_uvArray","_indexArray","_firstDraw","getTexture","render","programId","maxWidth","maxHeight","Uint16Array","STATIC_DRAW","TouchManager","_startX","_startY","_lastX","_lastY","_lastX1","_lastY1","_lastX2","_lastY2","_lastTouchDistance","_deltaX","_deltaY","_scale","_touchSingle","_flipAvailable","getDeltaX","getDeltaY","getStartX","getStartY","getX1","getY1","getX2","getY2","isSingleTouch","isFlickAvailable","disableFlick","touchesBegan","deviceX","deviceY","touchesMoved","getFlickDistance","calculateDistance","y1","y2","calculateMovingAmount","v1","v2","absoluteValue1","absoluteValue2","LAppView","_programId","_back","_gear","_touchManager","_deviceToScreen","ratio","screenW","screenH","flush","lapplive2dmanager","getLive2DManager","initializeSprite","textureManager","resourcesPath","imageName","fwidth","fheight","onTouchesBegan","window","devicePixelRatio","onTouchesMoved","posX","posY","viewX","transformViewX","viewY","transformViewY","onTouchesEnded","screenX","screenY","transformScreenX","transformScreenY","LAppSubdelegate","_canvas","_textureManager","_live2dManager","_view","_frameBuffer","_captured","_resizeObserver","unobserve","disconnect","resizeCanvas","blendFunc","SRC_ALPHA","ResizeObserver","entries","observer","resizeObserverCallback","call","observe","onResize","_needResize","isContextLost","depthFunc","LEQUAL","DEPTH_BUFFER_BIT","clearDepth","vertexShaderId","fragmentShaderId","clientWidth","clientHeight","drawingBufferWidth","drawingBufferHeight","onPointBegan","pageX","pageY","localX","offsetLeft","localY","offsetTop","onPointMoved","onPointEnded","onTouchCancel","LAppDelegate","onPointerBegan","_subdelegates","onPointerMoved","onPointerEnded","onPointerCancel","run","requestAnimationFrame","releaseEventListener","releaseSubdelegates","_cubismOption","document","removeEventListener","pointBeganEventListener","pointMovedEventListener","pointEndedEventListener","pointCancelEventListener","initializeCubism","initializeSubdelegates","initializeEventListener","bind","LAppDefine.CubismLoggingLevel","_canvases","createElement","style","body","appendChild","AppSubdelegate","AppDelegate","_drawFrameId","mouseMoveEventListener","mouseEndedEventListener","tapEventListener","getElementById","logger","info","onMouseMove","onMouseEnd","stop","cancelAnimationFrame","transformOffset","getBoundingClientRect","dispatchEvent","Event","changeModel","modelSettingPath","pop","join","live2dManager","subdelegates"],"mappings":"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"}